/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _udonChatHTML_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./udonChatHTML.js */ \"./src/udonChatHTML.js\");\n\r\n\r\n\r\n// import {myStart} from \"./test.js\"; \r\n\r\n\r\nconst expr = 0;\r\nswitch (expr) {\r\n  case 0:\r\n      \r\n      // 先頭に import \"./udonChatHTML.js\"; が必要\r\n      \r\n  break;\r\n  case 1:\r\n      let myImportModuleName;\r\n      Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./udonChatHTML.js */ \"./src/udonChatHTML.js\")).then((module)=>{\r\n          // myImportModuleName = module.myImportModuleName;\r\n      });\r\n      \r\n  break;\r\n  case 10:  // テスト関数　静的import\r\n      // 先頭に import {myStart} from \"./test.js\"; が必要\r\n      myStart();\r\n      \r\n  break;\r\n  case 11:  // テスト関数　動的import\r\n      let myStart;\r\n//      import(\"./test.js\").then((module)=>{\r\n//          myStart = module.myStart;\r\n//          myStart();\r\n//      });\r\n      \r\n  break;\r\n  default:\r\n    console.log(`Sorry, we are out of ${expr}.`);\r\n}\r\n\r\n\r\n\r\n\r\n/* \r\n\r\n\tudonChatHTML.js\r\n      +--\tudonChatHTML_elements.js\r\n      +--\tudonChatHTML_VoiceRecognition.js\r\n\t  | \t  +--\tudonTextMessageChat.js\r\n\t  | \t  +--\tudonMediaStream.js\r\n\t  |\r\n\t  |\r\n\t  +--\tudonMediaStream.js\r\n\t  |\t\t  +--\tudonWebRTC.js\r\n\t  |   \t\t\t  +--\tudonChatHTML_elements.js\r\n\t  |\t\t\t\t\t\t  +--\tudonMediaStream.js // 循環参照あり\r\n\t  |\t\t\t\t  +--\tmyfunc_cookie.js\r\n\t  |\t\t\t\t  +--\tudonChatHTML_VideoStreamElement.js\r\n\t  |\t\t\t\t\t\t  +--\tudonWebRTC.js   // 循環参照あり\r\n\t  |\t\t\t\t  +--\tudonTextMessageChat.js\r\n\t  +--\tudonRecordVoice.js\r\n\t  +--\tudonTextMessageChat.js\r\n\r\n\r\n ※importのパスは相対指定、または package.jsonのdependencies設定値を使えばルートからパス指定可能。????  ＜＜どうもダメらしい\r\n 　　　例）　\"dependencies\": { \"srcroot\": \"link:./src\" }, としていた場合、import Header from 'srcroot/app/test.js'\r\n\r\n\r\n====================================\r\nudonChatHTML.js\r\n\timport { settingRecognition , flgEnableSpeechRecognition } from \"./udonChatHTML_VoiceRecognition.js\";\r\n\timport { startMultiparty } from \"./udonWebRTC.js\";\r\n\t\r\n\tfunction myOnload()\r\n\tfunction allDisabledElement(tgt,flg){\r\n\tfunction update_elemRange_microphoneLevelCurVal(){\r\n\tfunction update_elemRange_VideoFrameRateCurVal(){\r\n\r\n\r\n\r\nudonChatHTML_elements.js\r\n\tGhtml\r\n\tfunction dispInfoStreamStatus()\r\n\r\n\r\n\t\r\n\r\nudonChatHTML_VoiceRecognition.js\r\n\texport { settingRecognition , flgEnableSpeechRecognition };\r\n\t\r\n\tfunction settingRecognition(){\r\n\tfunction addMessageOfRecognition(msg1,msg2){\r\n\tfunction addMessageOfRecognitionErr(){\r\n\t\r\n\r\nudonWebRTC.js\r\n\timport { getCookie , setCookie } from \"./myfunc_cookie.js\";\r\n\texport { startMultiparty }\r\n\t\r\n\tfunction buildVideoConstraintsJSON() {\r\n\tfunction buildAudioConstraintsJSON() {\r\n\tfunction getCurrentSettings() {\r\n\tfunction startMultiparty(){\r\n\tfunction addNewPeer(newPeerID,actionFlg=1){\r\n\tfunction sendStreamToPeer(newPeerID){\r\n\tfunction connectDataToPeer(newPeerID,actionFlg=0){\r\n\tfunction createNewPeerSettingData(dataConnection,directionFlg=0,actionFlg=0){\r\n\tfunction sendListConnection(remoteId,requireCastFlg=0){\r\n\tfunction createConnectionByList(strList,mode=1){\r\n\tfunction allSendListConnection(expires=\"\"){\r\n\tfunction checkRecievedDataStatus(remoteId,data){\r\n\tfunction createNewPeerSettingCall(callConnection){\r\n\tfunction deletePeerFromCallList(tgtPeerID){\r\n\tfunction deletePeerFromDataList(tgtPeerID){\r\n\tfunction quitAllConnection(){\r\n\tfunction getSkywayPeerInstance(){\r\n\tfunction forceOnElemStream_SW(){\r\n\tfunction toggleElemStream_SW(){  // 接続の初期化（ON/OFF）\r\n\t\r\n\t\r\nudonChatHTML_VideoStreamElement.js\r\n\tfunction domAppendOrRemoveforPeer(mode,strTgtPeerId){\r\n\t\r\nudonMediaStream.js\r\n\texport { changeAudioConstraints,changeVideoConstraints }\r\n\t\r\n\tfunction startVideo(triggerElem = null) {\r\n\tfunction stopVideo(triggerElem = null){\r\n\tfunction changAbleStream(streamTracks , enableFlg){\r\n\tfunction resurrectionBtnElem(triggerElems){\r\n\tfunction CheckEnable_videoTrack(triggerElem = null , loop=0){\r\n\tfunction initVideoConstraints(triggerElem = null){  // ストリームのon/off制御\r\n\tfunction changeAudioConstraintsPt(){\r\n\tfunction changeAudioConstraints(triggerElem = null){\r\n\tfunction changeVideoConstraintsPt(){\r\n\tfunction changeVideoConstraints(triggerElem = null){\r\n\tfunction changeVideoConstraints_delay(mode=0){\r\n\r\nudonRecordVoice.js\r\n\texport { audioRecCommand , recreateAudioOutputStream};\r\n\t\r\n\tfunction audioRecCommand(mode){ //HTMLボタンより呼び出される。 mode=0:停止, 1:開始\r\n\tfunction createAudioOutputStream(){\r\n\tfunction recreateAudioOutputStream(){\r\n\tfunction recreateAudioOutputStream_restart(){\r\n\r\nudonTextMessageChat.js\r\n\texport { saveChatMessageLog,recieveNewChatMessage,sendNewChatMessage }\r\n\t\r\n\tfunction sendNewChatMessage(tgtmsg){\r\n\tfunction recieveNewChatMessage(strid,data,crflg=0) {\r\n\tfunction strFormatTwoChar(intval) {\r\n\tfunction chatMessage_saveFN_onchange(){\r\n\tfunction saveChatMessageLog(){\r\n\r\n*/\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXguanMuanMiLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUMyQjtBQUMzQjtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHNJQUEyQjtBQUNqQztBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsU0FBUyxrQkFBa0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsS0FBSztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIseUJBQXlCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxrREFBa0Q7QUFDNUQsVUFBVSxrQkFBa0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHdCQUF3QjtBQUNsQyxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRDtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yMDIxMDExMV93ZWJjaGF0Ly4vc3JjL2luZGV4LmpzP2I2MzUiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbmltcG9ydCBcIi4vdWRvbkNoYXRIVE1MLmpzXCI7XHJcblxyXG4vLyBpbXBvcnQge215U3RhcnR9IGZyb20gXCIuL3Rlc3QuanNcIjsgXHJcblxyXG5cclxuY29uc3QgZXhwciA9IDA7XHJcbnN3aXRjaCAoZXhwcikge1xyXG4gIGNhc2UgMDpcclxuICAgICAgXHJcbiAgICAgIC8vIOWFiOmgreOBqyBpbXBvcnQgXCIuL3Vkb25DaGF0SFRNTC5qc1wiOyDjgYzlv4XopoFcclxuICAgICAgXHJcbiAgYnJlYWs7XHJcbiAgY2FzZSAxOlxyXG4gICAgICBsZXQgbXlJbXBvcnRNb2R1bGVOYW1lO1xyXG4gICAgICBpbXBvcnQoXCIuL3Vkb25DaGF0SFRNTC5qc1wiKS50aGVuKChtb2R1bGUpPT57XHJcbiAgICAgICAgICAvLyBteUltcG9ydE1vZHVsZU5hbWUgPSBtb2R1bGUubXlJbXBvcnRNb2R1bGVOYW1lO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgYnJlYWs7XHJcbiAgY2FzZSAxMDogIC8vIOODhuOCueODiOmWouaVsOOAgOmdmeeahGltcG9ydFxyXG4gICAgICAvLyDlhYjpoK3jgasgaW1wb3J0IHtteVN0YXJ0fSBmcm9tIFwiLi90ZXN0LmpzXCI7IOOBjOW/heimgVxyXG4gICAgICBteVN0YXJ0KCk7XHJcbiAgICAgIFxyXG4gIGJyZWFrO1xyXG4gIGNhc2UgMTE6ICAvLyDjg4bjgrnjg4jplqLmlbDjgIDli5XnmoRpbXBvcnRcclxuICAgICAgbGV0IG15U3RhcnQ7XHJcbi8vICAgICAgaW1wb3J0KFwiLi90ZXN0LmpzXCIpLnRoZW4oKG1vZHVsZSk9PntcclxuLy8gICAgICAgICAgbXlTdGFydCA9IG1vZHVsZS5teVN0YXJ0O1xyXG4vLyAgICAgICAgICBteVN0YXJ0KCk7XHJcbi8vICAgICAgfSk7XHJcbiAgICAgIFxyXG4gIGJyZWFrO1xyXG4gIGRlZmF1bHQ6XHJcbiAgICBjb25zb2xlLmxvZyhgU29ycnksIHdlIGFyZSBvdXQgb2YgJHtleHByfS5gKTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuLyogXHJcblxyXG5cdHVkb25DaGF0SFRNTC5qc1xyXG4gICAgICArLS1cdHVkb25DaGF0SFRNTF9lbGVtZW50cy5qc1xyXG4gICAgICArLS1cdHVkb25DaGF0SFRNTF9Wb2ljZVJlY29nbml0aW9uLmpzXHJcblx0ICB8IFx0ICArLS1cdHVkb25UZXh0TWVzc2FnZUNoYXQuanNcclxuXHQgIHwgXHQgICstLVx0dWRvbk1lZGlhU3RyZWFtLmpzXHJcblx0ICB8XHJcblx0ICB8XHJcblx0ICArLS1cdHVkb25NZWRpYVN0cmVhbS5qc1xyXG5cdCAgfFx0XHQgICstLVx0dWRvbldlYlJUQy5qc1xyXG5cdCAgfCAgIFx0XHRcdCAgKy0tXHR1ZG9uQ2hhdEhUTUxfZWxlbWVudHMuanNcclxuXHQgIHxcdFx0XHRcdFx0XHQgICstLVx0dWRvbk1lZGlhU3RyZWFtLmpzIC8vIOW+queSsOWPgueFp+OBguOCilxyXG5cdCAgfFx0XHRcdFx0ICArLS1cdG15ZnVuY19jb29raWUuanNcclxuXHQgIHxcdFx0XHRcdCAgKy0tXHR1ZG9uQ2hhdEhUTUxfVmlkZW9TdHJlYW1FbGVtZW50LmpzXHJcblx0ICB8XHRcdFx0XHRcdFx0ICArLS1cdHVkb25XZWJSVEMuanMgICAvLyDlvqrnkrDlj4LnhafjgYLjgopcclxuXHQgIHxcdFx0XHRcdCAgKy0tXHR1ZG9uVGV4dE1lc3NhZ2VDaGF0LmpzXHJcblx0ICArLS1cdHVkb25SZWNvcmRWb2ljZS5qc1xyXG5cdCAgKy0tXHR1ZG9uVGV4dE1lc3NhZ2VDaGF0LmpzXHJcblxyXG5cclxuIOKAu2ltcG9ydOOBruODkeOCueOBr+ebuOWvvuaMh+WumuOAgeOBvuOBn+OBryBwYWNrYWdlLmpzb27jga5kZXBlbmRlbmNpZXPoqK3lrprlgKTjgpLkvb/jgYjjgbDjg6vjg7zjg4jjgYvjgonjg5HjgrnmjIflrprlj6/og73jgII/Pz8/ICDvvJzvvJzjganjgYbjgoLjg4Djg6HjgonjgZfjgYRcclxuIOOAgOOAgOOAgOS+i++8ieOAgFwiZGVwZW5kZW5jaWVzXCI6IHsgXCJzcmNyb290XCI6IFwibGluazouL3NyY1wiIH0sIOOBqOOBl+OBpuOBhOOBn+WgtOWQiOOAgWltcG9ydCBIZWFkZXIgZnJvbSAnc3Jjcm9vdC9hcHAvdGVzdC5qcydcclxuXHJcblxyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxudWRvbkNoYXRIVE1MLmpzXHJcblx0aW1wb3J0IHsgc2V0dGluZ1JlY29nbml0aW9uICwgZmxnRW5hYmxlU3BlZWNoUmVjb2duaXRpb24gfSBmcm9tIFwiLi91ZG9uQ2hhdEhUTUxfVm9pY2VSZWNvZ25pdGlvbi5qc1wiO1xyXG5cdGltcG9ydCB7IHN0YXJ0TXVsdGlwYXJ0eSB9IGZyb20gXCIuL3Vkb25XZWJSVEMuanNcIjtcclxuXHRcclxuXHRmdW5jdGlvbiBteU9ubG9hZCgpXHJcblx0ZnVuY3Rpb24gYWxsRGlzYWJsZWRFbGVtZW50KHRndCxmbGcpe1xyXG5cdGZ1bmN0aW9uIHVwZGF0ZV9lbGVtUmFuZ2VfbWljcm9waG9uZUxldmVsQ3VyVmFsKCl7XHJcblx0ZnVuY3Rpb24gdXBkYXRlX2VsZW1SYW5nZV9WaWRlb0ZyYW1lUmF0ZUN1clZhbCgpe1xyXG5cclxuXHJcblxyXG51ZG9uQ2hhdEhUTUxfZWxlbWVudHMuanNcclxuXHRHaHRtbFxyXG5cdGZ1bmN0aW9uIGRpc3BJbmZvU3RyZWFtU3RhdHVzKClcclxuXHJcblxyXG5cdFxyXG5cclxudWRvbkNoYXRIVE1MX1ZvaWNlUmVjb2duaXRpb24uanNcclxuXHRleHBvcnQgeyBzZXR0aW5nUmVjb2duaXRpb24gLCBmbGdFbmFibGVTcGVlY2hSZWNvZ25pdGlvbiB9O1xyXG5cdFxyXG5cdGZ1bmN0aW9uIHNldHRpbmdSZWNvZ25pdGlvbigpe1xyXG5cdGZ1bmN0aW9uIGFkZE1lc3NhZ2VPZlJlY29nbml0aW9uKG1zZzEsbXNnMil7XHJcblx0ZnVuY3Rpb24gYWRkTWVzc2FnZU9mUmVjb2duaXRpb25FcnIoKXtcclxuXHRcclxuXHJcbnVkb25XZWJSVEMuanNcclxuXHRpbXBvcnQgeyBnZXRDb29raWUgLCBzZXRDb29raWUgfSBmcm9tIFwiLi9teWZ1bmNfY29va2llLmpzXCI7XHJcblx0ZXhwb3J0IHsgc3RhcnRNdWx0aXBhcnR5IH1cclxuXHRcclxuXHRmdW5jdGlvbiBidWlsZFZpZGVvQ29uc3RyYWludHNKU09OKCkge1xyXG5cdGZ1bmN0aW9uIGJ1aWxkQXVkaW9Db25zdHJhaW50c0pTT04oKSB7XHJcblx0ZnVuY3Rpb24gZ2V0Q3VycmVudFNldHRpbmdzKCkge1xyXG5cdGZ1bmN0aW9uIHN0YXJ0TXVsdGlwYXJ0eSgpe1xyXG5cdGZ1bmN0aW9uIGFkZE5ld1BlZXIobmV3UGVlcklELGFjdGlvbkZsZz0xKXtcclxuXHRmdW5jdGlvbiBzZW5kU3RyZWFtVG9QZWVyKG5ld1BlZXJJRCl7XHJcblx0ZnVuY3Rpb24gY29ubmVjdERhdGFUb1BlZXIobmV3UGVlcklELGFjdGlvbkZsZz0wKXtcclxuXHRmdW5jdGlvbiBjcmVhdGVOZXdQZWVyU2V0dGluZ0RhdGEoZGF0YUNvbm5lY3Rpb24sZGlyZWN0aW9uRmxnPTAsYWN0aW9uRmxnPTApe1xyXG5cdGZ1bmN0aW9uIHNlbmRMaXN0Q29ubmVjdGlvbihyZW1vdGVJZCxyZXF1aXJlQ2FzdEZsZz0wKXtcclxuXHRmdW5jdGlvbiBjcmVhdGVDb25uZWN0aW9uQnlMaXN0KHN0ckxpc3QsbW9kZT0xKXtcclxuXHRmdW5jdGlvbiBhbGxTZW5kTGlzdENvbm5lY3Rpb24oZXhwaXJlcz1cIlwiKXtcclxuXHRmdW5jdGlvbiBjaGVja1JlY2lldmVkRGF0YVN0YXR1cyhyZW1vdGVJZCxkYXRhKXtcclxuXHRmdW5jdGlvbiBjcmVhdGVOZXdQZWVyU2V0dGluZ0NhbGwoY2FsbENvbm5lY3Rpb24pe1xyXG5cdGZ1bmN0aW9uIGRlbGV0ZVBlZXJGcm9tQ2FsbExpc3QodGd0UGVlcklEKXtcclxuXHRmdW5jdGlvbiBkZWxldGVQZWVyRnJvbURhdGFMaXN0KHRndFBlZXJJRCl7XHJcblx0ZnVuY3Rpb24gcXVpdEFsbENvbm5lY3Rpb24oKXtcclxuXHRmdW5jdGlvbiBnZXRTa3l3YXlQZWVySW5zdGFuY2UoKXtcclxuXHRmdW5jdGlvbiBmb3JjZU9uRWxlbVN0cmVhbV9TVygpe1xyXG5cdGZ1bmN0aW9uIHRvZ2dsZUVsZW1TdHJlYW1fU1coKXsgIC8vIOaOpee2muOBruWIneacn+WMlu+8iE9OL09GRu+8iVxyXG5cdFxyXG5cdFxyXG51ZG9uQ2hhdEhUTUxfVmlkZW9TdHJlYW1FbGVtZW50LmpzXHJcblx0ZnVuY3Rpb24gZG9tQXBwZW5kT3JSZW1vdmVmb3JQZWVyKG1vZGUsc3RyVGd0UGVlcklkKXtcclxuXHRcclxudWRvbk1lZGlhU3RyZWFtLmpzXHJcblx0ZXhwb3J0IHsgY2hhbmdlQXVkaW9Db25zdHJhaW50cyxjaGFuZ2VWaWRlb0NvbnN0cmFpbnRzIH1cclxuXHRcclxuXHRmdW5jdGlvbiBzdGFydFZpZGVvKHRyaWdnZXJFbGVtID0gbnVsbCkge1xyXG5cdGZ1bmN0aW9uIHN0b3BWaWRlbyh0cmlnZ2VyRWxlbSA9IG51bGwpe1xyXG5cdGZ1bmN0aW9uIGNoYW5nQWJsZVN0cmVhbShzdHJlYW1UcmFja3MgLCBlbmFibGVGbGcpe1xyXG5cdGZ1bmN0aW9uIHJlc3VycmVjdGlvbkJ0bkVsZW0odHJpZ2dlckVsZW1zKXtcclxuXHRmdW5jdGlvbiBDaGVja0VuYWJsZV92aWRlb1RyYWNrKHRyaWdnZXJFbGVtID0gbnVsbCAsIGxvb3A9MCl7XHJcblx0ZnVuY3Rpb24gaW5pdFZpZGVvQ29uc3RyYWludHModHJpZ2dlckVsZW0gPSBudWxsKXsgIC8vIOOCueODiOODquODvOODoOOBrm9uL29mZuWItuW+oVxyXG5cdGZ1bmN0aW9uIGNoYW5nZUF1ZGlvQ29uc3RyYWludHNQdCgpe1xyXG5cdGZ1bmN0aW9uIGNoYW5nZUF1ZGlvQ29uc3RyYWludHModHJpZ2dlckVsZW0gPSBudWxsKXtcclxuXHRmdW5jdGlvbiBjaGFuZ2VWaWRlb0NvbnN0cmFpbnRzUHQoKXtcclxuXHRmdW5jdGlvbiBjaGFuZ2VWaWRlb0NvbnN0cmFpbnRzKHRyaWdnZXJFbGVtID0gbnVsbCl7XHJcblx0ZnVuY3Rpb24gY2hhbmdlVmlkZW9Db25zdHJhaW50c19kZWxheShtb2RlPTApe1xyXG5cclxudWRvblJlY29yZFZvaWNlLmpzXHJcblx0ZXhwb3J0IHsgYXVkaW9SZWNDb21tYW5kICwgcmVjcmVhdGVBdWRpb091dHB1dFN0cmVhbX07XHJcblx0XHJcblx0ZnVuY3Rpb24gYXVkaW9SZWNDb21tYW5kKG1vZGUpeyAvL0hUTUzjg5zjgr/jg7PjgojjgorlkbzjgbPlh7rjgZXjgozjgovjgIIgbW9kZT0wOuWBnOatoiwgMTrplovlp4tcclxuXHRmdW5jdGlvbiBjcmVhdGVBdWRpb091dHB1dFN0cmVhbSgpe1xyXG5cdGZ1bmN0aW9uIHJlY3JlYXRlQXVkaW9PdXRwdXRTdHJlYW0oKXtcclxuXHRmdW5jdGlvbiByZWNyZWF0ZUF1ZGlvT3V0cHV0U3RyZWFtX3Jlc3RhcnQoKXtcclxuXHJcbnVkb25UZXh0TWVzc2FnZUNoYXQuanNcclxuXHRleHBvcnQgeyBzYXZlQ2hhdE1lc3NhZ2VMb2cscmVjaWV2ZU5ld0NoYXRNZXNzYWdlLHNlbmROZXdDaGF0TWVzc2FnZSB9XHJcblx0XHJcblx0ZnVuY3Rpb24gc2VuZE5ld0NoYXRNZXNzYWdlKHRndG1zZyl7XHJcblx0ZnVuY3Rpb24gcmVjaWV2ZU5ld0NoYXRNZXNzYWdlKHN0cmlkLGRhdGEsY3JmbGc9MCkge1xyXG5cdGZ1bmN0aW9uIHN0ckZvcm1hdFR3b0NoYXIoaW50dmFsKSB7XHJcblx0ZnVuY3Rpb24gY2hhdE1lc3NhZ2Vfc2F2ZUZOX29uY2hhbmdlKCl7XHJcblx0ZnVuY3Rpb24gc2F2ZUNoYXRNZXNzYWdlTG9nKCl7XHJcblxyXG4qL1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ }),

/***/ "./src/myClasses.js":
/*!**************************!*\
  !*** ./src/myClasses.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"c_DataContainer\": () => (/* binding */ c_DataContainer)\n/* harmony export */ });\n// import { c_DataContainer } from \"./myClasses.js\"; で利用可能になる。\r\n//\t※クラス定義は巻き戻しは起こらないので、必ず最初に定義を済ませる事。\r\n//クラス名は大文字で始めるのが慣例。\r\n\r\n\r\n\r\nlet c_DataContainer = class {\r\n    constructor() {    //コンストラクタ\r\n        this.data = null;\r\n        this.isCompressed =false;\r\n        this.ttl=0;\r\n        this.peers=null;\r\n        this.datatype=\"\";\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* サンプル =========================================\r\nlet c_DataContainer = class {\r\n    //コンストラクタ\r\n    constructor(z) {\r\n        this.z = z   \r\n    }\r\n    //プロパティ\r\n    get getZ() {\r\n        return this.z\r\n    }\r\n    set setZ(z) {\r\n        this.z = z\r\n    }\r\n    //メソッド\r\n    calc() { \r\n        return this.x + this.y  // x と y を足した値を返却する \r\n    }\r\n}\r\nlet taro = new c_DataContainer('Zの値');\r\nalert(taro.z)  //  ゲッターなしでも値にはアクセス可能。\r\n*///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbXlDbGFzc2VzLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxZQUFZLGtCQUFrQix1QkFBdUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLzIwMjEwMTExX3dlYmNoYXQvLi9zcmMvbXlDbGFzc2VzLmpzPzUxYWUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IHsgY19EYXRhQ29udGFpbmVyIH0gZnJvbSBcIi4vbXlDbGFzc2VzLmpzXCI7IOOBp+WIqeeUqOWPr+iDveOBq+OBquOCi+OAglxyXG4vL1x04oC744Kv44Op44K55a6a576p44Gv5be744GN5oi744GX44Gv6LW344GT44KJ44Gq44GE44Gu44Gn44CB5b+F44Ga5pyA5Yid44Gr5a6a576p44KS5riI44G+44Gb44KL5LqL44CCXHJcbi8v44Kv44Op44K55ZCN44Gv5aSn5paH5a2X44Gn5aeL44KB44KL44Gu44GM5oWj5L6L44CCXHJcblxyXG5cclxuXHJcbmV4cG9ydCBsZXQgY19EYXRhQ29udGFpbmVyID0gY2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3IoKSB7ICAgIC8v44Kz44Oz44K544OI44Op44Kv44K/XHJcbiAgICAgICAgdGhpcy5kYXRhID0gbnVsbDtcclxuICAgICAgICB0aGlzLmlzQ29tcHJlc3NlZCA9ZmFsc2U7XHJcbiAgICAgICAgdGhpcy50dGw9MDtcclxuICAgICAgICB0aGlzLnBlZXJzPW51bGw7XHJcbiAgICAgICAgdGhpcy5kYXRhdHlwZT1cIlwiO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLyog44K144Oz44OX44OrID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmxldCBjX0RhdGFDb250YWluZXIgPSBjbGFzcyB7XHJcbiAgICAvL+OCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgY29uc3RydWN0b3Ioeikge1xyXG4gICAgICAgIHRoaXMueiA9IHogICBcclxuICAgIH1cclxuICAgIC8v44OX44Ot44OR44OG44KjXHJcbiAgICBnZXQgZ2V0WigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy56XHJcbiAgICB9XHJcbiAgICBzZXQgc2V0Wih6KSB7XHJcbiAgICAgICAgdGhpcy56ID0gelxyXG4gICAgfVxyXG4gICAgLy/jg6Hjgr3jg4Pjg4lcclxuICAgIGNhbGMoKSB7IFxyXG4gICAgICAgIHJldHVybiB0aGlzLnggKyB0aGlzLnkgIC8vIHgg44GoIHkg44KS6Laz44GX44Gf5YCk44KS6L+U5Y2044GZ44KLIFxyXG4gICAgfVxyXG59XHJcbmxldCB0YXJvID0gbmV3IGNfRGF0YUNvbnRhaW5lcignWuOBruWApCcpO1xyXG5hbGVydCh0YXJvLnopICAvLyAg44Ky44OD44K/44O844Gq44GX44Gn44KC5YCk44Gr44Gv44Ki44Kv44K744K55Y+v6IO944CCXHJcbiovIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/myClasses.js\n");

/***/ }),

/***/ "./src/myGlobalParams.js":
/*!*******************************!*\
  !*** ./src/myGlobalParams.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"G\": () => (/* binding */ G)\n/* harmony export */ });\n// import { G }  from \"./myGlobalParams.js\"; で利用可能になる。\r\n//\t※この場合、G.testparam01=0; 等となる。変数G自体は参照のみ可能(代入不可)。\r\n\r\nlet G = {};  //let G = new Object();\r\n\r\n\r\n\r\n\r\n\r\nG.SkyWayPeer;\r\nG.connectedCalls={};  // 接続したコールを保存しておく連想配列変数\r\nG.connectedDatas={};  // 接続したchatデータコネクトを保存しておく連想配列変数\r\n\r\n\r\nG.localStream = null;    // 自分の映像ストリームを保存しておく変数\r\n\r\n\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbXlHbG9iYWxQYXJhbXMuanMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLFlBQVksS0FBSyw0QkFBNEI7QUFDN0MsMEJBQTBCO0FBQzFCO0FBQ08sYUFBYTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEIsc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vMjAyMTAxMTFfd2ViY2hhdC8uL3NyYy9teUdsb2JhbFBhcmFtcy5qcz8wNGU3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCB7IEcgfSAgZnJvbSBcIi4vbXlHbG9iYWxQYXJhbXMuanNcIjsg44Gn5Yip55So5Y+v6IO944Gr44Gq44KL44CCXHJcbi8vXHTigLvjgZPjga7loLTlkIjjgIFHLnRlc3RwYXJhbTAxPTA7IOetieOBqOOBquOCi+OAguWkieaVsEfoh6rkvZPjga/lj4Lnhafjga7jgb/lj6/og70o5Luj5YWl5LiN5Y+vKeOAglxyXG5cclxuZXhwb3J0IGxldCBHID0ge307ICAvL2xldCBHID0gbmV3IE9iamVjdCgpO1xyXG5cclxuXHJcblxyXG5cclxuXHJcbkcuU2t5V2F5UGVlcjtcclxuRy5jb25uZWN0ZWRDYWxscz17fTsgIC8vIOaOpee2muOBl+OBn+OCs+ODvOODq+OCkuS/neWtmOOBl+OBpuOBiuOBj+mAo+aDs+mFjeWIl+WkieaVsFxyXG5HLmNvbm5lY3RlZERhdGFzPXt9OyAgLy8g5o6l57aa44GX44GfY2hhdOODh+ODvOOCv+OCs+ODjeOCr+ODiOOCkuS/neWtmOOBl+OBpuOBiuOBj+mAo+aDs+mFjeWIl+WkieaVsFxyXG5cclxuXHJcbkcubG9jYWxTdHJlYW0gPSBudWxsOyAgICAvLyDoh6rliIbjga7mmKDlg4/jgrnjg4jjg6rjg7zjg6DjgpLkv53lrZjjgZfjgabjgYrjgY/lpInmlbBcclxuXHJcblxyXG5cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/myGlobalParams.js\n");

/***/ }),

/***/ "./src/myfunc_MessagePack.js":
/*!***********************************!*\
  !*** ./src/myfunc_MessagePack.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"msgpack_decode\": () => (/* binding */ msgpack_decode),\n/* harmony export */   \"msgpack_encode\": () => (/* binding */ msgpack_encode)\n/* harmony export */ });\n/* harmony import */ var _msgpack_msgpack__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @msgpack/msgpack */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/encode.mjs\");\n/* harmony import */ var _msgpack_msgpack__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @msgpack/msgpack */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/decode.mjs\");\n\r\n\r\n\r\n\r\n\r\nfunction msgpack_encode(object) {\r\n    try {\r\n      return (0,_msgpack_msgpack__WEBPACK_IMPORTED_MODULE_0__.encode)(object);\r\n    } catch (error) {\r\n      console.error(error, object);\r\n    }\r\n    return null;\r\n}\r\n\r\n\r\nfunction msgpack_decode(buffer) {\r\n    try {\r\n      return (0,_msgpack_msgpack__WEBPACK_IMPORTED_MODULE_1__.decode)(buffer);\r\n    } catch (error) {\r\n      console.error(error, buffer);\r\n    }\r\n    return null;\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbXlmdW5jX01lc3NhZ2VQYWNrLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBa0Q7QUFDbEQ7QUFDQTtBQUMyQztBQUMzQztBQUNBO0FBQ0E7QUFDQSxhQUFhLHdEQUFNO0FBQ25CLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx3REFBTTtBQUNuQixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yMDIxMDExMV93ZWJjaGF0Ly4vc3JjL215ZnVuY19NZXNzYWdlUGFjay5qcz83ZTJmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGVuY29kZSwgZGVjb2RlIH0gZnJvbSBcIkBtc2dwYWNrL21zZ3BhY2tcIjtcclxuXHJcblxyXG5leHBvcnQgeyBtc2dwYWNrX2VuY29kZSAsIG1zZ3BhY2tfZGVjb2RlIH07XHJcblxyXG5mdW5jdGlvbiBtc2dwYWNrX2VuY29kZShvYmplY3QpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBlbmNvZGUob2JqZWN0KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IsIG9iamVjdCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIG1zZ3BhY2tfZGVjb2RlKGJ1ZmZlcikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmV0dXJuIGRlY29kZShidWZmZXIpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvciwgYnVmZmVyKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/myfunc_MessagePack.js\n");

/***/ }),

/***/ "./src/myfunc_cookie.js":
/*!******************************!*\
  !*** ./src/myfunc_cookie.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getCookie\": () => (/* binding */ getCookie),\n/* harmony export */   \"setCookie\": () => (/* binding */ setCookie)\n/* harmony export */ });\n\r\nfunction getCookie(name){\r\n    let strValue;\r\n    const strCookiename = encodeURIComponent(name);\r\n    \r\n    let cookies = document.cookie.split(';');\r\n    cookies.forEach(function(value) {\r\n        let content = value.split('=');\r\n        if((content[0].trim())==strCookiename){\r\n            strValue = (content[1].trim());\r\n        }\r\n    });\r\n    return strValue;\r\n}\r\nfunction setCookie(strName,strValue,expireDay =3){\r\n    let adddata;\r\n    \r\n    adddata = encodeURIComponent(strName) + \"=\" + encodeURIComponent(strValue);\r\n    \r\n    let expireTime =0;\r\n    expireTime = 60*60*24; //１日の秒数\r\n    expireTime *= expireDay;\r\n    adddata =adddata + \";max-age=\" + (expireTime.toString());\r\n    \r\n    adddata =adddata + \";SameSite=Strict;Secure\";\r\n    \r\n    document.cookie = adddata;\r\n\r\n}\r\n\r\n\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbXlmdW5jX2Nvb2tpZS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EseUJBQXlCLGdCQUFnQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yMDIxMDExMV93ZWJjaGF0Ly4vc3JjL215ZnVuY19jb29raWUuanM/NjkzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZnVuY3Rpb24gZ2V0Q29va2llKG5hbWUpe1xyXG4gICAgbGV0IHN0clZhbHVlO1xyXG4gICAgY29uc3Qgc3RyQ29va2llbmFtZSA9IGVuY29kZVVSSUNvbXBvbmVudChuYW1lKTtcclxuICAgIFxyXG4gICAgbGV0IGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcclxuICAgIGNvb2tpZXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIGxldCBjb250ZW50ID0gdmFsdWUuc3BsaXQoJz0nKTtcclxuICAgICAgICBpZigoY29udGVudFswXS50cmltKCkpPT1zdHJDb29raWVuYW1lKXtcclxuICAgICAgICAgICAgc3RyVmFsdWUgPSAoY29udGVudFsxXS50cmltKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHN0clZhbHVlO1xyXG59XHJcbmZ1bmN0aW9uIHNldENvb2tpZShzdHJOYW1lLHN0clZhbHVlLGV4cGlyZURheSA9Myl7XHJcbiAgICBsZXQgYWRkZGF0YTtcclxuICAgIFxyXG4gICAgYWRkZGF0YSA9IGVuY29kZVVSSUNvbXBvbmVudChzdHJOYW1lKSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0clZhbHVlKTtcclxuICAgIFxyXG4gICAgbGV0IGV4cGlyZVRpbWUgPTA7XHJcbiAgICBleHBpcmVUaW1lID0gNjAqNjAqMjQ7IC8v77yR5pel44Gu56eS5pWwXHJcbiAgICBleHBpcmVUaW1lICo9IGV4cGlyZURheTtcclxuICAgIGFkZGRhdGEgPWFkZGRhdGEgKyBcIjttYXgtYWdlPVwiICsgKGV4cGlyZVRpbWUudG9TdHJpbmcoKSk7XHJcbiAgICBcclxuICAgIGFkZGRhdGEgPWFkZGRhdGEgKyBcIjtTYW1lU2l0ZT1TdHJpY3Q7U2VjdXJlXCI7XHJcbiAgICBcclxuICAgIGRvY3VtZW50LmNvb2tpZSA9IGFkZGRhdGE7XHJcblxyXG59XHJcblxyXG5cclxuZXhwb3J0IHsgZ2V0Q29va2llICwgc2V0Q29va2llIH07XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/myfunc_cookie.js\n");

/***/ }),

/***/ "./src/udonChatHTML.js":
/*!*****************************!*\
  !*** ./src/udonChatHTML.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./myGlobalParams.js */ \"./src/myGlobalParams.js\");\n/* harmony import */ var _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./udonChatHTML_elements.js */ \"./src/udonChatHTML_elements.js\");\n/* harmony import */ var _udonChatHTML_VoiceRecognition_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./udonChatHTML_VoiceRecognition.js */ \"./src/udonChatHTML_VoiceRecognition.js\");\n/* harmony import */ var _udonWebRTC_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./udonWebRTC.js */ \"./src/udonWebRTC.js\");\n/* harmony import */ var _udonMediaStream_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./udonMediaStream.js */ \"./src/udonMediaStream.js\");\n/* harmony import */ var _udonRecordVoice_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./udonRecordVoice.js */ \"./src/udonRecordVoice.js\");\n/* harmony import */ var _udonTextMessageChat_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./udonTextMessageChat.js */ \"./src/udonTextMessageChat.js\");\n/* harmony import */ var _udonChatMessageLog_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./udonChatMessageLog.js */ \"./src/udonChatMessageLog.js\");\n/* harmony import */ var _myfunc_cookie_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./myfunc_cookie.js */ \"./src/myfunc_cookie.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// DOM要素の構築が終わった場合に呼ばれるイベント\r\n// - DOM要素に結びつく設定はこの中で行なう\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {  // <<< $(function() {\r\n    myOnload();\r\n})\r\nfunction myOnload(){\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemStream_SW =  document.getElementById('my-stream_sw');\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemStream_SW_Msg =  document.getElementById('my-stream_sw_message');\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemVideo_STTS =  document.getElementById('my-video_status');\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemMic_SW =  document.getElementById('my-mic_sw');\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemMic_STTS =  document.getElementById('my-mic_status');\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemRange_microphoneLevel = document.getElementById('my-microphoneLevel');\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemRange_microphoneLevelCurVal = document.getElementById('my-microphoneLevel_currentValue');\r\n\r\n\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemCheckBox_micProperties = document.getElementsByName(\"my-checkbox_microphoneProps\");\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemRadio_micEchoCancel= document.getElementsByName(\"my-radio_microphoneEchoCancel\");\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemTextArea_ResultRecognition = document.getElementById(\"textarea_ResultRecognition\");\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemTextArea_ResultRecognitionP= document.getElementById(\"textarea_ResultRecognition_pre\");\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemCheckBox_ResultRecognition = document.getElementById(\"my-checkbox_recordRecognition\");\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemCheckBox_ResultRecognition_chat = document.getElementById(\"my-checkbox_recordRecognition_directChat\");\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_ResultRecognitionStatus = document.getElementById(\"text_ResultRecognition_status\");\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_chatMessage = document.getElementById(\"textarea_chatMessage-input\");\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_chatMessage_SW = document.getElementById(\"textarea_chatMessage-input_sw\");\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_chatMessage_log = document.getElementById(\"textarea_chatMessage-log\");\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_chatMessage_saveSW = document.getElementById(\"textarea_chatMessage-logsave_sw\");\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_chatMessage_saveBlobLink = document.getElementById(\"textarea_chatMessage-save_bloblink\");\r\n  \r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemRec_SW =  document.getElementById('my-rec_sw');\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemTextArea_RecSound = document.getElementById('textarea_ResultRecSound');\r\n\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemVideo = document.getElementById('my-video');\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemVideo_SW=  document.getElementById('my-video_sw');\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemRange_VideoFrameRate = document.getElementById('my-video_rate');\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemRange_VideoFrameRateCurVal = document.getElementById('my-video_rate_currentValue');\r\n  \r\n  \r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemVolume_SW =  document.getElementById('my-volume_sw');\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemRange_VolumeLevel = document.getElementById('my-volumeLevel');\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemRange_VolumeLevelCurVal = document.getElementById('my-volumeLevel_currentValue');\r\n\r\n\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_myPeerId = document.getElementById(\"my-peer-id\");\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_myPeerId_copySW = document.getElementById(\"my-peer-id-copy_sw\");\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemDiv_streams = document.getElementById(\"streams\");\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemAddNewPeer_SW = document.getElementById(\"my-addNewPeer\");\r\n  _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_AddNewPeerID = document.getElementById(\"peer-id-input\");\r\n\r\n  \r\n  \r\n  \r\n   //音声認識\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemCheckBox_ResultRecognition){\r\n      (0,_udonChatHTML_VoiceRecognition_js__WEBPACK_IMPORTED_MODULE_2__.htmlElemInit_Voicerecognition)();\r\n   }\r\n  \r\n  \r\n   //テキストチャット\r\n   //elemText_chatMessage_SW = document.getElementById(\"textarea_chatMessage-input_sw\");\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_chatMessage_SW){\r\n      (0,_udonTextMessageChat_js__WEBPACK_IMPORTED_MODULE_6__.htmlElemInit_TextMessageChat)();\r\n   }\r\n   //  elemText_chatMessage_saveSW = document.getElementById(\"textarea_chatMessage-save_sw\");\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_chatMessage_saveSW){\r\n     (0,_udonChatMessageLog_js__WEBPACK_IMPORTED_MODULE_7__.htmlElemInit_MessageLog)();\r\n   }\r\n\r\n\r\n\r\n   // 音声録音\r\n   //elemRec_SW =  document.getElementById('my-rec_sw');\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemRec_SW){\r\n     (0,_udonRecordVoice_js__WEBPACK_IMPORTED_MODULE_5__.htmlElemInit_RecordVoice)();\r\n   }\r\n   \r\n   \r\n\r\n\r\n   // 音声/映像ストリーム関係\r\n   (0,_udonMediaStream_js__WEBPACK_IMPORTED_MODULE_4__.htmlElemInit_MediaStream)();\r\n   \r\n   \r\n\r\n\r\n\r\n   //  elemText_myPeerId_copySW = document.getElementById(\"my-peer-id-copy_sw\");\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_myPeerId_copySW){\r\n     _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_myPeerId_copySW.addEventListener('click', function(e){\r\n         e.target.setAttribute(\"disabled\", true);\r\n         \r\n         if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_myPeerId){\r\n             _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_myPeerId.readOnly=false;\r\n             _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_myPeerId.removeAttribute(\"readonly\");\r\n             \r\n             _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_myPeerId.select();\r\n             document.execCommand(\"copy\"); \r\n             getSelection().empty();\r\n             \r\n             _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_myPeerId.setAttribute(\"readonly\",\"\");\r\n             _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_myPeerId.readOnly=true;\r\n         }\r\n         \r\n         e.target.removeAttribute(\"disabled\");\r\n     });\r\n   }\r\n\r\n\r\n\r\n\r\n\r\n   //   通信先接続相手を追加\r\n   // elemAddNewPeer_SW = document.getElementById(\"my-addNewPeer\");\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemAddNewPeer_SW){\r\n       (0,_udonWebRTC_js__WEBPACK_IMPORTED_MODULE_3__.htmlElemInit_WebRTC)();\r\n   }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   \r\n   // ======================================================\r\n   \r\n   let strValue=(0,_myfunc_cookie_js__WEBPACK_IMPORTED_MODULE_8__.getCookie)(\"recentPeerId\");\r\n   if(strValue){if(strValue!=\"\"){\r\n      if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_AddNewPeerID){\r\n          _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_AddNewPeerID.value=strValue;\r\n      }\r\n   }}\r\n   \r\n   \r\n   \r\n   // =============================\r\n   // WebRTC 開始\r\n   // =============================\r\n   (0,_udonWebRTC_js__WEBPACK_IMPORTED_MODULE_3__.startMultiparty)();\r\n   \r\n}\r\n\r\n\r\n\r\n// =========================================\r\n\r\n\r\nwindow.addEventListener(\"beforeunload\", function(event) {\r\n\r\n\r\n    //接続先PeerIDをクッキーに保存しておく\r\n    const cookieName = \"recentPeerId\";\r\n    let strValue=\"\";\r\n    if(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_0__.G.connectedDatas){\r\n        for (let peerid in _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_0__.G.connectedDatas) {\r\n            if(peerid!=_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_0__.G.SkyWayPeer.id){\r\n                strValue=peerid;\r\n            }\r\n        }\r\n    }\r\n    \r\n    if(strValue!=\"\"){\r\n        (0,_myfunc_cookie_js__WEBPACK_IMPORTED_MODULE_8__.setCookie)(cookieName,strValue,(0.5)); //保持時間を日で指定\r\n    }\r\n    \r\n\r\n\r\n\r\n\r\n    if(true){\r\n        //    残念ながら、unloadイベントでは非同期処理は実行できない（実行されるまえに終了してしまう）\r\n        //    このため、ページ遷移警告の後に切断処理等をおこなうことはできない。\r\n        event.preventDefault(); //ページ遷移警告の表示\r\n        event.returnValue = ''; //ページ遷移警告の表示\r\n    }else{}\r\n    \r\n});\r\nconst terminationEvent = 'onpagehide' in self ? 'pagehide' : 'unload';\r\nwindow.addEventListener(terminationEvent, function(event) {\r\n\r\n    //--- 切断 --- \r\n    //    残念ながら、unloadイベントでは非同期処理は実行できない（実行されるまえに終了してしまう）\r\n    //    このため、ページ遷移警告の後に切断処理等をおこなうことはできない。\r\n    //sendNewChatMessage(\"(退出)\");\r\n    //quitAllConnection();\r\n    \r\n    \r\n    let intCnt=Object.keys(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_0__.G.connectedDatas).length;\r\n    if (intCnt>0){\r\n        (0,_udonTextMessageChat_js__WEBPACK_IMPORTED_MODULE_6__.sendNewChatMessage)(\"(退出)\");\r\n        (0,_udonWebRTC_js__WEBPACK_IMPORTED_MODULE_3__.quitAllConnection)();\r\n        \r\n        // 終了するまでの時間稼ぎをする(ただし最大30秒まで)\r\n        let tgttime = new Date();\r\n        tgttime.setSeconds( tgttime.getSeconds() + 30);\r\n        \r\n        while (intCnt>0) {\r\n            if(_udonWebRTC_js__WEBPACK_IMPORTED_MODULE_3__.connectedDatasModifyFlg!=0) { intCnt=1; }\r\n            else{intCnt = Object.keys(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_0__.G.connectedDatas).length;\r\n                if(intCnt==0){\r\n                    intCnt=1;\r\n                    let sc = new Date();\r\n                    sc.setSeconds( sc.getSeconds() + 2);\r\n                    if(sc<tgttime)tgttime=sc;\r\n                }\r\n            }\r\n\r\n            let nowtime = new Date();\r\n            if(nowtime>tgttime) intCnt=0;\r\n        }\r\n        \r\n    }\r\n    \r\n    \r\n});\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBdUIsK0RBQWU7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw0REFBUyw2QkFBNkI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxJQUFJO0FBQ1g7QUFDQTtBQUNBLGdDQUFnQztBQUNoQyxnQ0FBZ0M7QUFDaEMsS0FBSyxJQUFJLEVBSUo7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixnRUFBZ0I7QUFDM0M7QUFDQSxRQUFRLDJFQUFrQjtBQUMxQixRQUFRLGlFQUFpQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1FQUF1QixPQUFPO0FBQzdDLGlCQUFpQixxQkFBcUIsZ0VBQWdCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yMDIxMDExMV93ZWJjaGF0Ly4vc3JjL3Vkb25DaGF0SFRNTC5qcz9iNTZiIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuaW1wb3J0IHtHfSBmcm9tIFwiLi9teUdsb2JhbFBhcmFtcy5qc1wiO1xyXG5pbXBvcnQgeyBHaHRtbCAgLCBjX2VsZW1FdmVudF9pbnB1dCB9ICBmcm9tIFwiLi91ZG9uQ2hhdEhUTUxfZWxlbWVudHMuanNcIjtcclxuXHJcbmltcG9ydCB7IGh0bWxFbGVtSW5pdF9Wb2ljZXJlY29nbml0aW9uIH0gZnJvbSBcIi4vdWRvbkNoYXRIVE1MX1ZvaWNlUmVjb2duaXRpb24uanNcIjtcclxuaW1wb3J0IHsgc3RhcnRNdWx0aXBhcnR5ICxodG1sRWxlbUluaXRfV2ViUlRDICxxdWl0QWxsQ29ubmVjdGlvbiAsY29ubmVjdGVkRGF0YXNNb2RpZnlGbGd9IGZyb20gXCIuL3Vkb25XZWJSVEMuanNcIjtcclxuaW1wb3J0IHsgaHRtbEVsZW1Jbml0X01lZGlhU3RyZWFtICB9IGZyb20gXCIuL3Vkb25NZWRpYVN0cmVhbS5qc1wiO1xyXG5pbXBvcnQgeyBodG1sRWxlbUluaXRfUmVjb3JkVm9pY2UgICwgbWVkaWFSZWNvcmRlciAgfSBmcm9tIFwiLi91ZG9uUmVjb3JkVm9pY2UuanNcIjtcclxuaW1wb3J0IHsgaHRtbEVsZW1Jbml0X1RleHRNZXNzYWdlQ2hhdCAsIHNlbmROZXdDaGF0TWVzc2FnZSB9IGZyb20gXCIuL3Vkb25UZXh0TWVzc2FnZUNoYXQuanNcIjtcclxuaW1wb3J0IHsgaHRtbEVsZW1Jbml0X01lc3NhZ2VMb2cgfSBmcm9tIFwiLi91ZG9uQ2hhdE1lc3NhZ2VMb2cuanNcIjtcclxuaW1wb3J0IHsgZ2V0Q29va2llICwgc2V0Q29va2llIH0gZnJvbSBcIi4vbXlmdW5jX2Nvb2tpZS5qc1wiO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLy8gRE9N6KaB57Sg44Gu5qeL56+J44GM57WC44KP44Gj44Gf5aC05ZCI44Gr5ZG844Gw44KM44KL44Kk44OZ44Oz44OIXHJcbi8vIC0gRE9N6KaB57Sg44Gr57WQ44Gz44Gk44GP6Kit5a6a44Gv44GT44Gu5Lit44Gn6KGM44Gq44GGXHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7ICAvLyA8PDwgJChmdW5jdGlvbigpIHtcclxuICAgIG15T25sb2FkKCk7XHJcbn0pXHJcbmZ1bmN0aW9uIG15T25sb2FkKCl7XHJcbiAgR2h0bWwuZWxlbVN0cmVhbV9TVyA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXktc3RyZWFtX3N3Jyk7XHJcbiAgR2h0bWwuZWxlbVN0cmVhbV9TV19Nc2cgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215LXN0cmVhbV9zd19tZXNzYWdlJyk7XHJcbiAgR2h0bWwuZWxlbVZpZGVvX1NUVFMgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215LXZpZGVvX3N0YXR1cycpO1xyXG4gIEdodG1sLmVsZW1NaWNfU1cgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215LW1pY19zdycpO1xyXG4gIEdodG1sLmVsZW1NaWNfU1RUUyA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXktbWljX3N0YXR1cycpO1xyXG4gIEdodG1sLmVsZW1SYW5nZV9taWNyb3Bob25lTGV2ZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXktbWljcm9waG9uZUxldmVsJyk7XHJcbiAgR2h0bWwuZWxlbVJhbmdlX21pY3JvcGhvbmVMZXZlbEN1clZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteS1taWNyb3Bob25lTGV2ZWxfY3VycmVudFZhbHVlJyk7XHJcblxyXG5cclxuICBHaHRtbC5lbGVtQ2hlY2tCb3hfbWljUHJvcGVydGllcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKFwibXktY2hlY2tib3hfbWljcm9waG9uZVByb3BzXCIpO1xyXG4gIEdodG1sLmVsZW1SYWRpb19taWNFY2hvQ2FuY2VsPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShcIm15LXJhZGlvX21pY3JvcGhvbmVFY2hvQ2FuY2VsXCIpO1xyXG4gIEdodG1sLmVsZW1UZXh0QXJlYV9SZXN1bHRSZWNvZ25pdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGV4dGFyZWFfUmVzdWx0UmVjb2duaXRpb25cIik7XHJcbiAgR2h0bWwuZWxlbVRleHRBcmVhX1Jlc3VsdFJlY29nbml0aW9uUD0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZXh0YXJlYV9SZXN1bHRSZWNvZ25pdGlvbl9wcmVcIik7XHJcbiAgR2h0bWwuZWxlbUNoZWNrQm94X1Jlc3VsdFJlY29nbml0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteS1jaGVja2JveF9yZWNvcmRSZWNvZ25pdGlvblwiKTtcclxuICBHaHRtbC5lbGVtQ2hlY2tCb3hfUmVzdWx0UmVjb2duaXRpb25fY2hhdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXktY2hlY2tib3hfcmVjb3JkUmVjb2duaXRpb25fZGlyZWN0Q2hhdFwiKTtcclxuICBHaHRtbC5lbGVtVGV4dF9SZXN1bHRSZWNvZ25pdGlvblN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGV4dF9SZXN1bHRSZWNvZ25pdGlvbl9zdGF0dXNcIik7XHJcbiAgR2h0bWwuZWxlbVRleHRfY2hhdE1lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRleHRhcmVhX2NoYXRNZXNzYWdlLWlucHV0XCIpO1xyXG4gIEdodG1sLmVsZW1UZXh0X2NoYXRNZXNzYWdlX1NXID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZXh0YXJlYV9jaGF0TWVzc2FnZS1pbnB1dF9zd1wiKTtcclxuICBHaHRtbC5lbGVtVGV4dF9jaGF0TWVzc2FnZV9sb2cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRleHRhcmVhX2NoYXRNZXNzYWdlLWxvZ1wiKTtcclxuICBHaHRtbC5lbGVtVGV4dF9jaGF0TWVzc2FnZV9zYXZlU1cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRleHRhcmVhX2NoYXRNZXNzYWdlLWxvZ3NhdmVfc3dcIik7XHJcbiAgR2h0bWwuZWxlbVRleHRfY2hhdE1lc3NhZ2Vfc2F2ZUJsb2JMaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZXh0YXJlYV9jaGF0TWVzc2FnZS1zYXZlX2Jsb2JsaW5rXCIpO1xyXG4gIFxyXG4gIEdodG1sLmVsZW1SZWNfU1cgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215LXJlY19zdycpO1xyXG4gIEdodG1sLmVsZW1UZXh0QXJlYV9SZWNTb3VuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXh0YXJlYV9SZXN1bHRSZWNTb3VuZCcpO1xyXG5cclxuICBHaHRtbC5lbGVtVmlkZW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXktdmlkZW8nKTtcclxuICBHaHRtbC5lbGVtVmlkZW9fU1c9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXktdmlkZW9fc3cnKTtcclxuICBHaHRtbC5lbGVtUmFuZ2VfVmlkZW9GcmFtZVJhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXktdmlkZW9fcmF0ZScpO1xyXG4gIEdodG1sLmVsZW1SYW5nZV9WaWRlb0ZyYW1lUmF0ZUN1clZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteS12aWRlb19yYXRlX2N1cnJlbnRWYWx1ZScpO1xyXG4gIFxyXG4gIFxyXG4gIEdodG1sLmVsZW1Wb2x1bWVfU1cgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215LXZvbHVtZV9zdycpO1xyXG4gIEdodG1sLmVsZW1SYW5nZV9Wb2x1bWVMZXZlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteS12b2x1bWVMZXZlbCcpO1xyXG4gIEdodG1sLmVsZW1SYW5nZV9Wb2x1bWVMZXZlbEN1clZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteS12b2x1bWVMZXZlbF9jdXJyZW50VmFsdWUnKTtcclxuXHJcblxyXG4gIEdodG1sLmVsZW1UZXh0X215UGVlcklkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteS1wZWVyLWlkXCIpO1xyXG4gIEdodG1sLmVsZW1UZXh0X215UGVlcklkX2NvcHlTVyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXktcGVlci1pZC1jb3B5X3N3XCIpO1xyXG4gIEdodG1sLmVsZW1EaXZfc3RyZWFtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RyZWFtc1wiKTtcclxuICBHaHRtbC5lbGVtQWRkTmV3UGVlcl9TVyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXktYWRkTmV3UGVlclwiKTtcclxuICBHaHRtbC5lbGVtVGV4dF9BZGROZXdQZWVySUQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBlZXItaWQtaW5wdXRcIik7XHJcblxyXG4gIFxyXG4gIFxyXG4gIFxyXG4gICAvL+mfs+WjsOiqjeitmFxyXG4gICBpZihHaHRtbC5lbGVtQ2hlY2tCb3hfUmVzdWx0UmVjb2duaXRpb24pe1xyXG4gICAgICBodG1sRWxlbUluaXRfVm9pY2VyZWNvZ25pdGlvbigpO1xyXG4gICB9XHJcbiAgXHJcbiAgXHJcbiAgIC8v44OG44Kt44K544OI44OB44Oj44OD44OIXHJcbiAgIC8vZWxlbVRleHRfY2hhdE1lc3NhZ2VfU1cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRleHRhcmVhX2NoYXRNZXNzYWdlLWlucHV0X3N3XCIpO1xyXG4gICBpZihHaHRtbC5lbGVtVGV4dF9jaGF0TWVzc2FnZV9TVyl7XHJcbiAgICAgIGh0bWxFbGVtSW5pdF9UZXh0TWVzc2FnZUNoYXQoKTtcclxuICAgfVxyXG4gICAvLyAgZWxlbVRleHRfY2hhdE1lc3NhZ2Vfc2F2ZVNXID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZXh0YXJlYV9jaGF0TWVzc2FnZS1zYXZlX3N3XCIpO1xyXG4gICBpZihHaHRtbC5lbGVtVGV4dF9jaGF0TWVzc2FnZV9zYXZlU1cpe1xyXG4gICAgIGh0bWxFbGVtSW5pdF9NZXNzYWdlTG9nKCk7XHJcbiAgIH1cclxuXHJcblxyXG5cclxuICAgLy8g6Z+z5aOw6Yyy6Z+zXHJcbiAgIC8vZWxlbVJlY19TVyA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXktcmVjX3N3Jyk7XHJcbiAgIGlmKEdodG1sLmVsZW1SZWNfU1cpe1xyXG4gICAgIGh0bWxFbGVtSW5pdF9SZWNvcmRWb2ljZSgpO1xyXG4gICB9XHJcbiAgIFxyXG4gICBcclxuXHJcblxyXG4gICAvLyDpn7Plo7Av5pig5YOP44K544OI44Oq44O844Og6Zai5L+CXHJcbiAgIGh0bWxFbGVtSW5pdF9NZWRpYVN0cmVhbSgpO1xyXG4gICBcclxuICAgXHJcblxyXG5cclxuXHJcbiAgIC8vICBlbGVtVGV4dF9teVBlZXJJZF9jb3B5U1cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm15LXBlZXItaWQtY29weV9zd1wiKTtcclxuICAgaWYoR2h0bWwuZWxlbVRleHRfbXlQZWVySWRfY29weVNXKXtcclxuICAgICBHaHRtbC5lbGVtVGV4dF9teVBlZXJJZF9jb3B5U1cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgZS50YXJnZXQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICBpZihHaHRtbC5lbGVtVGV4dF9teVBlZXJJZCl7XHJcbiAgICAgICAgICAgICBHaHRtbC5lbGVtVGV4dF9teVBlZXJJZC5yZWFkT25seT1mYWxzZTtcclxuICAgICAgICAgICAgIEdodG1sLmVsZW1UZXh0X215UGVlcklkLnJlbW92ZUF0dHJpYnV0ZShcInJlYWRvbmx5XCIpO1xyXG4gICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICBHaHRtbC5lbGVtVGV4dF9teVBlZXJJZC5zZWxlY3QoKTtcclxuICAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKFwiY29weVwiKTsgXHJcbiAgICAgICAgICAgICBnZXRTZWxlY3Rpb24oKS5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICBHaHRtbC5lbGVtVGV4dF9teVBlZXJJZC5zZXRBdHRyaWJ1dGUoXCJyZWFkb25seVwiLFwiXCIpO1xyXG4gICAgICAgICAgICAgR2h0bWwuZWxlbVRleHRfbXlQZWVySWQucmVhZE9ubHk9dHJ1ZTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBcclxuICAgICAgICAgZS50YXJnZXQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgfSk7XHJcbiAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAvLyAgIOmAmuS/oeWFiOaOpee2muebuOaJi+OCkui/veWKoFxyXG4gICAvLyBlbGVtQWRkTmV3UGVlcl9TVyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXktYWRkTmV3UGVlclwiKTtcclxuICAgaWYoR2h0bWwuZWxlbUFkZE5ld1BlZXJfU1cpe1xyXG4gICAgICAgaHRtbEVsZW1Jbml0X1dlYlJUQygpO1xyXG4gICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgXHJcbiAgIFxyXG4gICBcclxuICAgXHJcbiAgIFxyXG4gICBcclxuICAgXHJcbiAgIFxyXG4gICBcclxuICAgXHJcbiAgIFxyXG4gICBcclxuICAgXHJcbiAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICBcclxuICAgbGV0IHN0clZhbHVlPWdldENvb2tpZShcInJlY2VudFBlZXJJZFwiKTtcclxuICAgaWYoc3RyVmFsdWUpe2lmKHN0clZhbHVlIT1cIlwiKXtcclxuICAgICAgaWYoR2h0bWwuZWxlbVRleHRfQWRkTmV3UGVlcklEKXtcclxuICAgICAgICAgIEdodG1sLmVsZW1UZXh0X0FkZE5ld1BlZXJJRC52YWx1ZT1zdHJWYWx1ZTtcclxuICAgICAgfVxyXG4gICB9fVxyXG4gICBcclxuICAgXHJcbiAgIFxyXG4gICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAvLyBXZWJSVEMg6ZaL5aeLXHJcbiAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIHN0YXJ0TXVsdGlwYXJ0eSgpO1xyXG4gICBcclxufVxyXG5cclxuXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG5cclxuICAgIC8v5o6l57aa5YWIUGVlcklE44KS44Kv44OD44Kt44O844Gr5L+d5a2Y44GX44Gm44GK44GPXHJcbiAgICBjb25zdCBjb29raWVOYW1lID0gXCJyZWNlbnRQZWVySWRcIjtcclxuICAgIGxldCBzdHJWYWx1ZT1cIlwiO1xyXG4gICAgaWYoRy5jb25uZWN0ZWREYXRhcyl7XHJcbiAgICAgICAgZm9yIChsZXQgcGVlcmlkIGluIEcuY29ubmVjdGVkRGF0YXMpIHtcclxuICAgICAgICAgICAgaWYocGVlcmlkIT1HLlNreVdheVBlZXIuaWQpe1xyXG4gICAgICAgICAgICAgICAgc3RyVmFsdWU9cGVlcmlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZihzdHJWYWx1ZSE9XCJcIil7XHJcbiAgICAgICAgc2V0Q29va2llKGNvb2tpZU5hbWUsc3RyVmFsdWUsKDAuNSkpOyAvL+S/neaMgeaZgumWk+OCkuaXpeOBp+aMh+WumlxyXG4gICAgfVxyXG4gICAgXHJcblxyXG5cclxuXHJcblxyXG4gICAgaWYoMT09MSl7XHJcbiAgICAgICAgLy8gICAg5q6L5b+144Gq44GM44KJ44CBdW5sb2Fk44Kk44OZ44Oz44OI44Gn44Gv6Z2e5ZCM5pyf5Yem55CG44Gv5a6f6KGM44Gn44GN44Gq44GE77yI5a6f6KGM44GV44KM44KL44G+44GI44Gr57WC5LqG44GX44Gm44GX44G+44GG77yJXHJcbiAgICAgICAgLy8gICAg44GT44Gu44Gf44KB44CB44Oa44O844K46YG356e76K2m5ZGK44Gu5b6M44Gr5YiH5pat5Yem55CG562J44KS44GK44GT44Gq44GG44GT44Go44Gv44Gn44GN44Gq44GE44CCXHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy/jg5rjg7zjgrjpgbfnp7vorablkYrjga7ooajnpLpcclxuICAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9ICcnOyAvL+ODmuODvOOCuOmBt+enu+itpuWRiuOBruihqOekulxyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgLy8tLS0g5YiH5patIC0tLSBcclxuICAgICAgICBzZW5kTmV3Q2hhdE1lc3NhZ2UoXCIo6YCA5Ye6KVwiKTtcclxuICAgICAgICBxdWl0QWxsQ29ubmVjdGlvbigpO1xyXG4gICAgfVxyXG4gICAgXHJcbn0pO1xyXG5jb25zdCB0ZXJtaW5hdGlvbkV2ZW50ID0gJ29ucGFnZWhpZGUnIGluIHNlbGYgPyAncGFnZWhpZGUnIDogJ3VubG9hZCc7XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKHRlcm1pbmF0aW9uRXZlbnQsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG4gICAgLy8tLS0g5YiH5patIC0tLSBcclxuICAgIC8vICAgIOaui+W/teOBquOBjOOCieOAgXVubG9hZOOCpOODmeODs+ODiOOBp+OBr+mdnuWQjOacn+WHpueQhuOBr+Wun+ihjOOBp+OBjeOBquOBhO+8iOWun+ihjOOBleOCjOOCi+OBvuOBiOOBq+e1guS6huOBl+OBpuOBl+OBvuOBhu+8iVxyXG4gICAgLy8gICAg44GT44Gu44Gf44KB44CB44Oa44O844K46YG356e76K2m5ZGK44Gu5b6M44Gr5YiH5pat5Yem55CG562J44KS44GK44GT44Gq44GG44GT44Go44Gv44Gn44GN44Gq44GE44CCXHJcbiAgICAvL3NlbmROZXdDaGF0TWVzc2FnZShcIijpgIDlh7opXCIpO1xyXG4gICAgLy9xdWl0QWxsQ29ubmVjdGlvbigpO1xyXG4gICAgXHJcbiAgICBcclxuICAgIGxldCBpbnRDbnQ9T2JqZWN0LmtleXMoRy5jb25uZWN0ZWREYXRhcykubGVuZ3RoO1xyXG4gICAgaWYgKGludENudD4wKXtcclxuICAgICAgICBzZW5kTmV3Q2hhdE1lc3NhZ2UoXCIo6YCA5Ye6KVwiKTtcclxuICAgICAgICBxdWl0QWxsQ29ubmVjdGlvbigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOe1guS6huOBmeOCi+OBvuOBp+OBruaZgumWk+eovOOBjuOCkuOBmeOCiyjjgZ/jgaDjgZfmnIDlpKczMOenkuOBvuOBpylcclxuICAgICAgICBsZXQgdGd0dGltZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgdGd0dGltZS5zZXRTZWNvbmRzKCB0Z3R0aW1lLmdldFNlY29uZHMoKSArIDMwKTtcclxuICAgICAgICBcclxuICAgICAgICB3aGlsZSAoaW50Q250PjApIHtcclxuICAgICAgICAgICAgaWYoY29ubmVjdGVkRGF0YXNNb2RpZnlGbGchPTApIHsgaW50Q250PTE7IH1cclxuICAgICAgICAgICAgZWxzZXtpbnRDbnQgPSBPYmplY3Qua2V5cyhHLmNvbm5lY3RlZERhdGFzKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBpZihpbnRDbnQ9PTApe1xyXG4gICAgICAgICAgICAgICAgICAgIGludENudD0xO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzYyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Muc2V0U2Vjb25kcyggc2MuZ2V0U2Vjb25kcygpICsgMik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2M8dGd0dGltZSl0Z3R0aW1lPXNjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgbm93dGltZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGlmKG5vd3RpbWU+dGd0dGltZSkgaW50Q250PTA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBcclxufSk7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/udonChatHTML.js\n");

/***/ }),

/***/ "./src/udonChatHTML_VideoStreamElement.js":
/*!************************************************!*\
  !*** ./src/udonChatHTML_VideoStreamElement.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"audioContextCtrls\": () => (/* binding */ audioContextCtrls),\n/* harmony export */   \"domAppendOrRemoveforPeer\": () => (/* binding */ domAppendOrRemoveforPeer)\n/* harmony export */ });\n/* harmony import */ var _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./udonChatHTML_elements.js */ \"./src/udonChatHTML_elements.js\");\n/* harmony import */ var _udonWebRTC_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./udonWebRTC.js */ \"./src/udonWebRTC.js\");\n\r\n  //  循環参照に注意！\r\n\r\n\r\n\r\nlet audioContextCtrls={};  // ボリュームゲイン等のコントロール用\r\n\r\n\r\nfunction domAppendOrRemoveforPeer(mode,strTgtPeerId){\r\n  // Dom の <div id=\"streams\">(=elemDiv_streams変数)内にPeer用のエレメントを追廃する\r\n  //let strTgtPeerId = call.remoteId;\r\n  let strvl;\r\n  let elemvl;\r\n\r\n  // 全削除\r\n  let tgtElement = document.getElementById('div_peerid-'+strTgtPeerId);\r\n  if(tgtElement){ \r\n      while (tgtElement.firstChild) tgtElement.removeChild(tgtElement.firstChild);\r\n      tgtElement.remove(); \r\n  }\r\n\r\n  //新規作成\r\n  if(mode){if(strTgtPeerId!=\"\"){\r\n    //コンテナとなるDiv要素\r\n    let newelem = document.createElement(\"div\");\r\n    newelem.id=\"div_peerid-\"+strTgtPeerId;\r\n    newelem.style=\"display:inline-block\"; // 縦に並べるならblock,横ならinline-block\r\n    _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemDiv_streams.appendChild(newelem);\r\n    \r\n    let tgtElement = document.getElementById('div_peerid-'+strTgtPeerId);\r\n    \r\n    //内容\r\n    \r\n    // video   （サイズ等は div.videoframe スタイルシートで定義）\r\n    let newelem2 = document.createElement(\"video\");\r\n    newelem2.id=\"peervideo-\"+ strTgtPeerId;\r\n    newelem2.autoplay=true;\r\n    newelem2.setAttribute(\"autoplay\",newelem2.autoplay);\r\n    newelem2.controls=true;\r\n    newelem2.setAttribute(\"controls\",newelem2.controls);\r\n    newelem2.volume=0.1;\r\n    newelem2.setAttribute(\"volume\",newelem2.volume);\r\n    newelem2.muted=true;\r\n    newelem2.setAttribute(\"muted\",newelem2.muted);\r\n    \r\n    newelem = document.createElement(\"div\");\r\n    newelem.setAttribute(\"class\",\"videoframe\");\r\n    newelem.appendChild(newelem2);\r\n    \r\n    tgtElement.appendChild(newelem);\r\n    \r\n    \r\n    // 録音用のボリュームを同期させる(この直前に追加したElementのvolumneに連動させる)\r\n    if(!(strTgtPeerId in audioContextCtrls)){ audioContextCtrls[strTgtPeerId]={}; }\r\n    if(!(audioContextCtrls[strTgtPeerId].gainNode)){    // 録音用のGainノードを生成する\r\n        audioContextCtrls[strTgtPeerId].gainNode=_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.c_audioContext.createGain();\r\n    }\r\n    newelem2.addEventListener('volumechange', e => {\r\n        if(strTgtPeerId in audioContextCtrls){\r\n            let ctrls = audioContextCtrls[strTgtPeerId].gainNode;\r\n            if(ctrls) {\r\n                if(e.srcElement){if(e.srcElement.volume){\r\n                    ctrls.gain.value = e.srcElement.volume; //gain\r\n                }}\r\n            }\r\n        }\r\n    });\r\n    \r\n    \r\n    \r\n\r\n    \r\n    newelem = document.createElement(\"span\");\r\n    newelem.id=\"peerid-\"+ strTgtPeerId;\r\n    tgtElement.appendChild(newelem);\r\n    // 相手のIDを表示する\r\n    elemvl = document.getElementById(\"peerid-\" + strTgtPeerId);\r\n    if(elemvl){\r\n        //$(\"#peerid-\" + strTgtPeerId).text(strTgtPeerId);\r\n        elemvl.innerHTML = strTgtPeerId;\r\n    }\r\n    \r\n\r\n    //削除用のボタンを追加する\r\n  if(true){\r\n    newelem = document.createElement(\"button\");\r\n    newelem.type=\"button\";\r\n    newelem.onclick=function(){\r\n       (0,_udonWebRTC_js__WEBPACK_IMPORTED_MODULE_1__.deletePeerFromCallList)(strTgtPeerId);\r\n       (0,_udonWebRTC_js__WEBPACK_IMPORTED_MODULE_1__.deletePeerFromDataList)(strTgtPeerId);\r\n    };\r\n    newelem.innerHTML=\"x\"; //削除\r\n    tgtElement.appendChild(newelem);\r\n  }\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    newelem = document.createElement(\"br\");\r\n    tgtElement.appendChild(newelem);\r\n    \r\n  }}\r\n  \r\n  \r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdWRvbkNoYXRIVE1MX1ZpZGVvU3RyZWFtRWxlbWVudC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXFFO0FBQ2EsRUFBRTtBQUNwRjtBQUNpQztBQUNqQztBQUNPLDJCQUEyQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUMsSUFBSSx3RkFBaUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUMsd0RBQXdEO0FBQ3hELGlEQUFpRCxnRkFBeUI7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyw0REFBNEQ7QUFDNUQ7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNBO0FBQ0E7QUFDQSxPQUFPLHNFQUFzQjtBQUM3QixPQUFPLHNFQUFzQjtBQUM3QjtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vMjAyMTAxMTFfd2ViY2hhdC8uL3NyYy91ZG9uQ2hhdEhUTUxfVmlkZW9TdHJlYW1FbGVtZW50LmpzPzNjZmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2h0bWwgLCBjX2F1ZGlvQ29udGV4dCB9ICBmcm9tIFwiLi91ZG9uQ2hhdEhUTUxfZWxlbWVudHMuanNcIjtcclxuaW1wb3J0IHsgZGVsZXRlUGVlckZyb21DYWxsTGlzdCAsIGRlbGV0ZVBlZXJGcm9tRGF0YUxpc3QgfSBmcm9tIFwiLi91ZG9uV2ViUlRDLmpzXCI7ICAvLyAg5b6q55Kw5Y+C54Wn44Gr5rOo5oSP77yBXHJcblxyXG5leHBvcnQge2RvbUFwcGVuZE9yUmVtb3ZlZm9yUGVlcn1cclxuXHJcbmV4cG9ydCBsZXQgYXVkaW9Db250ZXh0Q3RybHM9e307ICAvLyDjg5zjg6rjg6Xjg7zjg6DjgrLjgqTjg7PnrYnjga7jgrPjg7Pjg4jjg63jg7zjg6vnlKhcclxuXHJcblxyXG5mdW5jdGlvbiBkb21BcHBlbmRPclJlbW92ZWZvclBlZXIobW9kZSxzdHJUZ3RQZWVySWQpe1xyXG4gIC8vIERvbSDjga4gPGRpdiBpZD1cInN0cmVhbXNcIj4oPWVsZW1EaXZfc3RyZWFtc+WkieaVsCnlhoXjgatQZWVy55So44Gu44Ko44Os44Oh44Oz44OI44KS6L+95buD44GZ44KLXHJcbiAgLy9sZXQgc3RyVGd0UGVlcklkID0gY2FsbC5yZW1vdGVJZDtcclxuICBsZXQgc3Rydmw7XHJcbiAgbGV0IGVsZW12bDtcclxuXHJcbiAgLy8g5YWo5YmK6ZmkXHJcbiAgbGV0IHRndEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGl2X3BlZXJpZC0nK3N0clRndFBlZXJJZCk7XHJcbiAgaWYodGd0RWxlbWVudCl7IFxyXG4gICAgICB3aGlsZSAodGd0RWxlbWVudC5maXJzdENoaWxkKSB0Z3RFbGVtZW50LnJlbW92ZUNoaWxkKHRndEVsZW1lbnQuZmlyc3RDaGlsZCk7XHJcbiAgICAgIHRndEVsZW1lbnQucmVtb3ZlKCk7IFxyXG4gIH1cclxuXHJcbiAgLy/mlrDopo/kvZzmiJBcclxuICBpZihtb2RlKXtpZihzdHJUZ3RQZWVySWQhPVwiXCIpe1xyXG4gICAgLy/jgrPjg7Pjg4bjg4rjgajjgarjgotEaXbopoHntKBcclxuICAgIGxldCBuZXdlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIG5ld2VsZW0uaWQ9XCJkaXZfcGVlcmlkLVwiK3N0clRndFBlZXJJZDtcclxuICAgIG5ld2VsZW0uc3R5bGU9XCJkaXNwbGF5OmlubGluZS1ibG9ja1wiOyAvLyDnuKbjgavkuKbjgbnjgovjgarjgolibG9jayzmqKrjgarjgolpbmxpbmUtYmxvY2tcclxuICAgIEdodG1sLmVsZW1EaXZfc3RyZWFtcy5hcHBlbmRDaGlsZChuZXdlbGVtKTtcclxuICAgIFxyXG4gICAgbGV0IHRndEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGl2X3BlZXJpZC0nK3N0clRndFBlZXJJZCk7XHJcbiAgICBcclxuICAgIC8v5YaF5a65XHJcbiAgICBcclxuICAgIC8vIHZpZGVvICAg77yI44K144Kk44K6562J44GvIGRpdi52aWRlb2ZyYW1lIOOCueOCv+OCpOODq+OCt+ODvOODiOOBp+Wumue+qe+8iVxyXG4gICAgbGV0IG5ld2VsZW0yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpO1xyXG4gICAgbmV3ZWxlbTIuaWQ9XCJwZWVydmlkZW8tXCIrIHN0clRndFBlZXJJZDtcclxuICAgIG5ld2VsZW0yLmF1dG9wbGF5PXRydWU7XHJcbiAgICBuZXdlbGVtMi5zZXRBdHRyaWJ1dGUoXCJhdXRvcGxheVwiLG5ld2VsZW0yLmF1dG9wbGF5KTtcclxuICAgIG5ld2VsZW0yLmNvbnRyb2xzPXRydWU7XHJcbiAgICBuZXdlbGVtMi5zZXRBdHRyaWJ1dGUoXCJjb250cm9sc1wiLG5ld2VsZW0yLmNvbnRyb2xzKTtcclxuICAgIG5ld2VsZW0yLnZvbHVtZT0wLjE7XHJcbiAgICBuZXdlbGVtMi5zZXRBdHRyaWJ1dGUoXCJ2b2x1bWVcIixuZXdlbGVtMi52b2x1bWUpO1xyXG4gICAgbmV3ZWxlbTIubXV0ZWQ9dHJ1ZTtcclxuICAgIG5ld2VsZW0yLnNldEF0dHJpYnV0ZShcIm11dGVkXCIsbmV3ZWxlbTIubXV0ZWQpO1xyXG4gICAgXHJcbiAgICBuZXdlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIG5ld2VsZW0uc2V0QXR0cmlidXRlKFwiY2xhc3NcIixcInZpZGVvZnJhbWVcIik7XHJcbiAgICBuZXdlbGVtLmFwcGVuZENoaWxkKG5ld2VsZW0yKTtcclxuICAgIFxyXG4gICAgdGd0RWxlbWVudC5hcHBlbmRDaGlsZChuZXdlbGVtKTtcclxuICAgIFxyXG4gICAgXHJcbiAgICAvLyDpjLLpn7PnlKjjga7jg5zjg6rjg6Xjg7zjg6DjgpLlkIzmnJ/jgZXjgZvjgoso44GT44Gu55u05YmN44Gr6L+95Yqg44GX44GfRWxlbWVudOOBrnZvbHVtbmXjgavpgKPli5XjgZXjgZvjgospXHJcbiAgICBpZighKHN0clRndFBlZXJJZCBpbiBhdWRpb0NvbnRleHRDdHJscykpeyBhdWRpb0NvbnRleHRDdHJsc1tzdHJUZ3RQZWVySWRdPXt9OyB9XHJcbiAgICBpZighKGF1ZGlvQ29udGV4dEN0cmxzW3N0clRndFBlZXJJZF0uZ2Fpbk5vZGUpKXsgICAgLy8g6Yyy6Z+z55So44GuR2FpbuODjuODvOODieOCkueUn+aIkOOBmeOCi1xyXG4gICAgICAgIGF1ZGlvQ29udGV4dEN0cmxzW3N0clRndFBlZXJJZF0uZ2Fpbk5vZGU9Y19hdWRpb0NvbnRleHQuY3JlYXRlR2FpbigpO1xyXG4gICAgfVxyXG4gICAgbmV3ZWxlbTIuYWRkRXZlbnRMaXN0ZW5lcigndm9sdW1lY2hhbmdlJywgZSA9PiB7XHJcbiAgICAgICAgaWYoc3RyVGd0UGVlcklkIGluIGF1ZGlvQ29udGV4dEN0cmxzKXtcclxuICAgICAgICAgICAgbGV0IGN0cmxzID0gYXVkaW9Db250ZXh0Q3RybHNbc3RyVGd0UGVlcklkXS5nYWluTm9kZTtcclxuICAgICAgICAgICAgaWYoY3RybHMpIHtcclxuICAgICAgICAgICAgICAgIGlmKGUuc3JjRWxlbWVudCl7aWYoZS5zcmNFbGVtZW50LnZvbHVtZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY3RybHMuZ2Fpbi52YWx1ZSA9IGUuc3JjRWxlbWVudC52b2x1bWU7IC8vZ2FpblxyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG5cclxuICAgIFxyXG4gICAgbmV3ZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgbmV3ZWxlbS5pZD1cInBlZXJpZC1cIisgc3RyVGd0UGVlcklkO1xyXG4gICAgdGd0RWxlbWVudC5hcHBlbmRDaGlsZChuZXdlbGVtKTtcclxuICAgIC8vIOebuOaJi+OBrklE44KS6KGo56S644GZ44KLXHJcbiAgICBlbGVtdmwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBlZXJpZC1cIiArIHN0clRndFBlZXJJZCk7XHJcbiAgICBpZihlbGVtdmwpe1xyXG4gICAgICAgIC8vJChcIiNwZWVyaWQtXCIgKyBzdHJUZ3RQZWVySWQpLnRleHQoc3RyVGd0UGVlcklkKTtcclxuICAgICAgICBlbGVtdmwuaW5uZXJIVE1MID0gc3RyVGd0UGVlcklkO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgLy/liYrpmaTnlKjjga7jg5zjgr/jg7PjgpLov73liqDjgZnjgotcclxuICBpZigxPT0xKXtcclxuICAgIG5ld2VsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgbmV3ZWxlbS50eXBlPVwiYnV0dG9uXCI7XHJcbiAgICBuZXdlbGVtLm9uY2xpY2s9ZnVuY3Rpb24oKXtcclxuICAgICAgIGRlbGV0ZVBlZXJGcm9tQ2FsbExpc3Qoc3RyVGd0UGVlcklkKTtcclxuICAgICAgIGRlbGV0ZVBlZXJGcm9tRGF0YUxpc3Qoc3RyVGd0UGVlcklkKTtcclxuICAgIH07XHJcbiAgICBuZXdlbGVtLmlubmVySFRNTD1cInhcIjsgLy/liYrpmaRcclxuICAgIHRndEVsZW1lbnQuYXBwZW5kQ2hpbGQobmV3ZWxlbSk7XHJcbiAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIG5ld2VsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIik7XHJcbiAgICB0Z3RFbGVtZW50LmFwcGVuZENoaWxkKG5ld2VsZW0pO1xyXG4gICAgXHJcbiAgfX1cclxuICBcclxuICBcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/udonChatHTML_VideoStreamElement.js\n");

/***/ }),

/***/ "./src/udonChatHTML_VoiceRecognition.js":
/*!**********************************************!*\
  !*** ./src/udonChatHTML_VoiceRecognition.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"htmlElemInit_Voicerecognition\": () => (/* binding */ htmlElemInit_Voicerecognition)\n/* harmony export */ });\n/* harmony import */ var _udonTextMessageChat_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./udonTextMessageChat.js */ \"./src/udonTextMessageChat.js\");\n/* harmony import */ var _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./udonChatHTML_elements.js */ \"./src/udonChatHTML_elements.js\");\n\r\n\r\n\r\n \r\n\r\n\r\n\r\n\r\n\r\n\r\n//音声認識\r\nlet recognition = null;\r\n\r\nlet recognitionFlgs = {};\r\nrecognitionFlgs.recognitionRestartableFlg = true;\r\nrecognitionFlgs.flgEnableSpeechRecognition=false;\r\n\r\n\r\n\r\nlet window_SpeechRecognition;\r\n// var window_SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition || webkitSpeechRecognition || SpeechRecognition;\r\nif(window.webkitSpeechRecognition){window_SpeechRecognition = window.webkitSpeechRecognition}\r\nelse if(window.SpeechRecognition){window_SpeechRecognition = window.SpeechRecognition}\r\nelse if(typeof webkitSpeechRecognition!==\"undefined\"){window_SpeechRecognition = webkitSpeechRecognition}\r\nelse if(typeof SpeechRecognition!==\"undefined\"){window_SpeechRecognition = SpeechRecognition}\r\n\r\nif(window_SpeechRecognition){  // if('SpeechRecognition' in window){\r\n  if(\"function\"==typeof window_SpeechRecognition){\r\n     recognitionFlgs.flgEnableSpeechRecognition=true;\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// =========================\r\n\r\nfunction htmlElemInit_Voicerecognition(){\r\n  if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemCheckBox_ResultRecognition){\r\n    let flg=0\r\n    if(recognitionFlgs.flgEnableSpeechRecognition){\r\n      settingRecognition(); //音声認識の初期化\r\n      if(recognition){\r\n                _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemCheckBox_ResultRecognition.addEventListener('change', function(e){\r\n                    if(e.target.checked){\r\n                      recognition.start();\r\n                      _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemCheckBox_ResultRecognition_chat.disabled = false;\r\n                    }else{\r\n                      recognitionFlgs.recognitionRestartableFlg=false;\r\n                      recognition.stop();\r\n                      _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemCheckBox_ResultRecognition_chat.disabled = true;\r\n                    }\r\n                });\r\n                flg=1;\r\n      }\r\n    }\r\n    if(flg==0){ // 初期化失敗\r\n         _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemCheckBox_ResultRecognition.checked = false;\r\n         _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemCheckBox_ResultRecognition.disabled = true;\r\n         _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemCheckBox_ResultRecognition_chat.checked = false;\r\n         _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemCheckBox_ResultRecognition_chat.disabled = true;\r\n    }else{\r\n         //Ghtml.elemCheckBox_ResultRecognition.checked = true; // 20220724　初期値はHTML定義に依存させる\r\n         _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemCheckBox_ResultRecognition.disabled = false;\r\n         _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemCheckBox_ResultRecognition_chat.disabled = false;\r\n    }\r\n    if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemCheckBox_ResultRecognition.checked){\r\n        recognition.start();\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n// ============ 初期設定関数 ================\r\nconst c_testflg =0;\r\n\r\n\r\nfunction settingRecognition(){\r\n  if(!(recognitionFlgs.flgEnableSpeechRecognition)){\r\n      return false;\r\n  }else{ //音声認識の初期化\r\n    recognition = new window_SpeechRecognition();\r\n    if(recognition){\r\n        recognition.lang = 'ja-JP';\r\n        recognition.interimResults = true; // 暫定結果も返す\r\n        recognition.continuous = true;\r\n        \r\n        recognition.addEventListener('start', (event) => { // onstart:リスニング開始\r\n           recognitionFlgs.recognitionRestartableFlg = true; // 再起動可（音声解析中でない）\r\n           //Ghtml.elemCheckBox_ResultRecognition.checked = true;\r\n        })\r\n        recognition.addEventListener('end', (event) => {\r\n            addMessageOfRecognitionErr();\r\n            if (recognitionFlgs.recognitionRestartableFlg) {\r\n                recognitionFlgs.recognitionRestartableFlg = false; // 再起動不可（再起動中）\r\n                recognition.start();\r\n                //Ghtml.elemCheckBox_ResultRecognition.checked = false;\r\n                _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_ResultRecognitionStatus.innerHTML=\"\";\r\n                if(c_testflg){ console.log(\"Recognition end(restart).\"); }\r\n            }else{\r\n                if(c_testflg){ console.log(\"Recognition end.\"); }\r\n                let interimTranscript = '';\r\n                \r\n            }\r\n        })\r\n        recognition.addEventListener('result', (event) => {\r\n            let finalTranscript = ''; //確定結果\r\n            let interimTranscript = ''; // 暫定(灰色)の認識結果\r\n            for (let i = event.resultIndex; i < event.results.length; i++) {\r\n              let transcript = event.results[i][0].transcript;\r\n              if (event.results[i].isFinal) {\r\n                finalTranscript += transcript;\r\n                recognitionFlgs.recognitionRestartableFlg = true;  // 再起動可（音声解析中でない）\r\n                if(c_testflg){ console.log(\"Recognition final.\"+interimTranscript); }\r\n                interimTranscript=\"\";\r\n              } else {\r\n                interimTranscript = interimTranscript + transcript;\r\n                recognitionFlgs.recognitionRestartableFlg = false;  // 再起動不可（音声解析中）\r\n              }\r\n            }\r\n            if(!recognitionFlgs.recognitionRestartableFlg){\r\n                if(c_testflg){ console.log(\"Recognition continue.\"); }\r\n            }\r\n            addMessageOfRecognition(finalTranscript,interimTranscript);\r\n            \r\n        })\r\n        recognition.addEventListener('nomatch', (event) => {\r\n            addMessageOfRecognitionErr();\r\n            if(c_testflg){ console.log(\"Recognition NoMatch:\"+event.error); }\r\n        })\r\n        recognition.addEventListener('error', (event) => {\r\n            addMessageOfRecognitionErr();\r\n            if(c_testflg){ console.log(\"RecognitionError:\"+event.error); }\r\n        })\r\n        recognition.addEventListener('soundstart', (event) => {\r\n            _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_ResultRecognitionStatus.innerHTML=\"●\";\r\n        })\r\n        recognition.addEventListener('soundend', (event) => {\r\n            _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemText_ResultRecognitionStatus.innerHTML=\"○\";\r\n            recognitionFlgs.recognitionRestartableFlg = true;//stopメソッドにより発生するonendイベントで再起動させる\r\n            recognition.stop();\r\n        })\r\n        \r\n        \r\n        \r\n        \r\n        \r\n        // recognition.stop();\r\n        // recognition.start(); https://developer.mozilla.org/ja/docs/Web/API/SpeechRecognition\r\n    }\r\n  }\r\n}\r\nfunction addMessageOfRecognition(msg1,msg2){\r\n    let maxcount = 100; //表示最大文字数\r\n    \r\n    if(msg1!=\"\"){\r\n      if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemTextArea_ResultRecognition){\r\n          let msg = _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemTextArea_ResultRecognition.value;\r\n          //msg += (strTime+msg1);\r\n          msg += msg1;\r\n          if(msg.length>maxcount){ msg=msg.slice( 0-maxcount ); }\r\n          _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemTextArea_ResultRecognition.value = msg;\r\n      }\r\n      let flg=1;\r\n      //if(!Ghtml.elemMic_SW){flg=0;}\r\n      //if(Ghtml.elemMic_SW.value==0){flg=0;}\r\n      if(flg!=0){ \r\n          if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemCheckBox_ResultRecognition_chat.checked){\r\n              (0,_udonTextMessageChat_js__WEBPACK_IMPORTED_MODULE_0__.sendNewChatMessage)(msg1); //チャットに出力する\r\n          }\r\n      }\r\n    }\r\n    if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemTextArea_ResultRecognitionP){\r\n        _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemTextArea_ResultRecognitionP.innerHTML = msg2;\r\n    }\r\n}\r\nfunction addMessageOfRecognitionErr(){\r\n    let msg='';\r\n    if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemTextArea_ResultRecognitionP){\r\n        msg=_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemTextArea_ResultRecognitionP.innerHTML;\r\n        _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemTextArea_ResultRecognitionP.innerHTML=\"\";\r\n    }\r\n    addMessageOfRecognition(msg,\"\");\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdWRvbkNoYXRIVE1MX1ZvaWNlUmVjb2duaXRpb24uanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThEO0FBQ1Y7QUFDcEQ7QUFDQTtBQUN5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxrQ0FBa0M7QUFDbEMsc0RBQXNEO0FBQ3RELGdEQUFnRDtBQUNoRDtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLDJGQUFvQztBQUN6QztBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0EsZ0JBQWdCLDRHQUFxRDtBQUNyRTtBQUNBO0FBQ0Esc0JBQXNCLHlHQUFrRDtBQUN4RSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLHNCQUFzQix5R0FBa0Q7QUFDeEU7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCLFNBQVMsbUdBQTRDO0FBQ3JELFNBQVMsb0dBQTZDO0FBQ3RELFNBQVMsd0dBQWlEO0FBQzFELFNBQVMseUdBQWtEO0FBQzNELEtBQUs7QUFDTCxnRUFBZ0U7QUFDaEUsU0FBUyxvR0FBNkM7QUFDdEQsU0FBUyx5R0FBa0Q7QUFDM0Q7QUFDQSxPQUFPLG1HQUE0QztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLE1BQU07QUFDVDtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRCw2REFBNkQ7QUFDN0Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FO0FBQ25FO0FBQ0E7QUFDQSxnQkFBZ0IsdUdBQWdEO0FBQ2hFLCtCQUErQjtBQUMvQixhQUFhO0FBQ2IsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLHNDQUFzQztBQUN0Qyx3Q0FBd0M7QUFDeEMsNENBQTRDLDBCQUEwQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUU7QUFDbkUsK0JBQStCO0FBQy9CO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0Esb0VBQW9FO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQixTQUFTO0FBQ1Q7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQixTQUFTO0FBQ1Q7QUFDQSxZQUFZLHVHQUFnRDtBQUM1RCxTQUFTO0FBQ1Q7QUFDQSxZQUFZLHVHQUFnRDtBQUM1RCw2REFBNkQ7QUFDN0Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQSxTQUFTLDJGQUFvQztBQUM3QyxvQkFBb0IsaUdBQTBDO0FBQzlEO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkMsVUFBVSxpR0FBMEM7QUFDcEQ7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QixzQ0FBc0M7QUFDdEM7QUFDQSxhQUFhLHdHQUFpRDtBQUM5RCxjQUFjLDJFQUFrQixRQUFRO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLE9BQU8sNEZBQXFDO0FBQzVDLFFBQVEsc0dBQStDO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyw0RkFBcUM7QUFDNUMsWUFBWSxzR0FBK0M7QUFDM0QsUUFBUSxzR0FBK0M7QUFDdkQ7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yMDIxMDExMV93ZWJjaGF0Ly4vc3JjL3Vkb25DaGF0SFRNTF9Wb2ljZVJlY29nbml0aW9uLmpzPzM2ZWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2VuZE5ld0NoYXRNZXNzYWdlIH0gZnJvbSBcIi4vdWRvblRleHRNZXNzYWdlQ2hhdC5qc1wiO1xyXG5pbXBvcnQgeyBHaHRtbCB9ICBmcm9tIFwiLi91ZG9uQ2hhdEhUTUxfZWxlbWVudHMuanNcIjtcclxuXHJcbiBcclxuZXhwb3J0IHsgaHRtbEVsZW1Jbml0X1ZvaWNlcmVjb2duaXRpb24gfTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4vL+mfs+WjsOiqjeitmFxyXG5sZXQgcmVjb2duaXRpb24gPSBudWxsO1xyXG5cclxubGV0IHJlY29nbml0aW9uRmxncyA9IHt9O1xyXG5yZWNvZ25pdGlvbkZsZ3MucmVjb2duaXRpb25SZXN0YXJ0YWJsZUZsZyA9IHRydWU7XHJcbnJlY29nbml0aW9uRmxncy5mbGdFbmFibGVTcGVlY2hSZWNvZ25pdGlvbj1mYWxzZTtcclxuXHJcblxyXG5cclxubGV0IHdpbmRvd19TcGVlY2hSZWNvZ25pdGlvbjtcclxuLy8gdmFyIHdpbmRvd19TcGVlY2hSZWNvZ25pdGlvbiA9IHdpbmRvdy53ZWJraXRTcGVlY2hSZWNvZ25pdGlvbiB8fCB3aW5kb3cuU3BlZWNoUmVjb2duaXRpb24gfHwgd2Via2l0U3BlZWNoUmVjb2duaXRpb24gfHwgU3BlZWNoUmVjb2duaXRpb247XHJcbmlmKHdpbmRvdy53ZWJraXRTcGVlY2hSZWNvZ25pdGlvbil7d2luZG93X1NwZWVjaFJlY29nbml0aW9uID0gd2luZG93LndlYmtpdFNwZWVjaFJlY29nbml0aW9ufVxyXG5lbHNlIGlmKHdpbmRvdy5TcGVlY2hSZWNvZ25pdGlvbil7d2luZG93X1NwZWVjaFJlY29nbml0aW9uID0gd2luZG93LlNwZWVjaFJlY29nbml0aW9ufVxyXG5lbHNlIGlmKHR5cGVvZiB3ZWJraXRTcGVlY2hSZWNvZ25pdGlvbiE9PVwidW5kZWZpbmVkXCIpe3dpbmRvd19TcGVlY2hSZWNvZ25pdGlvbiA9IHdlYmtpdFNwZWVjaFJlY29nbml0aW9ufVxyXG5lbHNlIGlmKHR5cGVvZiBTcGVlY2hSZWNvZ25pdGlvbiE9PVwidW5kZWZpbmVkXCIpe3dpbmRvd19TcGVlY2hSZWNvZ25pdGlvbiA9IFNwZWVjaFJlY29nbml0aW9ufVxyXG5cclxuaWYod2luZG93X1NwZWVjaFJlY29nbml0aW9uKXsgIC8vIGlmKCdTcGVlY2hSZWNvZ25pdGlvbicgaW4gd2luZG93KXtcclxuICBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB3aW5kb3dfU3BlZWNoUmVjb2duaXRpb24pe1xyXG4gICAgIHJlY29nbml0aW9uRmxncy5mbGdFbmFibGVTcGVlY2hSZWNvZ25pdGlvbj10cnVlO1xyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmZ1bmN0aW9uIGh0bWxFbGVtSW5pdF9Wb2ljZXJlY29nbml0aW9uKCl7XHJcbiAgaWYoR2h0bWwuZWxlbUNoZWNrQm94X1Jlc3VsdFJlY29nbml0aW9uKXtcclxuICAgIGxldCBmbGc9MFxyXG4gICAgaWYocmVjb2duaXRpb25GbGdzLmZsZ0VuYWJsZVNwZWVjaFJlY29nbml0aW9uKXtcclxuICAgICAgc2V0dGluZ1JlY29nbml0aW9uKCk7IC8v6Z+z5aOw6KqN6K2Y44Gu5Yid5pyf5YyWXHJcbiAgICAgIGlmKHJlY29nbml0aW9uKXtcclxuICAgICAgICAgICAgICAgIEdodG1sLmVsZW1DaGVja0JveF9SZXN1bHRSZWNvZ25pdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihlLnRhcmdldC5jaGVja2VkKXtcclxuICAgICAgICAgICAgICAgICAgICAgIHJlY29nbml0aW9uLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBHaHRtbC5lbGVtQ2hlY2tCb3hfUmVzdWx0UmVjb2duaXRpb25fY2hhdC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmVjb2duaXRpb25GbGdzLnJlY29nbml0aW9uUmVzdGFydGFibGVGbGc9ZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZWNvZ25pdGlvbi5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBHaHRtbC5lbGVtQ2hlY2tCb3hfUmVzdWx0UmVjb2duaXRpb25fY2hhdC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBmbGc9MTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYoZmxnPT0wKXsgLy8g5Yid5pyf5YyW5aSx5pWXXHJcbiAgICAgICAgIEdodG1sLmVsZW1DaGVja0JveF9SZXN1bHRSZWNvZ25pdGlvbi5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgIEdodG1sLmVsZW1DaGVja0JveF9SZXN1bHRSZWNvZ25pdGlvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgIEdodG1sLmVsZW1DaGVja0JveF9SZXN1bHRSZWNvZ25pdGlvbl9jaGF0LmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgR2h0bWwuZWxlbUNoZWNrQm94X1Jlc3VsdFJlY29nbml0aW9uX2NoYXQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgIC8vR2h0bWwuZWxlbUNoZWNrQm94X1Jlc3VsdFJlY29nbml0aW9uLmNoZWNrZWQgPSB0cnVlOyAvLyAyMDIyMDcyNOOAgOWIneacn+WApOOBr0hUTUzlrprnvqnjgavkvp3lrZjjgZXjgZvjgotcclxuICAgICAgICAgR2h0bWwuZWxlbUNoZWNrQm94X1Jlc3VsdFJlY29nbml0aW9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgIEdodG1sLmVsZW1DaGVja0JveF9SZXN1bHRSZWNvZ25pdGlvbl9jaGF0LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZihHaHRtbC5lbGVtQ2hlY2tCb3hfUmVzdWx0UmVjb2duaXRpb24uY2hlY2tlZCl7XHJcbiAgICAgICAgcmVjb2duaXRpb24uc3RhcnQoKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbi8vID09PT09PT09PT09PSDliJ3mnJ/oqK3lrprplqLmlbAgPT09PT09PT09PT09PT09PVxyXG5jb25zdCBjX3Rlc3RmbGcgPTA7XHJcblxyXG5cclxuZnVuY3Rpb24gc2V0dGluZ1JlY29nbml0aW9uKCl7XHJcbiAgaWYoIShyZWNvZ25pdGlvbkZsZ3MuZmxnRW5hYmxlU3BlZWNoUmVjb2duaXRpb24pKXtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1lbHNleyAvL+mfs+WjsOiqjeitmOOBruWIneacn+WMllxyXG4gICAgcmVjb2duaXRpb24gPSBuZXcgd2luZG93X1NwZWVjaFJlY29nbml0aW9uKCk7XHJcbiAgICBpZihyZWNvZ25pdGlvbil7XHJcbiAgICAgICAgcmVjb2duaXRpb24ubGFuZyA9ICdqYS1KUCc7XHJcbiAgICAgICAgcmVjb2duaXRpb24uaW50ZXJpbVJlc3VsdHMgPSB0cnVlOyAvLyDmmqvlrprntZDmnpzjgoLov5TjgZlcclxuICAgICAgICByZWNvZ25pdGlvbi5jb250aW51b3VzID0gdHJ1ZTtcclxuICAgICAgICBcclxuICAgICAgICByZWNvZ25pdGlvbi5hZGRFdmVudExpc3RlbmVyKCdzdGFydCcsIChldmVudCkgPT4geyAvLyBvbnN0YXJ0OuODquOCueODi+ODs+OCsOmWi+Wni1xyXG4gICAgICAgICAgIHJlY29nbml0aW9uRmxncy5yZWNvZ25pdGlvblJlc3RhcnRhYmxlRmxnID0gdHJ1ZTsgLy8g5YaN6LW35YuV5Y+v77yI6Z+z5aOw6Kej5p6Q5Lit44Gn44Gq44GE77yJXHJcbiAgICAgICAgICAgLy9HaHRtbC5lbGVtQ2hlY2tCb3hfUmVzdWx0UmVjb2duaXRpb24uY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgfSlcclxuICAgICAgICByZWNvZ25pdGlvbi5hZGRFdmVudExpc3RlbmVyKCdlbmQnLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgYWRkTWVzc2FnZU9mUmVjb2duaXRpb25FcnIoKTtcclxuICAgICAgICAgICAgaWYgKHJlY29nbml0aW9uRmxncy5yZWNvZ25pdGlvblJlc3RhcnRhYmxlRmxnKSB7XHJcbiAgICAgICAgICAgICAgICByZWNvZ25pdGlvbkZsZ3MucmVjb2duaXRpb25SZXN0YXJ0YWJsZUZsZyA9IGZhbHNlOyAvLyDlho3otbfli5XkuI3lj6/vvIjlho3otbfli5XkuK3vvIlcclxuICAgICAgICAgICAgICAgIHJlY29nbml0aW9uLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgICAgICAvL0dodG1sLmVsZW1DaGVja0JveF9SZXN1bHRSZWNvZ25pdGlvbi5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBHaHRtbC5lbGVtVGV4dF9SZXN1bHRSZWNvZ25pdGlvblN0YXR1cy5pbm5lckhUTUw9XCJcIjtcclxuICAgICAgICAgICAgICAgIGlmKGNfdGVzdGZsZyl7IGNvbnNvbGUubG9nKFwiUmVjb2duaXRpb24gZW5kKHJlc3RhcnQpLlwiKTsgfVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGlmKGNfdGVzdGZsZyl7IGNvbnNvbGUubG9nKFwiUmVjb2duaXRpb24gZW5kLlwiKTsgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGludGVyaW1UcmFuc2NyaXB0ID0gJyc7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmVjb2duaXRpb24uYWRkRXZlbnRMaXN0ZW5lcigncmVzdWx0JywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBmaW5hbFRyYW5zY3JpcHQgPSAnJzsgLy/norrlrprntZDmnpxcclxuICAgICAgICAgICAgbGV0IGludGVyaW1UcmFuc2NyaXB0ID0gJyc7IC8vIOaaq+WumijngbDoibIp44Gu6KqN6K2Y57WQ5p6cXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBldmVudC5yZXN1bHRJbmRleDsgaSA8IGV2ZW50LnJlc3VsdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICBsZXQgdHJhbnNjcmlwdCA9IGV2ZW50LnJlc3VsdHNbaV1bMF0udHJhbnNjcmlwdDtcclxuICAgICAgICAgICAgICBpZiAoZXZlbnQucmVzdWx0c1tpXS5pc0ZpbmFsKSB7XHJcbiAgICAgICAgICAgICAgICBmaW5hbFRyYW5zY3JpcHQgKz0gdHJhbnNjcmlwdDtcclxuICAgICAgICAgICAgICAgIHJlY29nbml0aW9uRmxncy5yZWNvZ25pdGlvblJlc3RhcnRhYmxlRmxnID0gdHJ1ZTsgIC8vIOWGjei1t+WLleWPr++8iOmfs+WjsOino+aekOS4reOBp+OBquOBhO+8iVxyXG4gICAgICAgICAgICAgICAgaWYoY190ZXN0ZmxnKXsgY29uc29sZS5sb2coXCJSZWNvZ25pdGlvbiBmaW5hbC5cIitpbnRlcmltVHJhbnNjcmlwdCk7IH1cclxuICAgICAgICAgICAgICAgIGludGVyaW1UcmFuc2NyaXB0PVwiXCI7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGludGVyaW1UcmFuc2NyaXB0ID0gaW50ZXJpbVRyYW5zY3JpcHQgKyB0cmFuc2NyaXB0O1xyXG4gICAgICAgICAgICAgICAgcmVjb2duaXRpb25GbGdzLnJlY29nbml0aW9uUmVzdGFydGFibGVGbGcgPSBmYWxzZTsgIC8vIOWGjei1t+WLleS4jeWPr++8iOmfs+WjsOino+aekOS4re+8iVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZighcmVjb2duaXRpb25GbGdzLnJlY29nbml0aW9uUmVzdGFydGFibGVGbGcpe1xyXG4gICAgICAgICAgICAgICAgaWYoY190ZXN0ZmxnKXsgY29uc29sZS5sb2coXCJSZWNvZ25pdGlvbiBjb250aW51ZS5cIik7IH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhZGRNZXNzYWdlT2ZSZWNvZ25pdGlvbihmaW5hbFRyYW5zY3JpcHQsaW50ZXJpbVRyYW5zY3JpcHQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJlY29nbml0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ25vbWF0Y2gnLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgYWRkTWVzc2FnZU9mUmVjb2duaXRpb25FcnIoKTtcclxuICAgICAgICAgICAgaWYoY190ZXN0ZmxnKXsgY29uc29sZS5sb2coXCJSZWNvZ25pdGlvbiBOb01hdGNoOlwiK2V2ZW50LmVycm9yKTsgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmVjb2duaXRpb24uYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgYWRkTWVzc2FnZU9mUmVjb2duaXRpb25FcnIoKTtcclxuICAgICAgICAgICAgaWYoY190ZXN0ZmxnKXsgY29uc29sZS5sb2coXCJSZWNvZ25pdGlvbkVycm9yOlwiK2V2ZW50LmVycm9yKTsgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmVjb2duaXRpb24uYWRkRXZlbnRMaXN0ZW5lcignc291bmRzdGFydCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBHaHRtbC5lbGVtVGV4dF9SZXN1bHRSZWNvZ25pdGlvblN0YXR1cy5pbm5lckhUTUw9XCLil49cIjtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJlY29nbml0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ3NvdW5kZW5kJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIEdodG1sLmVsZW1UZXh0X1Jlc3VsdFJlY29nbml0aW9uU3RhdHVzLmlubmVySFRNTD1cIuKXi1wiO1xyXG4gICAgICAgICAgICByZWNvZ25pdGlvbkZsZ3MucmVjb2duaXRpb25SZXN0YXJ0YWJsZUZsZyA9IHRydWU7Ly9zdG9w44Oh44K944OD44OJ44Gr44KI44KK55m655Sf44GZ44KLb25lbmTjgqTjg5njg7Pjg4jjgaflho3otbfli5XjgZXjgZvjgotcclxuICAgICAgICAgICAgcmVjb2duaXRpb24uc3RvcCgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gcmVjb2duaXRpb24uc3RvcCgpO1xyXG4gICAgICAgIC8vIHJlY29nbml0aW9uLnN0YXJ0KCk7IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2phL2RvY3MvV2ViL0FQSS9TcGVlY2hSZWNvZ25pdGlvblxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5mdW5jdGlvbiBhZGRNZXNzYWdlT2ZSZWNvZ25pdGlvbihtc2cxLG1zZzIpe1xyXG4gICAgbGV0IG1heGNvdW50ID0gMTAwOyAvL+ihqOekuuacgOWkp+aWh+Wtl+aVsFxyXG4gICAgXHJcbiAgICBpZihtc2cxIT1cIlwiKXtcclxuICAgICAgaWYoR2h0bWwuZWxlbVRleHRBcmVhX1Jlc3VsdFJlY29nbml0aW9uKXtcclxuICAgICAgICAgIGxldCBtc2cgPSBHaHRtbC5lbGVtVGV4dEFyZWFfUmVzdWx0UmVjb2duaXRpb24udmFsdWU7XHJcbiAgICAgICAgICAvL21zZyArPSAoc3RyVGltZSttc2cxKTtcclxuICAgICAgICAgIG1zZyArPSBtc2cxO1xyXG4gICAgICAgICAgaWYobXNnLmxlbmd0aD5tYXhjb3VudCl7IG1zZz1tc2cuc2xpY2UoIDAtbWF4Y291bnQgKTsgfVxyXG4gICAgICAgICAgR2h0bWwuZWxlbVRleHRBcmVhX1Jlc3VsdFJlY29nbml0aW9uLnZhbHVlID0gbXNnO1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBmbGc9MTtcclxuICAgICAgLy9pZighR2h0bWwuZWxlbU1pY19TVyl7ZmxnPTA7fVxyXG4gICAgICAvL2lmKEdodG1sLmVsZW1NaWNfU1cudmFsdWU9PTApe2ZsZz0wO31cclxuICAgICAgaWYoZmxnIT0wKXsgXHJcbiAgICAgICAgICBpZihHaHRtbC5lbGVtQ2hlY2tCb3hfUmVzdWx0UmVjb2duaXRpb25fY2hhdC5jaGVja2VkKXtcclxuICAgICAgICAgICAgICBzZW5kTmV3Q2hhdE1lc3NhZ2UobXNnMSk7IC8v44OB44Oj44OD44OI44Gr5Ye65Yqb44GZ44KLXHJcbiAgICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmKEdodG1sLmVsZW1UZXh0QXJlYV9SZXN1bHRSZWNvZ25pdGlvblApe1xyXG4gICAgICAgIEdodG1sLmVsZW1UZXh0QXJlYV9SZXN1bHRSZWNvZ25pdGlvblAuaW5uZXJIVE1MID0gbXNnMjtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBhZGRNZXNzYWdlT2ZSZWNvZ25pdGlvbkVycigpe1xyXG4gICAgbGV0IG1zZz0nJztcclxuICAgIGlmKEdodG1sLmVsZW1UZXh0QXJlYV9SZXN1bHRSZWNvZ25pdGlvblApe1xyXG4gICAgICAgIG1zZz1HaHRtbC5lbGVtVGV4dEFyZWFfUmVzdWx0UmVjb2duaXRpb25QLmlubmVySFRNTDtcclxuICAgICAgICBHaHRtbC5lbGVtVGV4dEFyZWFfUmVzdWx0UmVjb2duaXRpb25QLmlubmVySFRNTD1cIlwiO1xyXG4gICAgfVxyXG4gICAgYWRkTWVzc2FnZU9mUmVjb2duaXRpb24obXNnLFwiXCIpO1xyXG59XHJcblxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/udonChatHTML_VoiceRecognition.js\n");

/***/ }),

/***/ "./src/udonChatHTML_elements.js":
/*!**************************************!*\
  !*** ./src/udonChatHTML_elements.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Ghtml\": () => (/* binding */ Ghtml),\n/* harmony export */   \"c_audioContext\": () => (/* binding */ c_audioContext),\n/* harmony export */   \"c_elemEvent_input\": () => (/* binding */ c_elemEvent_input)\n/* harmony export */ });\n// import { Ghtml }  from \"./udonChatHTML_elements.js\"; で利用可能になる。\r\n//\t※この場合、Ghtml.testparam01=0; 等となる。変数Ghtml自体は参照のみ可能(代入不可)。\r\n\r\n\r\n\r\n\r\n\r\n\r\n//-----------\r\nconst c_audioContext = new (window.AudioContext || window.webkitAudioContext)(); // chromeでは、後続のresume で有効化される\r\n\r\nconst c_elemEvent_input = new Event('input');\r\n//-----------\r\n\r\nlet Ghtml = {};\r\n\r\nGhtml.elemText_myPeerId = null;\r\nGhtml.elemStream_SW = null;\r\nGhtml.elemStream_SW_Msg = null;\r\nGhtml.elemMic_SW = null;\r\nGhtml.elemMic_STTS = null;\r\nGhtml.elemRange_microphoneLevel = null;\r\nGhtml.elemRange_microphoneLevelCurVal = null;\r\nGhtml.elemVolume_SW = null;\r\nGhtml.elemRange_VolumeLevel = null;\r\nGhtml.elemRange_VolumeLevelCurVal = null;\r\nGhtml.elemCheckBox_micProperties = null;\r\nGhtml.elemRadio_micEchoCancel = null;\r\nGhtml.elemTextArea_ResultRecognition = null;\r\nGhtml.elemTextArea_ResultRecognitionP = null;\r\nGhtml.elemCheckBox_ResultRecognition = null;\r\nGhtml.elemCheckBox_ResultRecognition_chat =null;\r\nGhtml.elemText_ResultRecognitionStatus = null;\r\nGhtml.elemText_chatMessage = null;\r\nGhtml.elemText_chatMessage_SW = null;\r\nGhtml.elemText_chatMessage_log = null;\r\nGhtml.elemText_chatMessage_saveSW = null;\r\nGhtml.elemText_chatMessage_saveBlobLink = null;\r\n\r\nGhtml.elemRec_SW = null;\r\nGhtml.elemTextArea_RecSound = null;\r\n\r\nGhtml.elemVideo = null;\r\nGhtml.elemVideo_SW = null;\r\nGhtml.elemVideo_STTS = null;\r\nGhtml.elemRange_VideoFrameRate = null;\r\nGhtml.elemRange_VideoFrameRateCurVal = null;\r\n\r\nGhtml.elemAddNewPeer_SW = null;\r\nGhtml.elemText_myPeerId = null;\r\nGhtml.elemText_myPeerId_copySW = null;\r\nGhtml.elemDiv_streams = null;\r\nGhtml.elemText_AddNewPeerID = null;\r\n\r\n//-----------\r\n\r\n\r\n\r\n\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdWRvbkNoYXRIVE1MX2VsZW1lbnRzLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLFlBQVksU0FBUyxtQ0FBbUM7QUFDeEQsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08saUZBQWlGO0FBQ3hGO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yMDIxMDExMV93ZWJjaGF0Ly4vc3JjL3Vkb25DaGF0SFRNTF9lbGVtZW50cy5qcz80NTVmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCB7IEdodG1sIH0gIGZyb20gXCIuL3Vkb25DaGF0SFRNTF9lbGVtZW50cy5qc1wiOyDjgafliKnnlKjlj6/og73jgavjgarjgovjgIJcclxuLy9cdOKAu+OBk+OBruWgtOWQiOOAgUdodG1sLnRlc3RwYXJhbTAxPTA7IOetieOBqOOBquOCi+OAguWkieaVsEdodG1s6Ieq5L2T44Gv5Y+C54Wn44Gu44G/5Y+v6IO9KOS7o+WFpeS4jeWPrynjgIJcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLy8tLS0tLS0tLS0tLVxyXG5leHBvcnQgY29uc3QgY19hdWRpb0NvbnRleHQgPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkoKTsgLy8gY2hyb21l44Gn44Gv44CB5b6M57aa44GucmVzdW1lIOOBp+acieWKueWMluOBleOCjOOCi1xyXG5cclxuZXhwb3J0IGNvbnN0IGNfZWxlbUV2ZW50X2lucHV0ID0gbmV3IEV2ZW50KCdpbnB1dCcpO1xyXG4vLy0tLS0tLS0tLS0tXHJcblxyXG5leHBvcnQgbGV0IEdodG1sID0ge307XHJcblxyXG5HaHRtbC5lbGVtVGV4dF9teVBlZXJJZCA9IG51bGw7XHJcbkdodG1sLmVsZW1TdHJlYW1fU1cgPSBudWxsO1xyXG5HaHRtbC5lbGVtU3RyZWFtX1NXX01zZyA9IG51bGw7XHJcbkdodG1sLmVsZW1NaWNfU1cgPSBudWxsO1xyXG5HaHRtbC5lbGVtTWljX1NUVFMgPSBudWxsO1xyXG5HaHRtbC5lbGVtUmFuZ2VfbWljcm9waG9uZUxldmVsID0gbnVsbDtcclxuR2h0bWwuZWxlbVJhbmdlX21pY3JvcGhvbmVMZXZlbEN1clZhbCA9IG51bGw7XHJcbkdodG1sLmVsZW1Wb2x1bWVfU1cgPSBudWxsO1xyXG5HaHRtbC5lbGVtUmFuZ2VfVm9sdW1lTGV2ZWwgPSBudWxsO1xyXG5HaHRtbC5lbGVtUmFuZ2VfVm9sdW1lTGV2ZWxDdXJWYWwgPSBudWxsO1xyXG5HaHRtbC5lbGVtQ2hlY2tCb3hfbWljUHJvcGVydGllcyA9IG51bGw7XHJcbkdodG1sLmVsZW1SYWRpb19taWNFY2hvQ2FuY2VsID0gbnVsbDtcclxuR2h0bWwuZWxlbVRleHRBcmVhX1Jlc3VsdFJlY29nbml0aW9uID0gbnVsbDtcclxuR2h0bWwuZWxlbVRleHRBcmVhX1Jlc3VsdFJlY29nbml0aW9uUCA9IG51bGw7XHJcbkdodG1sLmVsZW1DaGVja0JveF9SZXN1bHRSZWNvZ25pdGlvbiA9IG51bGw7XHJcbkdodG1sLmVsZW1DaGVja0JveF9SZXN1bHRSZWNvZ25pdGlvbl9jaGF0ID1udWxsO1xyXG5HaHRtbC5lbGVtVGV4dF9SZXN1bHRSZWNvZ25pdGlvblN0YXR1cyA9IG51bGw7XHJcbkdodG1sLmVsZW1UZXh0X2NoYXRNZXNzYWdlID0gbnVsbDtcclxuR2h0bWwuZWxlbVRleHRfY2hhdE1lc3NhZ2VfU1cgPSBudWxsO1xyXG5HaHRtbC5lbGVtVGV4dF9jaGF0TWVzc2FnZV9sb2cgPSBudWxsO1xyXG5HaHRtbC5lbGVtVGV4dF9jaGF0TWVzc2FnZV9zYXZlU1cgPSBudWxsO1xyXG5HaHRtbC5lbGVtVGV4dF9jaGF0TWVzc2FnZV9zYXZlQmxvYkxpbmsgPSBudWxsO1xyXG5cclxuR2h0bWwuZWxlbVJlY19TVyA9IG51bGw7XHJcbkdodG1sLmVsZW1UZXh0QXJlYV9SZWNTb3VuZCA9IG51bGw7XHJcblxyXG5HaHRtbC5lbGVtVmlkZW8gPSBudWxsO1xyXG5HaHRtbC5lbGVtVmlkZW9fU1cgPSBudWxsO1xyXG5HaHRtbC5lbGVtVmlkZW9fU1RUUyA9IG51bGw7XHJcbkdodG1sLmVsZW1SYW5nZV9WaWRlb0ZyYW1lUmF0ZSA9IG51bGw7XHJcbkdodG1sLmVsZW1SYW5nZV9WaWRlb0ZyYW1lUmF0ZUN1clZhbCA9IG51bGw7XHJcblxyXG5HaHRtbC5lbGVtQWRkTmV3UGVlcl9TVyA9IG51bGw7XHJcbkdodG1sLmVsZW1UZXh0X215UGVlcklkID0gbnVsbDtcclxuR2h0bWwuZWxlbVRleHRfbXlQZWVySWRfY29weVNXID0gbnVsbDtcclxuR2h0bWwuZWxlbURpdl9zdHJlYW1zID0gbnVsbDtcclxuR2h0bWwuZWxlbVRleHRfQWRkTmV3UGVlcklEID0gbnVsbDtcclxuXHJcbi8vLS0tLS0tLS0tLS1cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/udonChatHTML_elements.js\n");

/***/ }),

/***/ "./src/udonChatMessageLog.js":
/*!***********************************!*\
  !*** ./src/udonChatMessageLog.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addNewDataToChatMessageLog\": () => (/* binding */ addNewDataToChatMessageLog),\n/* harmony export */   \"htmlElemInit_MessageLog\": () => (/* binding */ htmlElemInit_MessageLog)\n/* harmony export */ });\n/* harmony import */ var _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./udonChatHTML_elements.js */ \"./src/udonChatHTML_elements.js\");\n/* harmony import */ var _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./myGlobalParams.js */ \"./src/myGlobalParams.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet chatMessage_logAry=[];\r\nlet chatMessage_saveCntMax=0;\r\n\r\n\r\n\r\n\r\n\r\nfunction htmlElemInit_MessageLog(){\r\n   //  elemText_chatMessage_saveSW = document.getElementById(\"textarea_chatMessage-save_sw\");\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemText_chatMessage_saveSW){\r\n     _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemText_chatMessage_saveSW.addEventListener('click', function(e){\r\n         e.target.setAttribute(\"disabled\", true);\r\n         \r\n         saveChatMessageLog();\r\n         \r\n         e.target.removeAttribute(\"disabled\");\r\n     });\r\n   }\r\n}\r\n\r\n\r\n\r\n\r\nfunction addNewDataToChatMessageLog(strid,data,crflg=1) {\r\n    // 画面に受信したメッセージを表示\r\n    let strAdd;\r\n    let strHM;\r\n    let strYMDHM;\r\n    \r\n    let nowtime = new Date();\r\n    strHM = \"\";\r\n    strHM = strHM +strFormatTwoChar(nowtime.getHours()) + \":\" ;\r\n    strHM = strHM +strFormatTwoChar(nowtime.getMinutes());\r\n    \r\n    //strYMDHM = nowtime.getFullYear().toString() + \"/\" ;\r\n    //strYMDHM = strYMDHM +strFormatTwoChar(nowtime.getMonth()+1) + \"/\" ;\r\n    //strYMDHM = strYMDHM +strFormatTwoChar(nowtime.getDate()) + \" \" ;\r\n    //strYMDHM = strYMDHM + strHM +\":\";\r\n    //strYMDHM = strYMDHM +strFormatTwoChar(nowtime.getSeconds());\r\n    \r\n    \r\n    strAdd = strHM +\" \"+ strid;\r\n    if(crflg==0) strAdd = strAdd+\"\\n\";\r\n    strAdd = strAdd + data+\"\\n\";\r\n    \r\n    _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemText_chatMessage_log.value += strAdd;\r\n    \r\n    _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemText_chatMessage_log.scrollTop = _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemText_chatMessage_log.scrollHeight;\r\n    \r\n    //保存\r\n    let logobj={};\r\n    logobj.rectime = nowtime;\r\n    logobj.peerid = strid;\r\n    logobj.data = data;\r\n    \r\n    chatMessage_logAry.push(logobj);\r\n    \r\n}\r\nfunction strFormatTwoChar(intval) {\r\n    let ans=\"\";\r\n    if (intval<10) ans = ans +\"0\";\r\n    ans = ans + intval.toString();\r\n    return ans\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction saveChatMessageLog(){\r\n    let filename;\r\n    let blob;\r\n    let strData;\r\n    let strymd;\r\n\r\n    let cntmax = -1;\r\n    if(chatMessage_logAry){ cntmax=chatMessage_logAry.length; }\r\n    if(cntmax>0){\r\n        \r\n        filename = \"log.txt\";\r\n        if (filename!=\"\") {\r\n            \r\n            if(false){}else{\r\n                \r\n                strData=\"\";\r\n                for(let i=0;i<cntmax;i++){\r\n                    let logobj=chatMessage_logAry[i];\r\n                    \r\n                    strymd = logobj.rectime.getFullYear().toString() + \"/\" ;\r\n                    strymd = strymd +strFormatTwoChar(logobj.rectime.getMonth()+1) + \"/\" ;\r\n                    strymd = strymd +strFormatTwoChar(logobj.rectime.getDate()) + \" \" ;\r\n                    strymd = strymd +strFormatTwoChar(logobj.rectime.getHours()) + \":\" ;\r\n                    strymd = strymd +strFormatTwoChar(logobj.rectime.getMinutes()) + \":\" ;\r\n                    strymd = strymd +strFormatTwoChar(logobj.rectime.getSeconds());\r\n                    \r\n                    strData = strData + strymd;\r\n                    \r\n                    strData = strData + \",\" +logobj.peerid;\r\n                    strData = strData + \",\" +logobj.data.replace(/\\r?\\n/g, ' ');\r\n                    \r\n                    strData = strData + \"\\n\"\r\n                }\r\n                blob = new Blob([strData],{type:\"text/plan\"});\r\n            }\r\n            _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemText_chatMessage_saveBlobLink.href = URL.createObjectURL(blob);\r\n            _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemText_chatMessage_saveBlobLink.download = filename;\r\n            _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemText_chatMessage_saveBlobLink.click();\r\n\r\n\r\n            //保存したデータを配列から削除\r\n            if(confirm('出力分をメモリから削除しますか')){\r\n                 chatMessage_logAry.slice(0,cntmax)\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdWRvbkNoYXRNZXNzYWdlTG9nLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBb0Q7QUFDWDtBQUN6QztBQUMrRDtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHdGQUFpQztBQUN2QyxLQUFLLHlHQUFrRDtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSwyRkFBb0M7QUFDeEM7QUFDQSxJQUFJLCtGQUF3QyxHQUFHLGtHQUEyQztBQUMxRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxLQUFJLENBQUMsRUFHUDtBQUNiO0FBQ0E7QUFDQSw0QkFBNEIsU0FBUztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxpQkFBaUI7QUFDNUQ7QUFDQSxZQUFZLG1HQUE0QztBQUN4RCxZQUFZLHVHQUFnRDtBQUM1RCxZQUFZLG9HQUE2QztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vMjAyMTAxMTFfd2ViY2hhdC8uL3NyYy91ZG9uQ2hhdE1lc3NhZ2VMb2cuanM/YjY0MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHaHRtbCB9ICBmcm9tIFwiLi91ZG9uQ2hhdEhUTUxfZWxlbWVudHMuanNcIjtcclxuaW1wb3J0IHsgRyB9ICBmcm9tIFwiLi9teUdsb2JhbFBhcmFtcy5qc1wiO1xyXG5cclxuZXhwb3J0IHsgaHRtbEVsZW1Jbml0X01lc3NhZ2VMb2cgLCBhZGROZXdEYXRhVG9DaGF0TWVzc2FnZUxvZyB9XHJcblxyXG5cclxuXHJcbmxldCBjaGF0TWVzc2FnZV9sb2dBcnk9W107XHJcbmxldCBjaGF0TWVzc2FnZV9zYXZlQ250TWF4PTA7XHJcblxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gaHRtbEVsZW1Jbml0X01lc3NhZ2VMb2coKXtcclxuICAgLy8gIGVsZW1UZXh0X2NoYXRNZXNzYWdlX3NhdmVTVyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGV4dGFyZWFfY2hhdE1lc3NhZ2Utc2F2ZV9zd1wiKTtcclxuICAgaWYoR2h0bWwuZWxlbVRleHRfY2hhdE1lc3NhZ2Vfc2F2ZVNXKXtcclxuICAgICBHaHRtbC5lbGVtVGV4dF9jaGF0TWVzc2FnZV9zYXZlU1cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgZS50YXJnZXQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICBzYXZlQ2hhdE1lc3NhZ2VMb2coKTtcclxuICAgICAgICAgXHJcbiAgICAgICAgIGUudGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgIH0pO1xyXG4gICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIGFkZE5ld0RhdGFUb0NoYXRNZXNzYWdlTG9nKHN0cmlkLGRhdGEsY3JmbGc9MSkge1xyXG4gICAgLy8g55S76Z2i44Gr5Y+X5L+h44GX44Gf44Oh44OD44K744O844K444KS6KGo56S6XHJcbiAgICBsZXQgc3RyQWRkO1xyXG4gICAgbGV0IHN0ckhNO1xyXG4gICAgbGV0IHN0cllNREhNO1xyXG4gICAgXHJcbiAgICBsZXQgbm93dGltZSA9IG5ldyBEYXRlKCk7XHJcbiAgICBzdHJITSA9IFwiXCI7XHJcbiAgICBzdHJITSA9IHN0ckhNICtzdHJGb3JtYXRUd29DaGFyKG5vd3RpbWUuZ2V0SG91cnMoKSkgKyBcIjpcIiA7XHJcbiAgICBzdHJITSA9IHN0ckhNICtzdHJGb3JtYXRUd29DaGFyKG5vd3RpbWUuZ2V0TWludXRlcygpKTtcclxuICAgIFxyXG4gICAgLy9zdHJZTURITSA9IG5vd3RpbWUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgXCIvXCIgO1xyXG4gICAgLy9zdHJZTURITSA9IHN0cllNREhNICtzdHJGb3JtYXRUd29DaGFyKG5vd3RpbWUuZ2V0TW9udGgoKSsxKSArIFwiL1wiIDtcclxuICAgIC8vc3RyWU1ESE0gPSBzdHJZTURITSArc3RyRm9ybWF0VHdvQ2hhcihub3d0aW1lLmdldERhdGUoKSkgKyBcIiBcIiA7XHJcbiAgICAvL3N0cllNREhNID0gc3RyWU1ESE0gKyBzdHJITSArXCI6XCI7XHJcbiAgICAvL3N0cllNREhNID0gc3RyWU1ESE0gK3N0ckZvcm1hdFR3b0NoYXIobm93dGltZS5nZXRTZWNvbmRzKCkpO1xyXG4gICAgXHJcbiAgICBcclxuICAgIHN0ckFkZCA9IHN0ckhNICtcIiBcIisgc3RyaWQ7XHJcbiAgICBpZihjcmZsZz09MCkgc3RyQWRkID0gc3RyQWRkK1wiXFxuXCI7XHJcbiAgICBzdHJBZGQgPSBzdHJBZGQgKyBkYXRhK1wiXFxuXCI7XHJcbiAgICBcclxuICAgIEdodG1sLmVsZW1UZXh0X2NoYXRNZXNzYWdlX2xvZy52YWx1ZSArPSBzdHJBZGQ7XHJcbiAgICBcclxuICAgIEdodG1sLmVsZW1UZXh0X2NoYXRNZXNzYWdlX2xvZy5zY3JvbGxUb3AgPSBHaHRtbC5lbGVtVGV4dF9jaGF0TWVzc2FnZV9sb2cuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgXHJcbiAgICAvL+S/neWtmFxyXG4gICAgbGV0IGxvZ29iaj17fTtcclxuICAgIGxvZ29iai5yZWN0aW1lID0gbm93dGltZTtcclxuICAgIGxvZ29iai5wZWVyaWQgPSBzdHJpZDtcclxuICAgIGxvZ29iai5kYXRhID0gZGF0YTtcclxuICAgIFxyXG4gICAgY2hhdE1lc3NhZ2VfbG9nQXJ5LnB1c2gobG9nb2JqKTtcclxuICAgIFxyXG59XHJcbmZ1bmN0aW9uIHN0ckZvcm1hdFR3b0NoYXIoaW50dmFsKSB7XHJcbiAgICBsZXQgYW5zPVwiXCI7XHJcbiAgICBpZiAoaW50dmFsPDEwKSBhbnMgPSBhbnMgK1wiMFwiO1xyXG4gICAgYW5zID0gYW5zICsgaW50dmFsLnRvU3RyaW5nKCk7XHJcbiAgICByZXR1cm4gYW5zXHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBzYXZlQ2hhdE1lc3NhZ2VMb2coKXtcclxuICAgIGxldCBmaWxlbmFtZTtcclxuICAgIGxldCBibG9iO1xyXG4gICAgbGV0IHN0ckRhdGE7XHJcbiAgICBsZXQgc3RyeW1kO1xyXG5cclxuICAgIGxldCBjbnRtYXggPSAtMTtcclxuICAgIGlmKGNoYXRNZXNzYWdlX2xvZ0FyeSl7IGNudG1heD1jaGF0TWVzc2FnZV9sb2dBcnkubGVuZ3RoOyB9XHJcbiAgICBpZihjbnRtYXg+MCl7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZmlsZW5hbWUgPSBcImxvZy50eHRcIjtcclxuICAgICAgICBpZiAoZmlsZW5hbWUhPVwiXCIpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKDE9PTIpe1xyXG4gICAgICAgICAgICAgICAgbGV0IHdyaXRlX2pzb249SlNPTi5zdHJpbmdpZnkoY2hhdE1lc3NhZ2VfbG9nQXJ5KTtcclxuICAgICAgICAgICAgICAgIGJsb2I9bmV3IEJsb2IoW3dyaXRlX2pzb25dLCB7dHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nfSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBzdHJEYXRhPVwiXCI7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDtpPGNudG1heDtpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsb2dvYmo9Y2hhdE1lc3NhZ2VfbG9nQXJ5W2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cnltZCA9IGxvZ29iai5yZWN0aW1lLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArIFwiL1wiIDtcclxuICAgICAgICAgICAgICAgICAgICBzdHJ5bWQgPSBzdHJ5bWQgK3N0ckZvcm1hdFR3b0NoYXIobG9nb2JqLnJlY3RpbWUuZ2V0TW9udGgoKSsxKSArIFwiL1wiIDtcclxuICAgICAgICAgICAgICAgICAgICBzdHJ5bWQgPSBzdHJ5bWQgK3N0ckZvcm1hdFR3b0NoYXIobG9nb2JqLnJlY3RpbWUuZ2V0RGF0ZSgpKSArIFwiIFwiIDtcclxuICAgICAgICAgICAgICAgICAgICBzdHJ5bWQgPSBzdHJ5bWQgK3N0ckZvcm1hdFR3b0NoYXIobG9nb2JqLnJlY3RpbWUuZ2V0SG91cnMoKSkgKyBcIjpcIiA7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyeW1kID0gc3RyeW1kICtzdHJGb3JtYXRUd29DaGFyKGxvZ29iai5yZWN0aW1lLmdldE1pbnV0ZXMoKSkgKyBcIjpcIiA7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyeW1kID0gc3RyeW1kICtzdHJGb3JtYXRUd29DaGFyKGxvZ29iai5yZWN0aW1lLmdldFNlY29uZHMoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyRGF0YSA9IHN0ckRhdGEgKyBzdHJ5bWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyRGF0YSA9IHN0ckRhdGEgKyBcIixcIiArbG9nb2JqLnBlZXJpZDtcclxuICAgICAgICAgICAgICAgICAgICBzdHJEYXRhID0gc3RyRGF0YSArIFwiLFwiICtsb2dvYmouZGF0YS5yZXBsYWNlKC9cXHI/XFxuL2csICcgJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyRGF0YSA9IHN0ckRhdGEgKyBcIlxcblwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBibG9iID0gbmV3IEJsb2IoW3N0ckRhdGFdLHt0eXBlOlwidGV4dC9wbGFuXCJ9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBHaHRtbC5lbGVtVGV4dF9jaGF0TWVzc2FnZV9zYXZlQmxvYkxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgICAgICAgIEdodG1sLmVsZW1UZXh0X2NoYXRNZXNzYWdlX3NhdmVCbG9iTGluay5kb3dubG9hZCA9IGZpbGVuYW1lO1xyXG4gICAgICAgICAgICBHaHRtbC5lbGVtVGV4dF9jaGF0TWVzc2FnZV9zYXZlQmxvYkxpbmsuY2xpY2soKTtcclxuXHJcblxyXG4gICAgICAgICAgICAvL+S/neWtmOOBl+OBn+ODh+ODvOOCv+OCkumFjeWIl+OBi+OCieWJiumZpFxyXG4gICAgICAgICAgICBpZihjb25maXJtKCflh7rlipvliIbjgpLjg6Hjg6Ljg6rjgYvjgonliYrpmaTjgZfjgb7jgZnjgYsnKSl7XHJcbiAgICAgICAgICAgICAgICAgY2hhdE1lc3NhZ2VfbG9nQXJ5LnNsaWNlKDAsY250bWF4KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/udonChatMessageLog.js\n");

/***/ }),

/***/ "./src/udonMediaStream.js":
/*!********************************!*\
  !*** ./src/udonMediaStream.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"forceOnElemStream_SW\": () => (/* binding */ forceOnElemStream_SW),\n/* harmony export */   \"htmlElemInit_MediaStream\": () => (/* binding */ htmlElemInit_MediaStream)\n/* harmony export */ });\n/* harmony import */ var _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./udonChatHTML_elements.js */ \"./src/udonChatHTML_elements.js\");\n/* harmony import */ var _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./myGlobalParams.js */ \"./src/myGlobalParams.js\");\n/* harmony import */ var _udonRecordVoice_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./udonRecordVoice.js */ \"./src/udonRecordVoice.js\");\n/* harmony import */ var _udonWebRTC_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./udonWebRTC.js */ \"./src/udonWebRTC.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n \r\n\r\n\r\n\r\n\r\n\r\n\r\n// ============ 初期化実行 ================\r\n\r\n\r\nlet myNavigatorMediaDevices;\r\n\r\nlet videoTrack = null;\r\nlet audioTrack = null;\r\n\r\nconst c_gainNode = _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.c_audioContext.createGain(); // マイク音量（感度）調整用\r\n\r\n\r\n\r\n// カメラ／マイクにアクセスするためのメソッドを取得しておく\r\nmyNavigatorMediaDevices = navigator.mediaDevices || ((navigator.mozGetUserMedia || navigator.webkitGetUserMedia) ? {\r\n   getUserMedia: function(c) {\r\n     return new Promise(function(y, n) {\r\n       (navigator.mozGetUserMedia ||\r\n        navigator.webkitGetUserMedia).call(navigator, c, y, n);\r\n     });\r\n   }\r\n} : null);\r\nif (!myNavigatorMediaDevices) {\r\n  console.log(\"getUserMedia() not supported.\");\r\n}\r\n\r\n\r\n//---\r\nlet videoConstraints = null;\r\nlet videoConstraintsText = \"\";\r\nlet audioConstraints = null;\r\nlet audioConstraintsText = \"\";\r\n\r\n\r\nvideoConstraintsText = '{ \"width\": {\"max\":320}, \"height\": {\"max\":240} ,\"frameRate\": { \"ideal\": 5, \"max\": 10 } }';\r\naudioConstraintsText = '{ \"sampleSize\": 8, \"channelCount\": 1, \"echoCancellation\": false}';\r\n\r\n\r\n\r\n// ============================\r\n\r\nfunction htmlElemInit_MediaStream(){\r\n\r\n   //elemRange_microphoneLevel = document.getElementById('my-microphoneLevel');\r\n   //elemRange_microphoneLevelCurVal = document.getElementById('my-microphoneLevel_currentValue');\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_microphoneLevel){\r\n     _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_microphoneLevel.addEventListener('input', function(e){\r\n         update_elemRange_microphoneLevelCurVal();\r\n         \r\n         if(c_gainNode){\r\n             c_gainNode.gain.value = e.target.value;\r\n         }\r\n         \r\n     });\r\n     \r\n     _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_microphoneLevel.value = c_gainNode.gain.value; // 初期値\r\n     _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_microphoneLevel.dispatchEvent(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.c_elemEvent_input);\r\n   }\r\n   \r\n   //elemMic_SW =  document.getElementById('my-mic_sw');\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemMic_SW){\r\n     _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemMic_SW.addEventListener('click', function(e){\r\n         e.target.setAttribute(\"disabled\", true);\r\n         if(e.target.value!=0){\r\n             e.target.value=0;\r\n             e.target.innerText = \"音声送信を開始\";\r\n             dispInfoStreamStatus(); //音声停止中\r\n             \r\n             if(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream){\r\n                 changAbleStream(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream.getAudioTracks(),false);//Off\r\n                 \r\n             }\r\n         }else{\r\n             e.target.value=1;\r\n             e.target.innerText = \"音声送信を停止\";\r\n             dispInfoStreamStatus(); //音声送出中\r\n             \r\n             if(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream){\r\n                 changAbleStream(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream.getAudioTracks(),true);//On\r\n             }\r\n         }\r\n         e.target.removeAttribute(\"disabled\");\r\n     });\r\n   }\r\n\r\n   \r\n\r\n   //elemCheckBox_micProperties = document.getElementsByName(\"my-checkbox_microphoneProps\");\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemCheckBox_micProperties){\r\n     for (let i = 0; i < _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemCheckBox_micProperties.length; i++){\r\n       _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemCheckBox_micProperties[i].addEventListener('change', function(e){\r\n         allDisabledElement(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemCheckBox_micProperties,true);\r\n         changeAudioConstraints();\r\n         setTimeout(function(e){ allDisabledElement(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemCheckBox_micProperties,false);}, 1000); // 処理実行直後1秒間は続けて処理を行わない\r\n       });\r\n     }\r\n   }\r\n   //elemRadio_micEchoCancel= document.getElementsByName(\"my-radio_microphoneEchoCancel\");\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRadio_micEchoCancel){\r\n     for (let i = 0; i < _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRadio_micEchoCancel.length; i++){\r\n       _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRadio_micEchoCancel[i].addEventListener('change', function(e){\r\n         allDisabledElement(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRadio_micEchoCancel,true);\r\n         changeAudioConstraints();\r\n         setTimeout(function(e){ allDisabledElement(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRadio_micEchoCancel,false);}, 1000); // 処理実行直後1秒間は続けて処理を行わない\r\n       });\r\n     }\r\n   }\r\n   \r\n   \r\n    \r\n    //elemVideo_SW =  document.getElementById('my-video_sw');\r\n    if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemVideo_SW){\r\n      _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemVideo_SW.addEventListener('click', function(e){\r\n          e.target.setAttribute(\"disabled\", true);\r\n          if(e.target.value!=0){\r\n              e.target.value=0;\r\n              e.target.innerText = \"映像送信を開始\";\r\n              dispInfoStreamStatus();\r\n              \r\n              if(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream){if(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream.getVideoTracks){ \r\n                  changAbleStream(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream.getVideoTracks(),false); }} //Off\r\n          }else{\r\n              e.target.value=1;\r\n              e.target.innerText = \"映像送信を停止\";\r\n              dispInfoStreamStatus();\r\n              \r\n              if(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream){if(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream.getVideoTracks){ \r\n                  changAbleStream(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream.getVideoTracks(),true); }} //On\r\n          }\r\n          e.target.removeAttribute(\"disabled\");\r\n      });\r\n    }\r\n\r\n    //elemRange_VideoFrameRate = document.getElementById('my-video_rate');\r\n    //elemRange_VideoFrameRateCurVal = document.getElementById('my-video_rate_currentValue');\r\n    if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_VideoFrameRate){\r\n      _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_VideoFrameRate.addEventListener('input', function(e){\r\n          update_elemRange_VideoFrameRateCurVal();\r\n          changeVideoConstraints();\r\n      });\r\n      _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_VideoFrameRate.dispatchEvent(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.c_elemEvent_input);\r\n    }\r\n    \r\n\r\n\r\n\r\n   //elemStream_SW =  document.getElementById('my-stream_sw');\r\n   //elemStream_SW_Msg =  document.getElementById('my-stream_sw_message');\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW){\r\n     _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW.addEventListener('click', function(e){\r\n         _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW.setAttribute(\"disabled\", true);\r\n         toggleElemStream_SW();\r\n     });\r\n   }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\nfunction update_elemRange_microphoneLevelCurVal(){\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_microphoneLevel){\r\n         if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_microphoneLevelCurVal){\r\n             _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_microphoneLevelCurVal.innerText = _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_microphoneLevel.value;\r\n         }\r\n   }\r\n}\r\nfunction update_elemRange_VideoFrameRateCurVal(){\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_VideoFrameRate){\r\n         if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_VideoFrameRateCurVal){\r\n             _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_VideoFrameRateCurVal.innerText = _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_VideoFrameRate.value;\r\n         }\r\n   }\r\n}\r\n\r\nfunction allDisabledElement(tgt,flg){\r\n   if(tgt){if(tgt.length){\r\n       for (let i = 0; i < tgt.length; i++){\r\n           if(flg){\r\n               tgt[i].setAttribute(\"disabled\", true);\r\n           }else{\r\n               tgt[i].removeAttribute(\"disabled\");\r\n           }\r\n       }\r\n   }}\r\n}\r\n\r\n\r\n// ---------------------------\r\n\r\nfunction forceOnElemStream_SW(){\r\n    if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW.value==0){\r\n        toggleElemStream_SW();\r\n    }\r\n}\r\nfunction toggleElemStream_SW(){  // 接続の初期化（ON/OFF）\r\n\r\n         if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW.value!=0){\r\n             _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW.value=0;\r\n             _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW.innerText = \"通信再開\";\r\n             dispInfoStreamStatus();\r\n         }else{\r\n             _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW.value=1;\r\n             _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW.innerText = \"通信停止\";\r\n             dispInfoStreamStatus();\r\n         }\r\n         \r\n         initVideoConstraints(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW);\r\n}\r\nfunction dispInfoStreamStatus(){\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW){\r\n     if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW.value==0){\r\n             if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW_Msg){_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW_Msg.innerText=\"停止中\";}\r\n             if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemMic_STTS)  {_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemMic_STTS.innerText  =\"\";}\r\n             if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemVideo_STTS){_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemVideo_STTS.innerText=\"\";}\r\n     }else{\r\n             if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW_Msg){_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW_Msg.innerText=\"通信中\";}\r\n             if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemMic_SW){if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemMic_STTS){\r\n                 if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemMic_SW.value!=0)   {_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemMic_STTS.innerText  =\"音声送出中\";}\r\n                 else                            {_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemMic_STTS.innerText  =\"音声停止中\";}\r\n             }}\r\n             if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemVideo_SW){if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemVideo_STTS){\r\n                 if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemVideo_SW.value!=0) {_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemVideo_STTS.innerText  =\"映像送出中\";}\r\n                 else                            {_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemVideo_STTS.innerText  =\"映像停止中\";}\r\n             }}\r\n     }\r\n   }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ============================\r\n\r\n\r\nfunction buildVideoConstraintsJSON() {\r\n  try {\r\n    videoConstraints = JSON.parse(videoConstraintsText);\r\n  } catch(error) {\r\n    handleError(error);\r\n  }\r\n}\r\nfunction buildAudioConstraintsJSON() {\r\n  try {\r\n    audioConstraints = JSON.parse(audioConstraintsText);\r\n  } catch(error) {\r\n    handleError(error);\r\n  }\r\n}\r\n\r\nfunction getCurrentSettings() {\r\n  if (videoTrack) {\r\n    videoConstraintsText = JSON.stringify(videoTrack.getSettings(), null, 2);\r\n  }\r\n  if (audioTrack) {\r\n    audioConstraintsText = JSON.stringify(audioTrack.getSettings(), null, 2);\r\n  }\r\n}\r\n\r\n\r\n// =====================================\r\n\r\n\r\nfunction startVideo(triggerElem = null) {\r\n  \r\n  //デバイス確認\r\n  let enableVideoFlg =0;\r\n  let enableAudioFlg =0;\r\n  navigator.mediaDevices.enumerateDevices()\r\n  .then(function(devices) { // 成功時\r\n      devices.forEach(function(device) {\r\n         if(device.kind==\"videoinput\"){ enableVideoFlg=1; }\r\n         if(device.kind==\"audioinput\"){ enableAudioFlg=1; }\r\n      });\r\n  }).catch(function(err) { // エラー発生時\r\n      console.log(err.name + \"[enumerateDevices]: \" + err.message);\r\n  }).then( function(stream) {\r\n    \r\n    \r\n    if((enableVideoFlg+enableAudioFlg)==0){\r\n        startVideo_functionEnd(); // 終了処理\r\n    }\r\n    \r\n    \r\n    //enableVideoFlg=0;\r\n        \r\n        \r\n    \r\n    // カメラ／マイクのストリームを取得する\r\n    \r\n    //navigator.mediaDevices.getUserMedia({\r\n    //    video: videoConstraints ,\r\n    //    audio: audioConstraints\r\n    //}).then( function(stream) \r\n    \r\n    let enableDeviceAry = {};\r\n    if(enableVideoFlg!=0){enableDeviceAry.video = videoConstraints;}\r\n    if(enableAudioFlg!=0){enableDeviceAry.audio = audioConstraints;}\r\n    \r\n    navigator.mediaDevices.getUserMedia(enableDeviceAry\r\n    ).then( function(stream) {\r\n        \r\n        let audioTracks = stream.getAudioTracks();\r\n        if (audioTracks.length) {\r\n            audioTrack = audioTracks[0];\r\n        }\r\n        \r\n        let videoTracks = stream.getVideoTracks();\r\n        if (videoTracks.length) {\r\n            videoTrack = videoTracks[0];\r\n        }\r\n        \r\n        \r\n        let newDestination=null;\r\n        //マイクからの音量に増幅を掛ける（新しいストリームを新規に作成）\r\n        if (audioTrack!==null) {\r\n            const micSource = _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.c_audioContext.createMediaStreamSource(stream);\r\n            newDestination = _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.c_audioContext.createMediaStreamDestination();\r\n            micSource.connect(c_gainNode);\r\n            c_gainNode.connect(newDestination);\r\n        }\r\n        \r\n        //新規に作成した音声ストリームに、映像ストリームを付加\r\n        _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream = null;\r\n\r\n        if(newDestination===null){\r\n            if (videoTrack!==null) {\r\n                _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream = stream;\r\n            }\r\n        }else{\r\n            if (videoTrack!==null) {\r\n                newDestination.stream.addTrack(videoTrack);\r\n                _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream = newDestination.stream;\r\n            }else{\r\n                _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream = newDestination.stream;\r\n            }\r\n        }\r\n        \r\n        \r\n        // 送出許可されたもののみを有効にする\r\n        let flg=false;\r\n        if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemMic_SW){\r\n            if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemMic_SW.value!=0){\r\n                flg=true;\r\n            }\r\n        }\r\n        changAbleStream(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream.getAudioTracks(),flg)\r\n        \r\n        \r\n        \r\n        \r\n        \r\n        flg=false;\r\n        if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemVideo_SW){\r\n            if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemVideo_SW.value!=0){\r\n                flg=true;\r\n            }\r\n        }\r\n        changAbleStream(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream.getVideoTracks(),flg)\r\n        \r\n        \r\n        \r\n        \r\n        \r\n        if(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream !== null){\r\n            \r\n            //ストリーム保存\r\n            //const mediaRecorder = new MediaRecorder(G.localStream);\r\n            \r\n            \r\n            //ブラウザ上に表示する\r\n            if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemVideo){\r\n                try {\r\n                    _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemVideo.srcObject = _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream;\r\n                } catch (error) {\r\n                    let url = window.URL.createObjectURL(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.localStream);\r\n                    _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemVideo.prop('src', url); // video要素のsrcに設定することで、映像を表示する\r\n                }\r\n            }\r\n            \r\n            //録音に通知\r\n            if(_udonRecordVoice_js__WEBPACK_IMPORTED_MODULE_2__.mediaRecorder!==null){\r\n                (0,_udonRecordVoice_js__WEBPACK_IMPORTED_MODULE_2__.recreateAudioOutputStream)();\r\n            }\r\n        }\r\n\r\n        \r\n    }).then(function() {\r\n        new Promise(function(resolve) {\r\n          //Ghtml.elemVideo.onloadedmetadata = resolve;\r\n        });\r\n    }).then(function() {\r\n        getCurrentSettings(); // 今の設定(初期状態)を変数に保存\r\n        \r\n        \r\n        CheckEnable_videoTrack(triggerElem , 3);\r\n        \r\n        \r\n        _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.c_audioContext.resume().then(() => { console.log('Playback audioContext resumed successfully');}); //Chromeのセキュリティ設定\r\n        \r\n    }).then(function() {\r\n        \r\n        \r\n        for (let key in _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.connectedDatas) {\r\n           let flg=0;\r\n           if (key in _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.connectedCalls){\r\n              let conn = _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.connectedCalls[key];\r\n              if(conn.open) {\r\n                  //conn.replaceStream(G.localStream);\r\n                  //flg=1;\r\n                  conn.close(true);\r\n              }\r\n           }\r\n           if(flg==0){\r\n                  (0,_udonWebRTC_js__WEBPACK_IMPORTED_MODULE_3__.sendStreamToPeer)(key); // 相手へのデータ通信接続を開始する\r\n                   // connectedCalls[key]の内容は更新される\r\n           }\r\n        }\r\n        \r\n    }).then(function() { // 終了処理\r\n        startVideo_functionEnd(); \r\n    }).catch(function(err) { // エラー発生時\r\n      console.log(err.name + \"[]: \" + err.message);\r\n    });\r\n  \r\n  \r\n  });\r\n  \r\n  \r\n  //------- 終了処理\r\n  function startVideo_functionEnd(){\r\n      setTimeout(function(){resurrectionBtnElem(triggerElem)}, 1000);\r\n  }\r\n}\r\n\r\n\r\n\r\nfunction stopVideo(triggerElem = null){\r\n  getCurrentSettings(); // 今の設定(初期状態)を変数に保存\r\n  \r\n  if (videoTrack) {\r\n    videoTrack.stop();\r\n  }\r\n  if (audioTrack) {\r\n    audioTrack.stop();\r\n  }\r\n  \r\n  videoTrack = null;\r\n  audioTrack = null;\r\n  \r\n  \r\n  \r\n  for (let key in _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.connectedCalls) {\r\n       let conn = _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.connectedCalls[key];\r\n       if(conn.open) {\r\n           conn.close(true);\r\n       }\r\n       delete _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_1__.G.connectedCalls[key];\r\n  }\r\n  \r\n  \r\n  resurrectionBtnElem(triggerElem);\r\n};\r\n\r\n\r\n\r\n\r\nfunction changAbleStream(streamTracks , enableFlg){\r\n    // 渡されたストリームのトラックに、送出許可を設定する\r\n    if(streamTracks){\r\n        if (streamTracks.length) {\r\n            streamTracks[0].enabled = enableFlg;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction resurrectionBtnElem(triggerElems){\r\n    let tgtary;\r\n    if(triggerElems.foreach){\r\n        tgtary=triggerElems\r\n    }else{\r\n        tgtary=[triggerElems];\r\n    }\r\n    tgtary.forEach(triggerElem => {\r\n        if(typeof(triggerElem)==\"object\"){\r\n          if(triggerElem.type){\r\n            if(triggerElem.type=\"button\"){\r\n              if(triggerElem.disabled){\r\n                triggerElem.removeAttribute(\"disabled\");\r\n              }\r\n            }\r\n          }\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction CheckEnable_videoTrack(triggerElem = null , loop=0){\r\n    let flg=loop;\r\n    if(videoTrack){\r\n        flg -= 1;\r\n    }\r\n    \r\n    if(flg<0){\r\n        resurrectionBtnElem(triggerElem);\r\n    }else{\r\n        setTimeout(function(){CheckEnable_videoTrack(triggerElem , flg)}, 1000);\r\n    }\r\n}\r\n\r\nfunction initVideoConstraints(triggerElem = null){  // ストリームのon/off制御\r\n   let flg=0;\r\n   \r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW){\r\n       if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemStream_SW.value==0){ //Off\r\n           getCurrentSettings();\r\n           if(videoConstraints){\r\n               videoConstraints = false;\r\n               flg=1;\r\n           }\r\n           if(audioConstraints){\r\n               audioConstraints = false;\r\n               flg=1;\r\n           }\r\n           if(flg!=0){\r\n               stopVideo(triggerElem);\r\n           }\r\n       }else{   // if(Ghtml.elemStream_SW.value!=0){ //On\r\n           if(!videoConstraints){\r\n               buildVideoConstraintsJSON();\r\n               changeVideoConstraintsPt();\r\n               flg=1;\r\n           }\r\n           if(!audioConstraints){\r\n               buildAudioConstraintsJSON();\r\n               changeAudioConstraintsPt();\r\n               flg=1;\r\n           }\r\n           if(flg!=0){\r\n               startVideo(triggerElem);\r\n\r\n               \r\n               if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_VideoFrameRate){\r\n                   _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_VideoFrameRate.value = videoConstraints.frameRate;\r\n                   //update_elemRange_VideoFrameRateCurVal();\r\n                   _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_VideoFrameRate.dispatchEvent(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.c_elemEvent_input);\r\n               }\r\n               \r\n               \r\n\r\n           }\r\n\r\n       }\r\n       \r\n   }\r\n   \r\n   if(flg==1){\r\n       //変更あり\r\n   }\r\n}\r\n\r\nfunction changeAudioConstraintsPt(){\r\n   let flg=0;\r\n   \r\n   if(audioConstraints){\r\n         \r\n         if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemCheckBox_micProperties){\r\n         \r\n             \r\n             for (let i = 0; i < _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemCheckBox_micProperties.length; i++){\r\n                 \r\n                 switch (_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemCheckBox_micProperties[i].value) {\r\n                   case \"again\":\r\n                     if(audioConstraints.autoGainControl != _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemCheckBox_micProperties[i].checked ){ \r\n                         audioConstraints.autoGainControl = _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemCheckBox_micProperties[i].checked;\r\n                         flg=1;\r\n                     }\r\n                   break;\r\n                   case \"noize\":\r\n                     if(audioConstraints.noiseSuppression != _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemCheckBox_micProperties[i].checked ){ \r\n                         audioConstraints.noiseSuppression = _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemCheckBox_micProperties[i].checked;\r\n                         flg=1;\r\n                     }\r\n                   break;\r\n                   default:\r\n                   break;\r\n                 }\r\n                 \r\n             }\r\n\r\n         }\r\n         \r\n         if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRadio_micEchoCancel){\r\n             let strvl =\"\";\r\n             for (let i = 0; i < _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRadio_micEchoCancel.length; i++){\r\n                 if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRadio_micEchoCancel[i].checked){ \r\n                     strvl = _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRadio_micEchoCancel[i].value; break;\r\n                 }\r\n             }\r\n             \r\n             if(strvl==\"none\"){\r\n                 if(audioConstraints.echoCancellation){\r\n                     audioConstraints.echoCancellation=false;\r\n                     flg=1;\r\n                 }\r\n             }else{\r\n                 if(!audioConstraints.echoCancellation){\r\n                     audioConstraints.echoCancellation=true;\r\n                     flg=1;\r\n                 }\r\n                 if(audioConstraints.echoCancellationType != strvl){\r\n                     audioConstraints.echoCancellationType = strvl;\r\n                     flg=1;  // \"system\" or \"browser\"\r\n                 }\r\n             }\r\n         }\r\n         \r\n   }\r\n   \r\n   return flg;\r\n}\r\nfunction changeAudioConstraints(triggerElem = null){\r\n   let flg=changeAudioConstraintsPt();\r\n   if(flg==1){\r\n       if(audioTrack){\r\n           if(audioConstraints){\r\n                   audioTrack.applyConstraints(audioConstraints); // 設定変更を実施\r\n           }\r\n       }\r\n   }\r\n}\r\n\r\n\r\nfunction changeVideoConstraintsPt(){\r\n   let flg=0;\r\n   \r\n   if(videoConstraints){\r\n         if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_VideoFrameRate){\r\n         \r\n             if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_VideoFrameRate.value != videoConstraints.frameRate){\r\n                 if(videoConstraints.frameRate.ideal){\r\n                     videoConstraints.frameRate.ideal = Number(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_VideoFrameRate.value);\r\n                 }else{\r\n                     videoConstraints.frameRate = Number(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_VideoFrameRate.value);\r\n                 }\r\n                 if(videoConstraints.frameRate.max){\r\n                     videoConstraints.frameRate.max = Number(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_0__.Ghtml.elemRange_VideoFrameRate.value)+5;\r\n                 }\r\n                 flg=1;\r\n             }\r\n         }\r\n   }\r\n   \r\n   return flg;\r\n}\r\nfunction changeVideoConstraints(triggerElem = null){\r\n   let flg=changeVideoConstraintsPt();\r\n   if(flg==1){\r\n       if(videoTrack){\r\n           if(videoConstraints){\r\n                   changeVideoConstraints_delay();\r\n           }\r\n       }\r\n   }\r\n}\r\nlet changeVideoConstraints_id=0; // 0:実行可能、それ以外:実行保留期間中\r\nlet changeVideoConstraints_flg=0; // 0以外：Constraintsの設定変更要求あり\r\nfunction changeVideoConstraints_delay(mode=0){\r\n    if(mode==0){\r\n         changeVideoConstraints_flg=1; //更新すべきﾃﾞｰﾀがある\r\n    }\r\n    if(changeVideoConstraints_flg!=0){\r\n        if(changeVideoConstraints_id==0){ //実行可能\r\n            changeVideoConstraints_flg=0;\r\n            videoTrack.applyConstraints(videoConstraints); // 設定変更を実施\r\n            getCurrentSettings(); // 設定をテキストに保存\r\n            changeVideoConstraints_id = setTimeout(function(){\r\n                changeVideoConstraints_id=0;\r\n                changeVideoConstraints_delay(1);    }, 1000); // 処理実行直後1秒間は続けて処理を行わない\r\n        }\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRTtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkscUZBQThCO0FBQzFDO0FBQ0EsZ0JBQWdCLDJGQUFvQztBQUNwRDtBQUNBLCtEQUErRCwyRkFBb0M7QUFDbkcsa0JBQWtCO0FBQ2xCLHlEQUF5RCwyRkFBb0M7QUFDN0Y7QUFDQTtBQUNBLDZEQUE2RCwyRkFBb0M7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQSwyREFBMkQ7QUFDM0Qsa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQSxxREFBcUQsU0FBUztBQUM5RDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yMDIxMDExMV93ZWJjaGF0Ly4vc3JjL3Vkb25NZWRpYVN0cmVhbS5qcz9lOWQxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdodG1sICxjX2F1ZGlvQ29udGV4dCxjX2VsZW1FdmVudF9pbnB1dCB9ICBmcm9tIFwiLi91ZG9uQ2hhdEhUTUxfZWxlbWVudHMuanNcIlxyXG5pbXBvcnQgeyBHIH0gIGZyb20gXCIuL215R2xvYmFsUGFyYW1zLmpzXCI7XHJcbmltcG9ydCB7IG1lZGlhUmVjb3JkZXIgLHJlY3JlYXRlQXVkaW9PdXRwdXRTdHJlYW0gfSBmcm9tIFwiLi91ZG9uUmVjb3JkVm9pY2UuanNcIjtcclxuaW1wb3J0IHsgc2VuZFN0cmVhbVRvUGVlciB9IGZyb20gXCIuL3Vkb25XZWJSVEMuanNcIjtcclxuXHJcbmV4cG9ydCB7IGh0bWxFbGVtSW5pdF9NZWRpYVN0cmVhbSAgfVxyXG5leHBvcnQgeyBmb3JjZU9uRWxlbVN0cmVhbV9TVyB9OyBcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLy8gPT09PT09PT09PT09IOWIneacn+WMluWun+ihjCA9PT09PT09PT09PT09PT09XHJcblxyXG5cclxubGV0IG15TmF2aWdhdG9yTWVkaWFEZXZpY2VzO1xyXG5cclxubGV0IHZpZGVvVHJhY2sgPSBudWxsO1xyXG5sZXQgYXVkaW9UcmFjayA9IG51bGw7XHJcblxyXG5jb25zdCBjX2dhaW5Ob2RlID0gY19hdWRpb0NvbnRleHQuY3JlYXRlR2FpbigpOyAvLyDjg57jgqTjgq/pn7Pph4/vvIjmhJ/luqbvvInoqr/mlbTnlKhcclxuXHJcblxyXG5cclxuLy8g44Kr44Oh44Op77yP44Oe44Kk44Kv44Gr44Ki44Kv44K744K544GZ44KL44Gf44KB44Gu44Oh44K944OD44OJ44KS5Y+W5b6X44GX44Gm44GK44GPXHJcbm15TmF2aWdhdG9yTWVkaWFEZXZpY2VzID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyB8fCAoKG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEgfHwgbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSkgPyB7XHJcbiAgIGdldFVzZXJNZWRpYTogZnVuY3Rpb24oYykge1xyXG4gICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih5LCBuKSB7XHJcbiAgICAgICAobmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSB8fFxyXG4gICAgICAgIG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEpLmNhbGwobmF2aWdhdG9yLCBjLCB5LCBuKTtcclxuICAgICB9KTtcclxuICAgfVxyXG59IDogbnVsbCk7XHJcbmlmICghbXlOYXZpZ2F0b3JNZWRpYURldmljZXMpIHtcclxuICBjb25zb2xlLmxvZyhcImdldFVzZXJNZWRpYSgpIG5vdCBzdXBwb3J0ZWQuXCIpO1xyXG59XHJcblxyXG5cclxuLy8tLS1cclxubGV0IHZpZGVvQ29uc3RyYWludHMgPSBudWxsO1xyXG5sZXQgdmlkZW9Db25zdHJhaW50c1RleHQgPSBcIlwiO1xyXG5sZXQgYXVkaW9Db25zdHJhaW50cyA9IG51bGw7XHJcbmxldCBhdWRpb0NvbnN0cmFpbnRzVGV4dCA9IFwiXCI7XHJcblxyXG5cclxudmlkZW9Db25zdHJhaW50c1RleHQgPSAneyBcIndpZHRoXCI6IHtcIm1heFwiOjMyMH0sIFwiaGVpZ2h0XCI6IHtcIm1heFwiOjI0MH0gLFwiZnJhbWVSYXRlXCI6IHsgXCJpZGVhbFwiOiA1LCBcIm1heFwiOiAxMCB9IH0nO1xyXG5hdWRpb0NvbnN0cmFpbnRzVGV4dCA9ICd7IFwic2FtcGxlU2l6ZVwiOiA4LCBcImNoYW5uZWxDb3VudFwiOiAxLCBcImVjaG9DYW5jZWxsYXRpb25cIjogZmFsc2V9JztcclxuXHJcblxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZnVuY3Rpb24gaHRtbEVsZW1Jbml0X01lZGlhU3RyZWFtKCl7XHJcblxyXG4gICAvL2VsZW1SYW5nZV9taWNyb3Bob25lTGV2ZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXktbWljcm9waG9uZUxldmVsJyk7XHJcbiAgIC8vZWxlbVJhbmdlX21pY3JvcGhvbmVMZXZlbEN1clZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteS1taWNyb3Bob25lTGV2ZWxfY3VycmVudFZhbHVlJyk7XHJcbiAgIGlmKEdodG1sLmVsZW1SYW5nZV9taWNyb3Bob25lTGV2ZWwpe1xyXG4gICAgIEdodG1sLmVsZW1SYW5nZV9taWNyb3Bob25lTGV2ZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgdXBkYXRlX2VsZW1SYW5nZV9taWNyb3Bob25lTGV2ZWxDdXJWYWwoKTtcclxuICAgICAgICAgXHJcbiAgICAgICAgIGlmKGNfZ2Fpbk5vZGUpe1xyXG4gICAgICAgICAgICAgY19nYWluTm9kZS5nYWluLnZhbHVlID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgXHJcbiAgICAgfSk7XHJcbiAgICAgXHJcbiAgICAgR2h0bWwuZWxlbVJhbmdlX21pY3JvcGhvbmVMZXZlbC52YWx1ZSA9IGNfZ2Fpbk5vZGUuZ2Fpbi52YWx1ZTsgLy8g5Yid5pyf5YCkXHJcbiAgICAgR2h0bWwuZWxlbVJhbmdlX21pY3JvcGhvbmVMZXZlbC5kaXNwYXRjaEV2ZW50KGNfZWxlbUV2ZW50X2lucHV0KTtcclxuICAgfVxyXG4gICBcclxuICAgLy9lbGVtTWljX1NXID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteS1taWNfc3cnKTtcclxuICAgaWYoR2h0bWwuZWxlbU1pY19TVyl7XHJcbiAgICAgR2h0bWwuZWxlbU1pY19TVy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICBlLnRhcmdldC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgICAgICAgaWYoZS50YXJnZXQudmFsdWUhPTApe1xyXG4gICAgICAgICAgICAgZS50YXJnZXQudmFsdWU9MDtcclxuICAgICAgICAgICAgIGUudGFyZ2V0LmlubmVyVGV4dCA9IFwi6Z+z5aOw6YCB5L+h44KS6ZaL5aeLXCI7XHJcbiAgICAgICAgICAgICBkaXNwSW5mb1N0cmVhbVN0YXR1cygpOyAvL+mfs+WjsOWBnOatouS4rVxyXG4gICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICBpZihHLmxvY2FsU3RyZWFtKXtcclxuICAgICAgICAgICAgICAgICBjaGFuZ0FibGVTdHJlYW0oRy5sb2NhbFN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLGZhbHNlKTsvL09mZlxyXG4gICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlPTE7XHJcbiAgICAgICAgICAgICBlLnRhcmdldC5pbm5lclRleHQgPSBcIumfs+WjsOmAgeS/oeOCkuWBnOatolwiO1xyXG4gICAgICAgICAgICAgZGlzcEluZm9TdHJlYW1TdGF0dXMoKTsgLy/pn7Plo7DpgIHlh7rkuK1cclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgaWYoRy5sb2NhbFN0cmVhbSl7XHJcbiAgICAgICAgICAgICAgICAgY2hhbmdBYmxlU3RyZWFtKEcubG9jYWxTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKSx0cnVlKTsvL09uXHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZS50YXJnZXQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgfSk7XHJcbiAgIH1cclxuXHJcbiAgIFxyXG5cclxuICAgLy9lbGVtQ2hlY2tCb3hfbWljUHJvcGVydGllcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKFwibXktY2hlY2tib3hfbWljcm9waG9uZVByb3BzXCIpO1xyXG4gICBpZihHaHRtbC5lbGVtQ2hlY2tCb3hfbWljUHJvcGVydGllcyl7XHJcbiAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBHaHRtbC5lbGVtQ2hlY2tCb3hfbWljUHJvcGVydGllcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICBHaHRtbC5lbGVtQ2hlY2tCb3hfbWljUHJvcGVydGllc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgYWxsRGlzYWJsZWRFbGVtZW50KEdodG1sLmVsZW1DaGVja0JveF9taWNQcm9wZXJ0aWVzLHRydWUpO1xyXG4gICAgICAgICBjaGFuZ2VBdWRpb0NvbnN0cmFpbnRzKCk7XHJcbiAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oZSl7IGFsbERpc2FibGVkRWxlbWVudChHaHRtbC5lbGVtQ2hlY2tCb3hfbWljUHJvcGVydGllcyxmYWxzZSk7fSwgMTAwMCk7IC8vIOWHpueQhuWun+ihjOebtOW+jDHnp5LplpPjga/ntprjgZHjgablh6bnkIbjgpLooYzjgo/jgarjgYRcclxuICAgICAgIH0pO1xyXG4gICAgIH1cclxuICAgfVxyXG4gICAvL2VsZW1SYWRpb19taWNFY2hvQ2FuY2VsPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShcIm15LXJhZGlvX21pY3JvcGhvbmVFY2hvQ2FuY2VsXCIpO1xyXG4gICBpZihHaHRtbC5lbGVtUmFkaW9fbWljRWNob0NhbmNlbCl7XHJcbiAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBHaHRtbC5lbGVtUmFkaW9fbWljRWNob0NhbmNlbC5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICBHaHRtbC5lbGVtUmFkaW9fbWljRWNob0NhbmNlbFtpXS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgYWxsRGlzYWJsZWRFbGVtZW50KEdodG1sLmVsZW1SYWRpb19taWNFY2hvQ2FuY2VsLHRydWUpO1xyXG4gICAgICAgICBjaGFuZ2VBdWRpb0NvbnN0cmFpbnRzKCk7XHJcbiAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oZSl7IGFsbERpc2FibGVkRWxlbWVudChHaHRtbC5lbGVtUmFkaW9fbWljRWNob0NhbmNlbCxmYWxzZSk7fSwgMTAwMCk7IC8vIOWHpueQhuWun+ihjOebtOW+jDHnp5LplpPjga/ntprjgZHjgablh6bnkIbjgpLooYzjgo/jgarjgYRcclxuICAgICAgIH0pO1xyXG4gICAgIH1cclxuICAgfVxyXG4gICBcclxuICAgXHJcbiAgICBcclxuICAgIC8vZWxlbVZpZGVvX1NXID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteS12aWRlb19zdycpO1xyXG4gICAgaWYoR2h0bWwuZWxlbVZpZGVvX1NXKXtcclxuICAgICAgR2h0bWwuZWxlbVZpZGVvX1NXLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICBlLnRhcmdldC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgICAgICAgIGlmKGUudGFyZ2V0LnZhbHVlIT0wKXtcclxuICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZT0wO1xyXG4gICAgICAgICAgICAgIGUudGFyZ2V0LmlubmVyVGV4dCA9IFwi5pig5YOP6YCB5L+h44KS6ZaL5aeLXCI7XHJcbiAgICAgICAgICAgICAgZGlzcEluZm9TdHJlYW1TdGF0dXMoKTtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICBpZihHLmxvY2FsU3RyZWFtKXtpZihHLmxvY2FsU3RyZWFtLmdldFZpZGVvVHJhY2tzKXsgXHJcbiAgICAgICAgICAgICAgICAgIGNoYW5nQWJsZVN0cmVhbShHLmxvY2FsU3RyZWFtLmdldFZpZGVvVHJhY2tzKCksZmFsc2UpOyB9fSAvL09mZlxyXG4gICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWU9MTtcclxuICAgICAgICAgICAgICBlLnRhcmdldC5pbm5lclRleHQgPSBcIuaYoOWDj+mAgeS/oeOCkuWBnOatolwiO1xyXG4gICAgICAgICAgICAgIGRpc3BJbmZvU3RyZWFtU3RhdHVzKCk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgaWYoRy5sb2NhbFN0cmVhbSl7aWYoRy5sb2NhbFN0cmVhbS5nZXRWaWRlb1RyYWNrcyl7IFxyXG4gICAgICAgICAgICAgICAgICBjaGFuZ0FibGVTdHJlYW0oRy5sb2NhbFN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLHRydWUpOyB9fSAvL09uXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlLnRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9lbGVtUmFuZ2VfVmlkZW9GcmFtZVJhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXktdmlkZW9fcmF0ZScpO1xyXG4gICAgLy9lbGVtUmFuZ2VfVmlkZW9GcmFtZVJhdGVDdXJWYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXktdmlkZW9fcmF0ZV9jdXJyZW50VmFsdWUnKTtcclxuICAgIGlmKEdodG1sLmVsZW1SYW5nZV9WaWRlb0ZyYW1lUmF0ZSl7XHJcbiAgICAgIEdodG1sLmVsZW1SYW5nZV9WaWRlb0ZyYW1lUmF0ZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgdXBkYXRlX2VsZW1SYW5nZV9WaWRlb0ZyYW1lUmF0ZUN1clZhbCgpO1xyXG4gICAgICAgICAgY2hhbmdlVmlkZW9Db25zdHJhaW50cygpO1xyXG4gICAgICB9KTtcclxuICAgICAgR2h0bWwuZWxlbVJhbmdlX1ZpZGVvRnJhbWVSYXRlLmRpc3BhdGNoRXZlbnQoY19lbGVtRXZlbnRfaW5wdXQpO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG5cclxuXHJcbiAgIC8vZWxlbVN0cmVhbV9TVyA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXktc3RyZWFtX3N3Jyk7XHJcbiAgIC8vZWxlbVN0cmVhbV9TV19Nc2cgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215LXN0cmVhbV9zd19tZXNzYWdlJyk7XHJcbiAgIGlmKEdodG1sLmVsZW1TdHJlYW1fU1cpe1xyXG4gICAgIEdodG1sLmVsZW1TdHJlYW1fU1cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgR2h0bWwuZWxlbVN0cmVhbV9TVy5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgICAgICAgdG9nZ2xlRWxlbVN0cmVhbV9TVygpO1xyXG4gICAgIH0pO1xyXG4gICB9XHJcblxyXG5cclxufVxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gdXBkYXRlX2VsZW1SYW5nZV9taWNyb3Bob25lTGV2ZWxDdXJWYWwoKXtcclxuICAgaWYoR2h0bWwuZWxlbVJhbmdlX21pY3JvcGhvbmVMZXZlbCl7XHJcbiAgICAgICAgIGlmKEdodG1sLmVsZW1SYW5nZV9taWNyb3Bob25lTGV2ZWxDdXJWYWwpe1xyXG4gICAgICAgICAgICAgR2h0bWwuZWxlbVJhbmdlX21pY3JvcGhvbmVMZXZlbEN1clZhbC5pbm5lclRleHQgPSBHaHRtbC5lbGVtUmFuZ2VfbWljcm9waG9uZUxldmVsLnZhbHVlO1xyXG4gICAgICAgICB9XHJcbiAgIH1cclxufVxyXG5mdW5jdGlvbiB1cGRhdGVfZWxlbVJhbmdlX1ZpZGVvRnJhbWVSYXRlQ3VyVmFsKCl7XHJcbiAgIGlmKEdodG1sLmVsZW1SYW5nZV9WaWRlb0ZyYW1lUmF0ZSl7XHJcbiAgICAgICAgIGlmKEdodG1sLmVsZW1SYW5nZV9WaWRlb0ZyYW1lUmF0ZUN1clZhbCl7XHJcbiAgICAgICAgICAgICBHaHRtbC5lbGVtUmFuZ2VfVmlkZW9GcmFtZVJhdGVDdXJWYWwuaW5uZXJUZXh0ID0gR2h0bWwuZWxlbVJhbmdlX1ZpZGVvRnJhbWVSYXRlLnZhbHVlO1xyXG4gICAgICAgICB9XHJcbiAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWxsRGlzYWJsZWRFbGVtZW50KHRndCxmbGcpe1xyXG4gICBpZih0Z3Qpe2lmKHRndC5sZW5ndGgpe1xyXG4gICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0Z3QubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgIGlmKGZsZyl7XHJcbiAgICAgICAgICAgICAgIHRndFtpXS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgdGd0W2ldLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH1cclxuICAgfX1cclxufVxyXG5cclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZnVuY3Rpb24gZm9yY2VPbkVsZW1TdHJlYW1fU1coKXtcclxuICAgIGlmKEdodG1sLmVsZW1TdHJlYW1fU1cudmFsdWU9PTApe1xyXG4gICAgICAgIHRvZ2dsZUVsZW1TdHJlYW1fU1coKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB0b2dnbGVFbGVtU3RyZWFtX1NXKCl7ICAvLyDmjqXntprjga7liJ3mnJ/ljJbvvIhPTi9PRkbvvIlcclxuXHJcbiAgICAgICAgIGlmKEdodG1sLmVsZW1TdHJlYW1fU1cudmFsdWUhPTApe1xyXG4gICAgICAgICAgICAgR2h0bWwuZWxlbVN0cmVhbV9TVy52YWx1ZT0wO1xyXG4gICAgICAgICAgICAgR2h0bWwuZWxlbVN0cmVhbV9TVy5pbm5lclRleHQgPSBcIumAmuS/oeWGjemWi1wiO1xyXG4gICAgICAgICAgICAgZGlzcEluZm9TdHJlYW1TdGF0dXMoKTtcclxuICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICBHaHRtbC5lbGVtU3RyZWFtX1NXLnZhbHVlPTE7XHJcbiAgICAgICAgICAgICBHaHRtbC5lbGVtU3RyZWFtX1NXLmlubmVyVGV4dCA9IFwi6YCa5L+h5YGc5q2iXCI7XHJcbiAgICAgICAgICAgICBkaXNwSW5mb1N0cmVhbVN0YXR1cygpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIFxyXG4gICAgICAgICBpbml0VmlkZW9Db25zdHJhaW50cyhHaHRtbC5lbGVtU3RyZWFtX1NXKTtcclxufVxyXG5mdW5jdGlvbiBkaXNwSW5mb1N0cmVhbVN0YXR1cygpe1xyXG4gICBpZihHaHRtbC5lbGVtU3RyZWFtX1NXKXtcclxuICAgICBpZihHaHRtbC5lbGVtU3RyZWFtX1NXLnZhbHVlPT0wKXtcclxuICAgICAgICAgICAgIGlmKEdodG1sLmVsZW1TdHJlYW1fU1dfTXNnKXtHaHRtbC5lbGVtU3RyZWFtX1NXX01zZy5pbm5lclRleHQ9XCLlgZzmraLkuK1cIjt9XHJcbiAgICAgICAgICAgICBpZihHaHRtbC5lbGVtTWljX1NUVFMpICB7R2h0bWwuZWxlbU1pY19TVFRTLmlubmVyVGV4dCAgPVwiXCI7fVxyXG4gICAgICAgICAgICAgaWYoR2h0bWwuZWxlbVZpZGVvX1NUVFMpe0dodG1sLmVsZW1WaWRlb19TVFRTLmlubmVyVGV4dD1cIlwiO31cclxuICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgIGlmKEdodG1sLmVsZW1TdHJlYW1fU1dfTXNnKXtHaHRtbC5lbGVtU3RyZWFtX1NXX01zZy5pbm5lclRleHQ9XCLpgJrkv6HkuK1cIjt9XHJcbiAgICAgICAgICAgICBpZihHaHRtbC5lbGVtTWljX1NXKXtpZihHaHRtbC5lbGVtTWljX1NUVFMpe1xyXG4gICAgICAgICAgICAgICAgIGlmKEdodG1sLmVsZW1NaWNfU1cudmFsdWUhPTApICAge0dodG1sLmVsZW1NaWNfU1RUUy5pbm5lclRleHQgID1cIumfs+WjsOmAgeWHuuS4rVwiO31cclxuICAgICAgICAgICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtHaHRtbC5lbGVtTWljX1NUVFMuaW5uZXJUZXh0ICA9XCLpn7Plo7DlgZzmraLkuK1cIjt9XHJcbiAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgaWYoR2h0bWwuZWxlbVZpZGVvX1NXKXtpZihHaHRtbC5lbGVtVmlkZW9fU1RUUyl7XHJcbiAgICAgICAgICAgICAgICAgaWYoR2h0bWwuZWxlbVZpZGVvX1NXLnZhbHVlIT0wKSB7R2h0bWwuZWxlbVZpZGVvX1NUVFMuaW5uZXJUZXh0ICA9XCLmmKDlg4/pgIHlh7rkuK1cIjt9XHJcbiAgICAgICAgICAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICB7R2h0bWwuZWxlbVZpZGVvX1NUVFMuaW5uZXJUZXh0ICA9XCLmmKDlg4/lgZzmraLkuK1cIjt9XHJcbiAgICAgICAgICAgICB9fVxyXG4gICAgIH1cclxuICAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkVmlkZW9Db25zdHJhaW50c0pTT04oKSB7XHJcbiAgdHJ5IHtcclxuICAgIHZpZGVvQ29uc3RyYWludHMgPSBKU09OLnBhcnNlKHZpZGVvQ29uc3RyYWludHNUZXh0KTtcclxuICB9IGNhdGNoKGVycm9yKSB7XHJcbiAgICBoYW5kbGVFcnJvcihlcnJvcik7XHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIGJ1aWxkQXVkaW9Db25zdHJhaW50c0pTT04oKSB7XHJcbiAgdHJ5IHtcclxuICAgIGF1ZGlvQ29uc3RyYWludHMgPSBKU09OLnBhcnNlKGF1ZGlvQ29uc3RyYWludHNUZXh0KTtcclxuICB9IGNhdGNoKGVycm9yKSB7XHJcbiAgICBoYW5kbGVFcnJvcihlcnJvcik7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDdXJyZW50U2V0dGluZ3MoKSB7XHJcbiAgaWYgKHZpZGVvVHJhY2spIHtcclxuICAgIHZpZGVvQ29uc3RyYWludHNUZXh0ID0gSlNPTi5zdHJpbmdpZnkodmlkZW9UcmFjay5nZXRTZXR0aW5ncygpLCBudWxsLCAyKTtcclxuICB9XHJcbiAgaWYgKGF1ZGlvVHJhY2spIHtcclxuICAgIGF1ZGlvQ29uc3RyYWludHNUZXh0ID0gSlNPTi5zdHJpbmdpZnkoYXVkaW9UcmFjay5nZXRTZXR0aW5ncygpLCBudWxsLCAyKTtcclxuICB9XHJcbn1cclxuXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5cclxuZnVuY3Rpb24gc3RhcnRWaWRlbyh0cmlnZ2VyRWxlbSA9IG51bGwpIHtcclxuICBcclxuICAvL+ODh+ODkOOCpOOCueeiuuiqjVxyXG4gIGxldCBlbmFibGVWaWRlb0ZsZyA9MDtcclxuICBsZXQgZW5hYmxlQXVkaW9GbGcgPTA7XHJcbiAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKClcclxuICAudGhlbihmdW5jdGlvbihkZXZpY2VzKSB7IC8vIOaIkOWKn+aZglxyXG4gICAgICBkZXZpY2VzLmZvckVhY2goZnVuY3Rpb24oZGV2aWNlKSB7XHJcbiAgICAgICAgIGlmKGRldmljZS5raW5kPT1cInZpZGVvaW5wdXRcIil7IGVuYWJsZVZpZGVvRmxnPTE7IH1cclxuICAgICAgICAgaWYoZGV2aWNlLmtpbmQ9PVwiYXVkaW9pbnB1dFwiKXsgZW5hYmxlQXVkaW9GbGc9MTsgfVxyXG4gICAgICB9KTtcclxuICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHsgLy8g44Ko44Op44O855m655Sf5pmCXHJcbiAgICAgIGNvbnNvbGUubG9nKGVyci5uYW1lICsgXCJbZW51bWVyYXRlRGV2aWNlc106IFwiICsgZXJyLm1lc3NhZ2UpO1xyXG4gIH0pLnRoZW4oIGZ1bmN0aW9uKHN0cmVhbSkge1xyXG4gICAgXHJcbiAgICBcclxuICAgIGlmKChlbmFibGVWaWRlb0ZsZytlbmFibGVBdWRpb0ZsZyk9PTApe1xyXG4gICAgICAgIHN0YXJ0VmlkZW9fZnVuY3Rpb25FbmQoKTsgLy8g57WC5LqG5Yem55CGXHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgLy9lbmFibGVWaWRlb0ZsZz0wO1xyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgXHJcbiAgICAvLyDjgqvjg6Hjg6nvvI/jg57jgqTjgq/jga7jgrnjg4jjg6rjg7zjg6DjgpLlj5blvpfjgZnjgotcclxuICAgIFxyXG4gICAgLy9uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XHJcbiAgICAvLyAgICB2aWRlbzogdmlkZW9Db25zdHJhaW50cyAsXHJcbiAgICAvLyAgICBhdWRpbzogYXVkaW9Db25zdHJhaW50c1xyXG4gICAgLy99KS50aGVuKCBmdW5jdGlvbihzdHJlYW0pIFxyXG4gICAgXHJcbiAgICBsZXQgZW5hYmxlRGV2aWNlQXJ5ID0ge307XHJcbiAgICBpZihlbmFibGVWaWRlb0ZsZyE9MCl7ZW5hYmxlRGV2aWNlQXJ5LnZpZGVvID0gdmlkZW9Db25zdHJhaW50czt9XHJcbiAgICBpZihlbmFibGVBdWRpb0ZsZyE9MCl7ZW5hYmxlRGV2aWNlQXJ5LmF1ZGlvID0gYXVkaW9Db25zdHJhaW50czt9XHJcbiAgICBcclxuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGVuYWJsZURldmljZUFyeVxyXG4gICAgKS50aGVuKCBmdW5jdGlvbihzdHJlYW0pIHtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgYXVkaW9UcmFja3MgPSBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKTtcclxuICAgICAgICBpZiAoYXVkaW9UcmFja3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGF1ZGlvVHJhY2sgPSBhdWRpb1RyYWNrc1swXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHZpZGVvVHJhY2tzID0gc3RyZWFtLmdldFZpZGVvVHJhY2tzKCk7XHJcbiAgICAgICAgaWYgKHZpZGVvVHJhY2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2aWRlb1RyYWNrID0gdmlkZW9UcmFja3NbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBuZXdEZXN0aW5hdGlvbj1udWxsO1xyXG4gICAgICAgIC8v44Oe44Kk44Kv44GL44KJ44Gu6Z+z6YeP44Gr5aKX5bmF44KS5o6b44GR44KL77yI5paw44GX44GE44K544OI44Oq44O844Og44KS5paw6KaP44Gr5L2c5oiQ77yJXHJcbiAgICAgICAgaWYgKGF1ZGlvVHJhY2shPT1udWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1pY1NvdXJjZSA9IGNfYXVkaW9Db250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKHN0cmVhbSk7XHJcbiAgICAgICAgICAgIG5ld0Rlc3RpbmF0aW9uID0gY19hdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1EZXN0aW5hdGlvbigpO1xyXG4gICAgICAgICAgICBtaWNTb3VyY2UuY29ubmVjdChjX2dhaW5Ob2RlKTtcclxuICAgICAgICAgICAgY19nYWluTm9kZS5jb25uZWN0KG5ld0Rlc3RpbmF0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy/mlrDopo/jgavkvZzmiJDjgZfjgZ/pn7Plo7Djgrnjg4jjg6rjg7zjg6DjgavjgIHmmKDlg4/jgrnjg4jjg6rjg7zjg6DjgpLku5jliqBcclxuICAgICAgICBHLmxvY2FsU3RyZWFtID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYobmV3RGVzdGluYXRpb249PT1udWxsKXtcclxuICAgICAgICAgICAgaWYgKHZpZGVvVHJhY2shPT1udWxsKSB7XHJcbiAgICAgICAgICAgICAgICBHLmxvY2FsU3RyZWFtID0gc3RyZWFtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGlmICh2aWRlb1RyYWNrIT09bnVsbCkge1xyXG4gICAgICAgICAgICAgICAgbmV3RGVzdGluYXRpb24uc3RyZWFtLmFkZFRyYWNrKHZpZGVvVHJhY2spO1xyXG4gICAgICAgICAgICAgICAgRy5sb2NhbFN0cmVhbSA9IG5ld0Rlc3RpbmF0aW9uLnN0cmVhbTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBHLmxvY2FsU3RyZWFtID0gbmV3RGVzdGluYXRpb24uc3RyZWFtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOmAgeWHuuioseWPr+OBleOCjOOBn+OCguOBruOBruOBv+OCkuacieWKueOBq+OBmeOCi1xyXG4gICAgICAgIGxldCBmbGc9ZmFsc2U7XHJcbiAgICAgICAgaWYoR2h0bWwuZWxlbU1pY19TVyl7XHJcbiAgICAgICAgICAgIGlmKEdodG1sLmVsZW1NaWNfU1cudmFsdWUhPTApe1xyXG4gICAgICAgICAgICAgICAgZmxnPXRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2hhbmdBYmxlU3RyZWFtKEcubG9jYWxTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKSxmbGcpXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgZmxnPWZhbHNlO1xyXG4gICAgICAgIGlmKEdodG1sLmVsZW1WaWRlb19TVyl7XHJcbiAgICAgICAgICAgIGlmKEdodG1sLmVsZW1WaWRlb19TVy52YWx1ZSE9MCl7XHJcbiAgICAgICAgICAgICAgICBmbGc9dHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjaGFuZ0FibGVTdHJlYW0oRy5sb2NhbFN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLGZsZylcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBpZihHLmxvY2FsU3RyZWFtICE9PSBudWxsKXtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8v44K544OI44Oq44O844Og5L+d5a2YXHJcbiAgICAgICAgICAgIC8vY29uc3QgbWVkaWFSZWNvcmRlciA9IG5ldyBNZWRpYVJlY29yZGVyKEcubG9jYWxTdHJlYW0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8v44OW44Op44Km44K25LiK44Gr6KGo56S644GZ44KLXHJcbiAgICAgICAgICAgIGlmKEdodG1sLmVsZW1WaWRlbyl7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIEdodG1sLmVsZW1WaWRlby5zcmNPYmplY3QgPSBHLmxvY2FsU3RyZWFtO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoRy5sb2NhbFN0cmVhbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgR2h0bWwuZWxlbVZpZGVvLnByb3AoJ3NyYycsIHVybCk7IC8vIHZpZGVv6KaB57Sg44Guc3Jj44Gr6Kit5a6a44GZ44KL44GT44Go44Gn44CB5pig5YOP44KS6KGo56S644GZ44KLXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8v6Yyy6Z+z44Gr6YCa55+lXHJcbiAgICAgICAgICAgIGlmKG1lZGlhUmVjb3JkZXIhPT1udWxsKXtcclxuICAgICAgICAgICAgICAgIHJlY3JlYXRlQXVkaW9PdXRwdXRTdHJlYW0oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcclxuICAgICAgICAgIC8vR2h0bWwuZWxlbVZpZGVvLm9ubG9hZGVkbWV0YWRhdGEgPSByZXNvbHZlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICBnZXRDdXJyZW50U2V0dGluZ3MoKTsgLy8g5LuK44Gu6Kit5a6aKOWIneacn+eKtuaFiynjgpLlpInmlbDjgavkv53lrZhcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBDaGVja0VuYWJsZV92aWRlb1RyYWNrKHRyaWdnZXJFbGVtICwgMyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgY19hdWRpb0NvbnRleHQucmVzdW1lKCkudGhlbigoKSA9PiB7IGNvbnNvbGUubG9nKCdQbGF5YmFjayBhdWRpb0NvbnRleHQgcmVzdW1lZCBzdWNjZXNzZnVsbHknKTt9KTsgLy9DaHJvbWXjga7jgrvjgq3jg6Xjg6rjg4bjgqPoqK3lrppcclxuICAgICAgICBcclxuICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIEcuY29ubmVjdGVkRGF0YXMpIHtcclxuICAgICAgICAgICBsZXQgZmxnPTA7XHJcbiAgICAgICAgICAgaWYgKGtleSBpbiBHLmNvbm5lY3RlZENhbGxzKXtcclxuICAgICAgICAgICAgICBsZXQgY29ubiA9IEcuY29ubmVjdGVkQ2FsbHNba2V5XTtcclxuICAgICAgICAgICAgICBpZihjb25uLm9wZW4pIHtcclxuICAgICAgICAgICAgICAgICAgLy9jb25uLnJlcGxhY2VTdHJlYW0oRy5sb2NhbFN0cmVhbSk7XHJcbiAgICAgICAgICAgICAgICAgIC8vZmxnPTE7XHJcbiAgICAgICAgICAgICAgICAgIGNvbm4uY2xvc2UodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgICBpZihmbGc9PTApe1xyXG4gICAgICAgICAgICAgICAgICBzZW5kU3RyZWFtVG9QZWVyKGtleSk7IC8vIOebuOaJi+OBuOOBruODh+ODvOOCv+mAmuS/oeaOpee2muOCkumWi+Wni+OBmeOCi1xyXG4gICAgICAgICAgICAgICAgICAgLy8gY29ubmVjdGVkQ2FsbHNba2V5XeOBruWGheWuueOBr+abtOaWsOOBleOCjOOCi1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9KS50aGVuKGZ1bmN0aW9uKCkgeyAvLyDntYLkuoblh6bnkIZcclxuICAgICAgICBzdGFydFZpZGVvX2Z1bmN0aW9uRW5kKCk7IFxyXG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7IC8vIOOCqOODqeODvOeZuueUn+aZglxyXG4gICAgICBjb25zb2xlLmxvZyhlcnIubmFtZSArIFwiW106IFwiICsgZXJyLm1lc3NhZ2UpO1xyXG4gICAgfSk7XHJcbiAgXHJcbiAgXHJcbiAgfSk7XHJcbiAgXHJcbiAgXHJcbiAgLy8tLS0tLS0tIOe1guS6huWHpueQhlxyXG4gIGZ1bmN0aW9uIHN0YXJ0VmlkZW9fZnVuY3Rpb25FbmQoKXtcclxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe3Jlc3VycmVjdGlvbkJ0bkVsZW0odHJpZ2dlckVsZW0pfSwgMTAwMCk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIHN0b3BWaWRlbyh0cmlnZ2VyRWxlbSA9IG51bGwpe1xyXG4gIGdldEN1cnJlbnRTZXR0aW5ncygpOyAvLyDku4rjga7oqK3lrpoo5Yid5pyf54q25oWLKeOCkuWkieaVsOOBq+S/neWtmFxyXG4gIFxyXG4gIGlmICh2aWRlb1RyYWNrKSB7XHJcbiAgICB2aWRlb1RyYWNrLnN0b3AoKTtcclxuICB9XHJcbiAgaWYgKGF1ZGlvVHJhY2spIHtcclxuICAgIGF1ZGlvVHJhY2suc3RvcCgpO1xyXG4gIH1cclxuICBcclxuICB2aWRlb1RyYWNrID0gbnVsbDtcclxuICBhdWRpb1RyYWNrID0gbnVsbDtcclxuICBcclxuICBcclxuICBcclxuICBmb3IgKGxldCBrZXkgaW4gRy5jb25uZWN0ZWRDYWxscykge1xyXG4gICAgICAgbGV0IGNvbm4gPSBHLmNvbm5lY3RlZENhbGxzW2tleV07XHJcbiAgICAgICBpZihjb25uLm9wZW4pIHtcclxuICAgICAgICAgICBjb25uLmNsb3NlKHRydWUpO1xyXG4gICAgICAgfVxyXG4gICAgICAgZGVsZXRlIEcuY29ubmVjdGVkQ2FsbHNba2V5XTtcclxuICB9XHJcbiAgXHJcbiAgXHJcbiAgcmVzdXJyZWN0aW9uQnRuRWxlbSh0cmlnZ2VyRWxlbSk7XHJcbn07XHJcblxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBjaGFuZ0FibGVTdHJlYW0oc3RyZWFtVHJhY2tzICwgZW5hYmxlRmxnKXtcclxuICAgIC8vIOa4oeOBleOCjOOBn+OCueODiOODquODvOODoOOBruODiOODqeODg+OCr+OBq+OAgemAgeWHuuioseWPr+OCkuioreWumuOBmeOCi1xyXG4gICAgaWYoc3RyZWFtVHJhY2tzKXtcclxuICAgICAgICBpZiAoc3RyZWFtVHJhY2tzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBzdHJlYW1UcmFja3NbMF0uZW5hYmxlZCA9IGVuYWJsZUZsZztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gcmVzdXJyZWN0aW9uQnRuRWxlbSh0cmlnZ2VyRWxlbXMpe1xyXG4gICAgbGV0IHRndGFyeTtcclxuICAgIGlmKHRyaWdnZXJFbGVtcy5mb3JlYWNoKXtcclxuICAgICAgICB0Z3Rhcnk9dHJpZ2dlckVsZW1zXHJcbiAgICB9ZWxzZXtcclxuICAgICAgICB0Z3Rhcnk9W3RyaWdnZXJFbGVtc107XHJcbiAgICB9XHJcbiAgICB0Z3RhcnkuZm9yRWFjaCh0cmlnZ2VyRWxlbSA9PiB7XHJcbiAgICAgICAgaWYodHlwZW9mKHRyaWdnZXJFbGVtKT09XCJvYmplY3RcIil7XHJcbiAgICAgICAgICBpZih0cmlnZ2VyRWxlbS50eXBlKXtcclxuICAgICAgICAgICAgaWYodHJpZ2dlckVsZW0udHlwZT1cImJ1dHRvblwiKXtcclxuICAgICAgICAgICAgICBpZih0cmlnZ2VyRWxlbS5kaXNhYmxlZCl7XHJcbiAgICAgICAgICAgICAgICB0cmlnZ2VyRWxlbS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIENoZWNrRW5hYmxlX3ZpZGVvVHJhY2sodHJpZ2dlckVsZW0gPSBudWxsICwgbG9vcD0wKXtcclxuICAgIGxldCBmbGc9bG9vcDtcclxuICAgIGlmKHZpZGVvVHJhY2spe1xyXG4gICAgICAgIGZsZyAtPSAxO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZihmbGc8MCl7XHJcbiAgICAgICAgcmVzdXJyZWN0aW9uQnRuRWxlbSh0cmlnZ2VyRWxlbSk7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Q2hlY2tFbmFibGVfdmlkZW9UcmFjayh0cmlnZ2VyRWxlbSAsIGZsZyl9LCAxMDAwKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdFZpZGVvQ29uc3RyYWludHModHJpZ2dlckVsZW0gPSBudWxsKXsgIC8vIOOCueODiOODquODvOODoOOBrm9uL29mZuWItuW+oVxyXG4gICBsZXQgZmxnPTA7XHJcbiAgIFxyXG4gICBpZihHaHRtbC5lbGVtU3RyZWFtX1NXKXtcclxuICAgICAgIGlmKEdodG1sLmVsZW1TdHJlYW1fU1cudmFsdWU9PTApeyAvL09mZlxyXG4gICAgICAgICAgIGdldEN1cnJlbnRTZXR0aW5ncygpO1xyXG4gICAgICAgICAgIGlmKHZpZGVvQ29uc3RyYWludHMpe1xyXG4gICAgICAgICAgICAgICB2aWRlb0NvbnN0cmFpbnRzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgIGZsZz0xO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICAgICBpZihhdWRpb0NvbnN0cmFpbnRzKXtcclxuICAgICAgICAgICAgICAgYXVkaW9Db25zdHJhaW50cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICBmbGc9MTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgaWYoZmxnIT0wKXtcclxuICAgICAgICAgICAgICAgc3RvcFZpZGVvKHRyaWdnZXJFbGVtKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICB9ZWxzZXsgICAvLyBpZihHaHRtbC5lbGVtU3RyZWFtX1NXLnZhbHVlIT0wKXsgLy9PblxyXG4gICAgICAgICAgIGlmKCF2aWRlb0NvbnN0cmFpbnRzKXtcclxuICAgICAgICAgICAgICAgYnVpbGRWaWRlb0NvbnN0cmFpbnRzSlNPTigpO1xyXG4gICAgICAgICAgICAgICBjaGFuZ2VWaWRlb0NvbnN0cmFpbnRzUHQoKTtcclxuICAgICAgICAgICAgICAgZmxnPTE7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIGlmKCFhdWRpb0NvbnN0cmFpbnRzKXtcclxuICAgICAgICAgICAgICAgYnVpbGRBdWRpb0NvbnN0cmFpbnRzSlNPTigpO1xyXG4gICAgICAgICAgICAgICBjaGFuZ2VBdWRpb0NvbnN0cmFpbnRzUHQoKTtcclxuICAgICAgICAgICAgICAgZmxnPTE7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgICAgIGlmKGZsZyE9MCl7XHJcbiAgICAgICAgICAgICAgIHN0YXJ0VmlkZW8odHJpZ2dlckVsZW0pO1xyXG5cclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgIGlmKEdodG1sLmVsZW1SYW5nZV9WaWRlb0ZyYW1lUmF0ZSl7XHJcbiAgICAgICAgICAgICAgICAgICBHaHRtbC5lbGVtUmFuZ2VfVmlkZW9GcmFtZVJhdGUudmFsdWUgPSB2aWRlb0NvbnN0cmFpbnRzLmZyYW1lUmF0ZTtcclxuICAgICAgICAgICAgICAgICAgIC8vdXBkYXRlX2VsZW1SYW5nZV9WaWRlb0ZyYW1lUmF0ZUN1clZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgR2h0bWwuZWxlbVJhbmdlX1ZpZGVvRnJhbWVSYXRlLmRpc3BhdGNoRXZlbnQoY19lbGVtRXZlbnRfaW5wdXQpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgfVxyXG5cclxuICAgICAgIH1cclxuICAgICAgIFxyXG4gICB9XHJcbiAgIFxyXG4gICBpZihmbGc9PTEpe1xyXG4gICAgICAgLy/lpInmm7TjgYLjgopcclxuICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VBdWRpb0NvbnN0cmFpbnRzUHQoKXtcclxuICAgbGV0IGZsZz0wO1xyXG4gICBcclxuICAgaWYoYXVkaW9Db25zdHJhaW50cyl7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICBpZihHaHRtbC5lbGVtQ2hlY2tCb3hfbWljUHJvcGVydGllcyl7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IEdodG1sLmVsZW1DaGVja0JveF9taWNQcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICBzd2l0Y2ggKEdodG1sLmVsZW1DaGVja0JveF9taWNQcm9wZXJ0aWVzW2ldLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICBjYXNlIFwiYWdhaW5cIjpcclxuICAgICAgICAgICAgICAgICAgICAgaWYoYXVkaW9Db25zdHJhaW50cy5hdXRvR2FpbkNvbnRyb2wgIT0gR2h0bWwuZWxlbUNoZWNrQm94X21pY1Byb3BlcnRpZXNbaV0uY2hlY2tlZCApeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvQ29uc3RyYWludHMuYXV0b0dhaW5Db250cm9sID0gR2h0bWwuZWxlbUNoZWNrQm94X21pY1Byb3BlcnRpZXNbaV0uY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIGZsZz0xO1xyXG4gICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgIGNhc2UgXCJub2l6ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICBpZihhdWRpb0NvbnN0cmFpbnRzLm5vaXNlU3VwcHJlc3Npb24gIT0gR2h0bWwuZWxlbUNoZWNrQm94X21pY1Byb3BlcnRpZXNbaV0uY2hlY2tlZCApeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvQ29uc3RyYWludHMubm9pc2VTdXBwcmVzc2lvbiA9IEdodG1sLmVsZW1DaGVja0JveF9taWNQcm9wZXJ0aWVzW2ldLmNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBmbGc9MTtcclxuICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgfVxyXG4gICAgICAgICBcclxuICAgICAgICAgaWYoR2h0bWwuZWxlbVJhZGlvX21pY0VjaG9DYW5jZWwpe1xyXG4gICAgICAgICAgICAgbGV0IHN0cnZsID1cIlwiO1xyXG4gICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBHaHRtbC5lbGVtUmFkaW9fbWljRWNob0NhbmNlbC5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgaWYoR2h0bWwuZWxlbVJhZGlvX21pY0VjaG9DYW5jZWxbaV0uY2hlY2tlZCl7IFxyXG4gICAgICAgICAgICAgICAgICAgICBzdHJ2bCA9IEdodG1sLmVsZW1SYWRpb19taWNFY2hvQ2FuY2VsW2ldLnZhbHVlOyBicmVhaztcclxuICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICBcclxuICAgICAgICAgICAgIGlmKHN0cnZsPT1cIm5vbmVcIil7XHJcbiAgICAgICAgICAgICAgICAgaWYoYXVkaW9Db25zdHJhaW50cy5lY2hvQ2FuY2VsbGF0aW9uKXtcclxuICAgICAgICAgICAgICAgICAgICAgYXVkaW9Db25zdHJhaW50cy5lY2hvQ2FuY2VsbGF0aW9uPWZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICBmbGc9MTtcclxuICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICBpZighYXVkaW9Db25zdHJhaW50cy5lY2hvQ2FuY2VsbGF0aW9uKXtcclxuICAgICAgICAgICAgICAgICAgICAgYXVkaW9Db25zdHJhaW50cy5lY2hvQ2FuY2VsbGF0aW9uPXRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgIGZsZz0xO1xyXG4gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICBpZihhdWRpb0NvbnN0cmFpbnRzLmVjaG9DYW5jZWxsYXRpb25UeXBlICE9IHN0cnZsKXtcclxuICAgICAgICAgICAgICAgICAgICAgYXVkaW9Db25zdHJhaW50cy5lY2hvQ2FuY2VsbGF0aW9uVHlwZSA9IHN0cnZsO1xyXG4gICAgICAgICAgICAgICAgICAgICBmbGc9MTsgIC8vIFwic3lzdGVtXCIgb3IgXCJicm93c2VyXCJcclxuICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgXHJcbiAgIH1cclxuICAgXHJcbiAgIHJldHVybiBmbGc7XHJcbn1cclxuZnVuY3Rpb24gY2hhbmdlQXVkaW9Db25zdHJhaW50cyh0cmlnZ2VyRWxlbSA9IG51bGwpe1xyXG4gICBsZXQgZmxnPWNoYW5nZUF1ZGlvQ29uc3RyYWludHNQdCgpO1xyXG4gICBpZihmbGc9PTEpe1xyXG4gICAgICAgaWYoYXVkaW9UcmFjayl7XHJcbiAgICAgICAgICAgaWYoYXVkaW9Db25zdHJhaW50cyl7XHJcbiAgICAgICAgICAgICAgICAgICBhdWRpb1RyYWNrLmFwcGx5Q29uc3RyYWludHMoYXVkaW9Db25zdHJhaW50cyk7IC8vIOioreWumuWkieabtOOCkuWun+aWvVxyXG4gICAgICAgICAgIH1cclxuICAgICAgIH1cclxuICAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gY2hhbmdlVmlkZW9Db25zdHJhaW50c1B0KCl7XHJcbiAgIGxldCBmbGc9MDtcclxuICAgXHJcbiAgIGlmKHZpZGVvQ29uc3RyYWludHMpe1xyXG4gICAgICAgICBpZihHaHRtbC5lbGVtUmFuZ2VfVmlkZW9GcmFtZVJhdGUpe1xyXG4gICAgICAgICBcclxuICAgICAgICAgICAgIGlmKEdodG1sLmVsZW1SYW5nZV9WaWRlb0ZyYW1lUmF0ZS52YWx1ZSAhPSB2aWRlb0NvbnN0cmFpbnRzLmZyYW1lUmF0ZSl7XHJcbiAgICAgICAgICAgICAgICAgaWYodmlkZW9Db25zdHJhaW50cy5mcmFtZVJhdGUuaWRlYWwpe1xyXG4gICAgICAgICAgICAgICAgICAgICB2aWRlb0NvbnN0cmFpbnRzLmZyYW1lUmF0ZS5pZGVhbCA9IE51bWJlcihHaHRtbC5lbGVtUmFuZ2VfVmlkZW9GcmFtZVJhdGUudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICB2aWRlb0NvbnN0cmFpbnRzLmZyYW1lUmF0ZSA9IE51bWJlcihHaHRtbC5lbGVtUmFuZ2VfVmlkZW9GcmFtZVJhdGUudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICBpZih2aWRlb0NvbnN0cmFpbnRzLmZyYW1lUmF0ZS5tYXgpe1xyXG4gICAgICAgICAgICAgICAgICAgICB2aWRlb0NvbnN0cmFpbnRzLmZyYW1lUmF0ZS5tYXggPSBOdW1iZXIoR2h0bWwuZWxlbVJhbmdlX1ZpZGVvRnJhbWVSYXRlLnZhbHVlKSs1O1xyXG4gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICBmbGc9MTtcclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICB9XHJcbiAgIFxyXG4gICByZXR1cm4gZmxnO1xyXG59XHJcbmZ1bmN0aW9uIGNoYW5nZVZpZGVvQ29uc3RyYWludHModHJpZ2dlckVsZW0gPSBudWxsKXtcclxuICAgbGV0IGZsZz1jaGFuZ2VWaWRlb0NvbnN0cmFpbnRzUHQoKTtcclxuICAgaWYoZmxnPT0xKXtcclxuICAgICAgIGlmKHZpZGVvVHJhY2spe1xyXG4gICAgICAgICAgIGlmKHZpZGVvQ29uc3RyYWludHMpe1xyXG4gICAgICAgICAgICAgICAgICAgY2hhbmdlVmlkZW9Db25zdHJhaW50c19kZWxheSgpO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH1cclxuICAgfVxyXG59XHJcbmxldCBjaGFuZ2VWaWRlb0NvbnN0cmFpbnRzX2lkPTA7IC8vIDA65a6f6KGM5Y+v6IO944CB44Gd44KM5Lul5aSWOuWun+ihjOS/neeVmeacn+mWk+S4rVxyXG5sZXQgY2hhbmdlVmlkZW9Db25zdHJhaW50c19mbGc9MDsgLy8gMOS7peWklu+8mkNvbnN0cmFpbnRz44Gu6Kit5a6a5aSJ5pu06KaB5rGC44GC44KKXHJcbmZ1bmN0aW9uIGNoYW5nZVZpZGVvQ29uc3RyYWludHNfZGVsYXkobW9kZT0wKXtcclxuICAgIGlmKG1vZGU9PTApe1xyXG4gICAgICAgICBjaGFuZ2VWaWRlb0NvbnN0cmFpbnRzX2ZsZz0xOyAvL+abtOaWsOOBmeOBueOBje++g+++nu+9sO++gOOBjOOBguOCi1xyXG4gICAgfVxyXG4gICAgaWYoY2hhbmdlVmlkZW9Db25zdHJhaW50c19mbGchPTApe1xyXG4gICAgICAgIGlmKGNoYW5nZVZpZGVvQ29uc3RyYWludHNfaWQ9PTApeyAvL+Wun+ihjOWPr+iDvVxyXG4gICAgICAgICAgICBjaGFuZ2VWaWRlb0NvbnN0cmFpbnRzX2ZsZz0wO1xyXG4gICAgICAgICAgICB2aWRlb1RyYWNrLmFwcGx5Q29uc3RyYWludHModmlkZW9Db25zdHJhaW50cyk7IC8vIOioreWumuWkieabtOOCkuWun+aWvVxyXG4gICAgICAgICAgICBnZXRDdXJyZW50U2V0dGluZ3MoKTsgLy8g6Kit5a6a44KS44OG44Kt44K544OI44Gr5L+d5a2YXHJcbiAgICAgICAgICAgIGNoYW5nZVZpZGVvQ29uc3RyYWludHNfaWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VWaWRlb0NvbnN0cmFpbnRzX2lkPTA7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VWaWRlb0NvbnN0cmFpbnRzX2RlbGF5KDEpOyAgICB9LCAxMDAwKTsgLy8g5Yem55CG5a6f6KGM55u05b6MMeenkumWk+OBr+e2muOBkeOBpuWHpueQhuOCkuihjOOCj+OBquOBhFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/udonMediaStream.js\n");

/***/ }),

/***/ "./src/udonRecordVoice.js":
/*!********************************!*\
  !*** ./src/udonRecordVoice.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"htmlElemInit_RecordVoice\": () => (/* binding */ htmlElemInit_RecordVoice),\n/* harmony export */   \"mediaRecorder\": () => (/* binding */ mediaRecorder),\n/* harmony export */   \"recreateAudioOutputStream\": () => (/* binding */ recreateAudioOutputStream)\n/* harmony export */ });\n/* harmony import */ var _udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./udonChatHTML_VideoStreamElement.js */ \"./src/udonChatHTML_VideoStreamElement.js\");\n/* harmony import */ var _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./udonChatHTML_elements.js */ \"./src/udonChatHTML_elements.js\");\n/* harmony import */ var _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./myGlobalParams.js */ \"./src/myGlobalParams.js\");\n\r\n\r\n\r\n\r\n\r\nlet mediaRecorder; //録音用\r\n\r\n\r\n\r\n\r\n// ===================================================\r\n\r\nconst saveaudio_chunks = [];   // 音声の録音用データ格納先\r\n\r\nlet mediaRecorder_micVolumeGain;\r\n\r\n\r\n\r\nfunction htmlElemInit_RecordVoice(){\r\n    //elemRec_SW =  document.getElementById('my-rec_sw');\r\n    if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemRec_SW){\r\n      _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemRec_SW.innerText = \"REC開始\";\r\n      _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemRec_SW.addEventListener('click', function(e){\r\n          e.target.setAttribute(\"disabled\", true);\r\n          if(e.target.value!=0){\r\n              audioRecCommand(0);//停止\r\n                  e.target.value=0;\r\n                  e.target.innerText = \"REC開始\";\r\n          }else{\r\n              if(0!=audioRecCommand(1)){    //開始\r\n                  e.target.value=1;\r\n                  e.target.innerText = \"REC終了\";\r\n              }\r\n          }\r\n          e.target.removeAttribute(\"disabled\");\r\n      });\r\n    }\r\n   \r\n    //elemVideo = document.getElementById('my-video');\r\n    if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemVideo){\r\n      _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemVideo.addEventListener('volumechange', e => {\r\n          if(typeof mediaRecorder==\"object\"){if(mediaRecorder){\r\n              if(mediaRecorder_micVolumeGain){ //マイクの音の録音用ゲインを設定しなおす。\r\n                  mediaRecorder_micVolumeGain.value = _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemVideo.volume; //Muteしていても値は取れる。\r\n              }\r\n          }}\r\n      });\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction audioRecCommand(mode){ //HTMLボタンより呼び出される。 mode=0:停止, 1:開始\r\n    if(mode==1){ // 開始\r\n        if(createAudioOutputStream()<=0){\r\n            mode=0;\r\n        }else{\r\n            //sendNewChatMessage(\"(system-rec)\");\r\n            if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemTextArea_RecSound)_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemTextArea_RecSound.innerHTML=\"録音中\";\r\n        }\r\n    }else{ // 終了\r\n        if(mediaRecorder){\r\n            mediaRecorder.stop();\r\n        }\r\n        //mediaRecorder=null;\r\n        if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemTextArea_RecSound)_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemTextArea_RecSound.innerHTML=\"\";\r\n    }\r\n    return mode;\r\n}\r\nfunction createAudioOutputStream(){\r\n    \r\n    let sorceCnt =0;\r\n    \r\n    let recAudioContext = new (window.AudioContext || window.webkitAudioContext)(); \r\n    let newDestination = recAudioContext.createMediaStreamDestination();\r\n    \r\n    // Mic      \r\n            if(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_2__.G.localStream){\r\n                let audioTracks = _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_2__.G.localStream.getAudioTracks();\r\n                if(audioTracks.length) {if(audioTracks[0]){\r\n                  let tgtgain=0;\r\n                  //ボリュームを追加\r\n                  \r\n                  if(typeof _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemVideo==\"object\"){if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemVideo){if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemVideo.volume){\r\n                      tgtgain=_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemVideo.volume;\r\n                  }}}\r\n                  \r\n                  \r\n                  if(tgtgain>0){\r\n                      let audioctxGainNode;\r\n                      //audioctx.AudioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n                      audioctxGainNode = recAudioContext.createGain();\r\n                      \r\n                      let audioSource = recAudioContext.createMediaStreamSource(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_2__.G.localStream);\r\n                      audioSource.connect(audioctxGainNode);\r\n                      mediaRecorder_micVolumeGain = audioctxGainNode.gain;\r\n                      //audioctxGainNode.gain.value =1;\r\n                      mediaRecorder_micVolumeGain.value = tgtgain; //自カメラ映像再生用の音量に合わせる(Mute無効)\r\n                      \r\n                      audioctxGainNode.connect(newDestination);\r\n                      sorceCnt+=1;\r\n                  }\r\n                }}\r\n            }\r\n            \r\n            \r\n            \r\n            \r\n            \r\n    //stream\r\n    \r\n    for (let key in _udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_0__.audioContextCtrls) {\r\n    //    let ctrls = audioContextCtrls[key].gainNode;\r\n    //    if(ctrls) {\r\n    //        ctrls.connect(newDestination);\r\n    //        sorceCnt+=1;\r\n    //    }\r\n        \r\n        let audioTracks = null;\r\n        if(_udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_0__.audioContextCtrls[key]){if(_udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_0__.audioContextCtrls[key].orgStream){\r\n            audioTracks = _udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_0__.audioContextCtrls[key].orgStream.getAudioTracks();\r\n        }}\r\n        if(audioTracks){if(audioTracks.length) {if(audioTracks[0]){\r\n          //let ctrls = recAudioContext.createMediaStreamSource(audioContextCtrls[key].orgStream);\r\n            let ctrls = recAudioContext.createMediaStreamSource(new MediaStream(audioTracks));\r\n            \r\n            if(false){}else{    // このPCでの再生音量に合わせる（リアルタイム追従はしない）\r\n                let audioctxGainNode;\r\n                audioctxGainNode = recAudioContext.createGain();\r\n                ctrls.connect(audioctxGainNode);\r\n                mediaRecorder_micVolumeGain = audioctxGainNode.gain;\r\n                mediaRecorder_micVolumeGain.value =1;\r\n                if(_udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_0__.audioContextCtrls[key].gainNode){if(_udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_0__.audioContextCtrls[key].gainNode.gain){\r\n                    mediaRecorder_micVolumeGain.value = _udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_0__.audioContextCtrls[key].gainNode.gain.value;\r\n                }}\r\n                \r\n                audioctxGainNode.connect(newDestination);\r\n            }\r\n            sorceCnt+=1;\r\n        }}}\r\n    }\r\n    \r\n    // output\r\n    \r\n    \r\n    //ここからテスト\r\n    //sorceCnt =-1;\r\n    if(sorceCnt==-1){\r\n        let newelem = document.createElement(\"audio\");\r\n        newelem.id=\"peeraudioXXXXXXX\";\r\n        newelem.setAttribute(\"autoplay\",true);\r\n        newelem.setAttribute(\"muted\",true);\r\n        newelem.volume = 0.3;\r\n        newelem.controls=\"true\";\r\n        newelem.addEventListener('loadedmetadata', e => {\r\n                        newelem.muted = \"false\";\r\n                   // newelem.play();\r\n        });\r\n        let audioTracks;let cntxtss;let newDest;let myAudioContext;\r\n        switch(4){\r\n        case 1:\r\n            newelem.srcObject = _udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_0__.audioContextCtrls[Object.keys(_udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_0__.audioContextCtrls)[0]].orgStream;\r\n            break;\r\n        case 2:\r\n            audioTracks = _udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_0__.audioContextCtrls[Object.keys(_udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_0__.audioContextCtrls)[0]].orgStream.getAudioTracks();\r\n            newelem.srcObject = new MediaStream(audioTracks);\r\n            break;\r\n        case 3:\r\n            myAudioContext = new (window.AudioContext || window.webkitAudioContext)(); \r\n            \r\n            audioTracks = _udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_0__.audioContextCtrls[Object.keys(_udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_0__.audioContextCtrls)[0]].orgStream.getAudioTracks();\r\n            cntxtss = myAudioContext.createMediaStreamSource(new MediaStream(audioTracks));\r\n            \r\n            newDest =myAudioContext.destination;\r\n            cntxtss.connect(newDest);\r\n            \r\n            newelem.srcObject = newDest.stream;\r\n            break;\r\n        case 4:\r\n            myAudioContext = new (window.AudioContext || window.webkitAudioContext)(); \r\n            \r\n            audioTracks = _udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_0__.audioContextCtrls[Object.keys(_udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_0__.audioContextCtrls)[0]].orgStream.getAudioTracks();\r\n            cntxtss = myAudioContext.createMediaStreamSource(new MediaStream(audioTracks));\r\n            \r\n            newDest = myAudioContext.createMediaStreamDestination();\r\n            cntxtss.connect(newDest);\r\n            \r\n            newelem.srcObject = newDest.stream;\r\n            break;\r\n        default:\r\n            newelem.srcObject = newDestination.stream;\r\n            break;\r\n        }\r\n        //\r\n        _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_1__.Ghtml.elemRec_SW.parentElement.appendChild(newelem);\r\n    }\r\n    //ここまでテスト\r\n    \r\n    \r\n    \r\n    if(sorceCnt<=0){\r\n        console.log(\"debug : No AudioSource for Record.\"  );\r\n    }else{\r\n        let mimetypeChoice='audio/webm';\r\n        if(MediaRecorder.isTypeSupported(\"audio/webm\\;codecs=opus\")){ mimetypeChoice='audio/webm\\;codecs=opus'; }\r\n        \r\n        mediaRecorder = new MediaRecorder(newDestination.stream, { mimeType: mimetypeChoice });\r\n        \r\n        for(let i=saveaudio_chunks.length;i>0;i--){\r\n            saveaudio_chunks.shift();\r\n        } // saveaudio_chunks を空にする。\r\n        \r\n        mediaRecorder.addEventListener('dataavailable', e => { \r\n              // 一定間隔で録画が区切られて、データが渡される\r\n              if (e.data.size > 0) {\r\n                 saveaudio_chunks.push(e.data);\r\n                 //saveaudio_chunks[0]=(e.data);\r\n              }\r\n        });\r\n        \r\n        mediaRecorder.addEventListener('stop', () => {\r\n            const a = document.createElement('a');\r\n            a.href = URL.createObjectURL(new Blob(saveaudio_chunks,{'type': mimetypeChoice }));\r\n            a.download = 'audio-test.webm';\r\n            a.click();\r\n            \r\n            mediaRecorder=null;\r\n        });\r\n        \r\n        mediaRecorder.start();\r\n    }\r\n    \r\n    return sorceCnt;\r\n}\r\nfunction recreateAudioOutputStream(){\r\n    if(mediaRecorder){\r\n        \r\n        mediaRecorder.stop(); // 一旦、今までの録音内容をファイルに出力\r\n        \r\n        recreateAudioOutputStream_restart(); // 録音を再開\r\n        \r\n    }\r\n}\r\nfunction recreateAudioOutputStream_restart(){\r\n    if(mediaRecorder){\r\n        setTimeout( recreateAudioOutputStream_restart ,100);\r\n    } else {\r\n        createAudioOutputStream();\r\n    }\r\n}\r\n//-----------------\r\n\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBLG1FQUFtRSwwQkFBMEI7QUFDN0Y7QUFDQSwwQ0FBMEMsSUFBSTtBQUM5QztBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxvRUFBb0Usd0JBQXdCO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vMjAyMTAxMTFfd2ViY2hhdC8uL3NyYy91ZG9uUmVjb3JkVm9pY2UuanM/ZmQ1ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhdWRpb0NvbnRleHRDdHJscyB9IGZyb20gXCIuL3Vkb25DaGF0SFRNTF9WaWRlb1N0cmVhbUVsZW1lbnQuanNcIjtcclxuaW1wb3J0IHsgR2h0bWwgfSAgZnJvbSBcIi4vdWRvbkNoYXRIVE1MX2VsZW1lbnRzLmpzXCI7XHJcbmltcG9ydCB7IEcgfSAgZnJvbSBcIi4vbXlHbG9iYWxQYXJhbXMuanNcIjtcclxuXHJcbmV4cG9ydCB7IGh0bWxFbGVtSW5pdF9SZWNvcmRWb2ljZSAsIHJlY3JlYXRlQXVkaW9PdXRwdXRTdHJlYW19O1xyXG5leHBvcnQgbGV0IG1lZGlhUmVjb3JkZXI7IC8v6Yyy6Z+z55SoXHJcblxyXG5cclxuXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmNvbnN0IHNhdmVhdWRpb19jaHVua3MgPSBbXTsgICAvLyDpn7Plo7Djga7pjLLpn7PnlKjjg4fjg7zjgr/moLzntI3lhYhcclxuXHJcbmxldCBtZWRpYVJlY29yZGVyX21pY1ZvbHVtZUdhaW47XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIGh0bWxFbGVtSW5pdF9SZWNvcmRWb2ljZSgpe1xyXG4gICAgLy9lbGVtUmVjX1NXID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteS1yZWNfc3cnKTtcclxuICAgIGlmKEdodG1sLmVsZW1SZWNfU1cpe1xyXG4gICAgICBHaHRtbC5lbGVtUmVjX1NXLmlubmVyVGV4dCA9IFwiUkVD6ZaL5aeLXCI7XHJcbiAgICAgIEdodG1sLmVsZW1SZWNfU1cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgIGUudGFyZ2V0LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgICAgICAgaWYoZS50YXJnZXQudmFsdWUhPTApe1xyXG4gICAgICAgICAgICAgIGF1ZGlvUmVjQ29tbWFuZCgwKTsvL+WBnOatolxyXG4gICAgICAgICAgICAgICAgICBlLnRhcmdldC52YWx1ZT0wO1xyXG4gICAgICAgICAgICAgICAgICBlLnRhcmdldC5pbm5lclRleHQgPSBcIlJFQ+mWi+Wni1wiO1xyXG4gICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgaWYoMCE9YXVkaW9SZWNDb21tYW5kKDEpKXsgICAgLy/plovlp4tcclxuICAgICAgICAgICAgICAgICAgZS50YXJnZXQudmFsdWU9MTtcclxuICAgICAgICAgICAgICAgICAgZS50YXJnZXQuaW5uZXJUZXh0ID0gXCJSRUPntYLkuoZcIjtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlLnRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgIFxyXG4gICAgLy9lbGVtVmlkZW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXktdmlkZW8nKTtcclxuICAgIGlmKEdodG1sLmVsZW1WaWRlbyl7XHJcbiAgICAgIEdodG1sLmVsZW1WaWRlby5hZGRFdmVudExpc3RlbmVyKCd2b2x1bWVjaGFuZ2UnLCBlID0+IHtcclxuICAgICAgICAgIGlmKHR5cGVvZiBtZWRpYVJlY29yZGVyPT1cIm9iamVjdFwiKXtpZihtZWRpYVJlY29yZGVyKXtcclxuICAgICAgICAgICAgICBpZihtZWRpYVJlY29yZGVyX21pY1ZvbHVtZUdhaW4peyAvL+ODnuOCpOOCr+OBrumfs+OBrumMsumfs+eUqOOCsuOCpOODs+OCkuioreWumuOBl+OBquOBiuOBmeOAglxyXG4gICAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyX21pY1ZvbHVtZUdhaW4udmFsdWUgPSBHaHRtbC5lbGVtVmlkZW8udm9sdW1lOyAvL011dGXjgZfjgabjgYTjgabjgoLlgKTjga/lj5bjgozjgovjgIJcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9fVxyXG4gICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIGF1ZGlvUmVjQ29tbWFuZChtb2RlKXsgLy9IVE1M44Oc44K/44Oz44KI44KK5ZG844Gz5Ye644GV44KM44KL44CCIG1vZGU9MDrlgZzmraIsIDE66ZaL5aeLXHJcbiAgICBpZihtb2RlPT0xKXsgLy8g6ZaL5aeLXHJcbiAgICAgICAgaWYoY3JlYXRlQXVkaW9PdXRwdXRTdHJlYW0oKTw9MCl7XHJcbiAgICAgICAgICAgIG1vZGU9MDtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy9zZW5kTmV3Q2hhdE1lc3NhZ2UoXCIoc3lzdGVtLXJlYylcIik7XHJcbiAgICAgICAgICAgIGlmKEdodG1sLmVsZW1UZXh0QXJlYV9SZWNTb3VuZClHaHRtbC5lbGVtVGV4dEFyZWFfUmVjU291bmQuaW5uZXJIVE1MPVwi6Yyy6Z+z5LitXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfWVsc2V7IC8vIOe1guS6hlxyXG4gICAgICAgIGlmKG1lZGlhUmVjb3JkZXIpe1xyXG4gICAgICAgICAgICBtZWRpYVJlY29yZGVyLnN0b3AoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9tZWRpYVJlY29yZGVyPW51bGw7XHJcbiAgICAgICAgaWYoR2h0bWwuZWxlbVRleHRBcmVhX1JlY1NvdW5kKUdodG1sLmVsZW1UZXh0QXJlYV9SZWNTb3VuZC5pbm5lckhUTUw9XCJcIjtcclxuICAgIH1cclxuICAgIHJldHVybiBtb2RlO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZUF1ZGlvT3V0cHV0U3RyZWFtKCl7XHJcbiAgICBcclxuICAgIGxldCBzb3JjZUNudCA9MDtcclxuICAgIFxyXG4gICAgbGV0IHJlY0F1ZGlvQ29udGV4dCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSgpOyBcclxuICAgIGxldCBuZXdEZXN0aW5hdGlvbiA9IHJlY0F1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbURlc3RpbmF0aW9uKCk7XHJcbiAgICBcclxuICAgIC8vIE1pYyAgICAgIFxyXG4gICAgICAgICAgICBpZihHLmxvY2FsU3RyZWFtKXtcclxuICAgICAgICAgICAgICAgIGxldCBhdWRpb1RyYWNrcyA9IEcubG9jYWxTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKTtcclxuICAgICAgICAgICAgICAgIGlmKGF1ZGlvVHJhY2tzLmxlbmd0aCkge2lmKGF1ZGlvVHJhY2tzWzBdKXtcclxuICAgICAgICAgICAgICAgICAgbGV0IHRndGdhaW49MDtcclxuICAgICAgICAgICAgICAgICAgLy/jg5zjg6rjg6Xjg7zjg6DjgpLov73liqBcclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBHaHRtbC5lbGVtVmlkZW89PVwib2JqZWN0XCIpe2lmKEdodG1sLmVsZW1WaWRlbyl7aWYoR2h0bWwuZWxlbVZpZGVvLnZvbHVtZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0Z3RnYWluPUdodG1sLmVsZW1WaWRlby52b2x1bWU7XHJcbiAgICAgICAgICAgICAgICAgIH19fVxyXG4gICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIGlmKHRndGdhaW4+MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgYXVkaW9jdHhHYWluTm9kZTtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vYXVkaW9jdHguQXVkaW9Db250ZXh0ID0gbmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQpKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBhdWRpb2N0eEdhaW5Ob2RlID0gcmVjQXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgbGV0IGF1ZGlvU291cmNlID0gcmVjQXVkaW9Db250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKEcubG9jYWxTdHJlYW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYXVkaW9Tb3VyY2UuY29ubmVjdChhdWRpb2N0eEdhaW5Ob2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgIG1lZGlhUmVjb3JkZXJfbWljVm9sdW1lR2FpbiA9IGF1ZGlvY3R4R2Fpbk5vZGUuZ2FpbjtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vYXVkaW9jdHhHYWluTm9kZS5nYWluLnZhbHVlID0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlcl9taWNWb2x1bWVHYWluLnZhbHVlID0gdGd0Z2FpbjsgLy/oh6rjgqvjg6Hjg6nmmKDlg4/lho3nlJ/nlKjjga7pn7Pph4/jgavlkIjjgo/jgZvjgosoTXV0ZeeEoeWKuSlcclxuICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgYXVkaW9jdHhHYWluTm9kZS5jb25uZWN0KG5ld0Rlc3RpbmF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHNvcmNlQ250Kz0xO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBcclxuICAgIC8vc3RyZWFtXHJcbiAgICBcclxuICAgIGZvciAobGV0IGtleSBpbiBhdWRpb0NvbnRleHRDdHJscykge1xyXG4gICAgLy8gICAgbGV0IGN0cmxzID0gYXVkaW9Db250ZXh0Q3RybHNba2V5XS5nYWluTm9kZTtcclxuICAgIC8vICAgIGlmKGN0cmxzKSB7XHJcbiAgICAvLyAgICAgICAgY3RybHMuY29ubmVjdChuZXdEZXN0aW5hdGlvbik7XHJcbiAgICAvLyAgICAgICAgc29yY2VDbnQrPTE7XHJcbiAgICAvLyAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGF1ZGlvVHJhY2tzID0gbnVsbDtcclxuICAgICAgICBpZihhdWRpb0NvbnRleHRDdHJsc1trZXldKXtpZihhdWRpb0NvbnRleHRDdHJsc1trZXldLm9yZ1N0cmVhbSl7XHJcbiAgICAgICAgICAgIGF1ZGlvVHJhY2tzID0gYXVkaW9Db250ZXh0Q3RybHNba2V5XS5vcmdTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKTtcclxuICAgICAgICB9fVxyXG4gICAgICAgIGlmKGF1ZGlvVHJhY2tzKXtpZihhdWRpb1RyYWNrcy5sZW5ndGgpIHtpZihhdWRpb1RyYWNrc1swXSl7XHJcbiAgICAgICAgICAvL2xldCBjdHJscyA9IHJlY0F1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShhdWRpb0NvbnRleHRDdHJsc1trZXldLm9yZ1N0cmVhbSk7XHJcbiAgICAgICAgICAgIGxldCBjdHJscyA9IHJlY0F1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShuZXcgTWVkaWFTdHJlYW0oYXVkaW9UcmFja3MpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKDE9PTIpeyAvLyDlj5fkv6Hpn7Plo7DjgpLjgZ3jga7jgb7jgb7pjLLpn7NcclxuICAgICAgICAgICAgICAgIGN0cmxzLmNvbm5lY3QobmV3RGVzdGluYXRpb24pO1xyXG4gICAgICAgICAgICB9ZWxzZXsgICAgLy8g44GT44GuUEPjgafjga7lho3nlJ/pn7Pph4/jgavlkIjjgo/jgZvjgovvvIjjg6rjgqLjg6vjgr/jgqTjg6Dov73lvpPjga/jgZfjgarjgYTvvIlcclxuICAgICAgICAgICAgICAgIGxldCBhdWRpb2N0eEdhaW5Ob2RlO1xyXG4gICAgICAgICAgICAgICAgYXVkaW9jdHhHYWluTm9kZSA9IHJlY0F1ZGlvQ29udGV4dC5jcmVhdGVHYWluKCk7XHJcbiAgICAgICAgICAgICAgICBjdHJscy5jb25uZWN0KGF1ZGlvY3R4R2Fpbk5vZGUpO1xyXG4gICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlcl9taWNWb2x1bWVHYWluID0gYXVkaW9jdHhHYWluTm9kZS5nYWluO1xyXG4gICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlcl9taWNWb2x1bWVHYWluLnZhbHVlID0xO1xyXG4gICAgICAgICAgICAgICAgaWYoYXVkaW9Db250ZXh0Q3RybHNba2V5XS5nYWluTm9kZSl7aWYoYXVkaW9Db250ZXh0Q3RybHNba2V5XS5nYWluTm9kZS5nYWluKXtcclxuICAgICAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyX21pY1ZvbHVtZUdhaW4udmFsdWUgPSBhdWRpb0NvbnRleHRDdHJsc1trZXldLmdhaW5Ob2RlLmdhaW4udmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBhdWRpb2N0eEdhaW5Ob2RlLmNvbm5lY3QobmV3RGVzdGluYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNvcmNlQ250Kz0xO1xyXG4gICAgICAgIH19fVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBvdXRwdXRcclxuICAgIFxyXG4gICAgXHJcbiAgICAvL+OBk+OBk+OBi+OCieODhuOCueODiFxyXG4gICAgLy9zb3JjZUNudCA9LTE7XHJcbiAgICBpZihzb3JjZUNudD09LTEpe1xyXG4gICAgICAgIGxldCBuZXdlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImF1ZGlvXCIpO1xyXG4gICAgICAgIG5ld2VsZW0uaWQ9XCJwZWVyYXVkaW9YWFhYWFhYXCI7XHJcbiAgICAgICAgbmV3ZWxlbS5zZXRBdHRyaWJ1dGUoXCJhdXRvcGxheVwiLHRydWUpO1xyXG4gICAgICAgIG5ld2VsZW0uc2V0QXR0cmlidXRlKFwibXV0ZWRcIix0cnVlKTtcclxuICAgICAgICBuZXdlbGVtLnZvbHVtZSA9IDAuMztcclxuICAgICAgICBuZXdlbGVtLmNvbnRyb2xzPVwidHJ1ZVwiO1xyXG4gICAgICAgIG5ld2VsZW0uYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCBlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3ZWxlbS5tdXRlZCA9IFwiZmFsc2VcIjtcclxuICAgICAgICAgICAgICAgICAgIC8vIG5ld2VsZW0ucGxheSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBhdWRpb1RyYWNrcztsZXQgY250eHRzcztsZXQgbmV3RGVzdDtsZXQgbXlBdWRpb0NvbnRleHQ7XHJcbiAgICAgICAgc3dpdGNoKDQpe1xyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgbmV3ZWxlbS5zcmNPYmplY3QgPSBhdWRpb0NvbnRleHRDdHJsc1tPYmplY3Qua2V5cyhhdWRpb0NvbnRleHRDdHJscylbMF1dLm9yZ1N0cmVhbTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICBhdWRpb1RyYWNrcyA9IGF1ZGlvQ29udGV4dEN0cmxzW09iamVjdC5rZXlzKGF1ZGlvQ29udGV4dEN0cmxzKVswXV0ub3JnU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCk7XHJcbiAgICAgICAgICAgIG5ld2VsZW0uc3JjT2JqZWN0ID0gbmV3IE1lZGlhU3RyZWFtKGF1ZGlvVHJhY2tzKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICBteUF1ZGlvQ29udGV4dCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSgpOyBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF1ZGlvVHJhY2tzID0gYXVkaW9Db250ZXh0Q3RybHNbT2JqZWN0LmtleXMoYXVkaW9Db250ZXh0Q3RybHMpWzBdXS5vcmdTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKTtcclxuICAgICAgICAgICAgY250eHRzcyA9IG15QXVkaW9Db250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKG5ldyBNZWRpYVN0cmVhbShhdWRpb1RyYWNrcykpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbmV3RGVzdCA9bXlBdWRpb0NvbnRleHQuZGVzdGluYXRpb247XHJcbiAgICAgICAgICAgIGNudHh0c3MuY29ubmVjdChuZXdEZXN0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG5ld2VsZW0uc3JjT2JqZWN0ID0gbmV3RGVzdC5zdHJlYW07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgbXlBdWRpb0NvbnRleHQgPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkoKTsgXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBhdWRpb1RyYWNrcyA9IGF1ZGlvQ29udGV4dEN0cmxzW09iamVjdC5rZXlzKGF1ZGlvQ29udGV4dEN0cmxzKVswXV0ub3JnU3RyZWFtLmdldEF1ZGlvVHJhY2tzKCk7XHJcbiAgICAgICAgICAgIGNudHh0c3MgPSBteUF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShuZXcgTWVkaWFTdHJlYW0oYXVkaW9UcmFja3MpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG5ld0Rlc3QgPSBteUF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbURlc3RpbmF0aW9uKCk7XHJcbiAgICAgICAgICAgIGNudHh0c3MuY29ubmVjdChuZXdEZXN0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG5ld2VsZW0uc3JjT2JqZWN0ID0gbmV3RGVzdC5zdHJlYW07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIG5ld2VsZW0uc3JjT2JqZWN0ID0gbmV3RGVzdGluYXRpb24uc3RyZWFtO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9cclxuICAgICAgICBHaHRtbC5lbGVtUmVjX1NXLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQobmV3ZWxlbSk7XHJcbiAgICB9XHJcbiAgICAvL+OBk+OBk+OBvuOBp+ODhuOCueODiFxyXG4gICAgXHJcbiAgICBcclxuICAgIFxyXG4gICAgaWYoc29yY2VDbnQ8PTApe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiZGVidWcgOiBObyBBdWRpb1NvdXJjZSBmb3IgUmVjb3JkLlwiICApO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgbGV0IG1pbWV0eXBlQ2hvaWNlPSdhdWRpby93ZWJtJztcclxuICAgICAgICBpZihNZWRpYVJlY29yZGVyLmlzVHlwZVN1cHBvcnRlZChcImF1ZGlvL3dlYm1cXDtjb2RlY3M9b3B1c1wiKSl7IG1pbWV0eXBlQ2hvaWNlPSdhdWRpby93ZWJtXFw7Y29kZWNzPW9wdXMnOyB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgbWVkaWFSZWNvcmRlciA9IG5ldyBNZWRpYVJlY29yZGVyKG5ld0Rlc3RpbmF0aW9uLnN0cmVhbSwgeyBtaW1lVHlwZTogbWltZXR5cGVDaG9pY2UgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yKGxldCBpPXNhdmVhdWRpb19jaHVua3MubGVuZ3RoO2k+MDtpLS0pe1xyXG4gICAgICAgICAgICBzYXZlYXVkaW9fY2h1bmtzLnNoaWZ0KCk7XHJcbiAgICAgICAgfSAvLyBzYXZlYXVkaW9fY2h1bmtzIOOCkuepuuOBq+OBmeOCi+OAglxyXG4gICAgICAgIFxyXG4gICAgICAgIG1lZGlhUmVjb3JkZXIuYWRkRXZlbnRMaXN0ZW5lcignZGF0YWF2YWlsYWJsZScsIGUgPT4geyBcclxuICAgICAgICAgICAgICAvLyDkuIDlrprplpPpmpTjgafpjLLnlLvjgYzljLrliIfjgonjgozjgabjgIHjg4fjg7zjgr/jgYzmuKHjgZXjgozjgotcclxuICAgICAgICAgICAgICBpZiAoZS5kYXRhLnNpemUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgc2F2ZWF1ZGlvX2NodW5rcy5wdXNoKGUuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgLy9zYXZlYXVkaW9fY2h1bmtzWzBdPShlLmRhdGEpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBtZWRpYVJlY29yZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3N0b3AnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgICAgIGEuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2Ioc2F2ZWF1ZGlvX2NodW5rcyx7J3R5cGUnOiBtaW1ldHlwZUNob2ljZSB9KSk7XHJcbiAgICAgICAgICAgIGEuZG93bmxvYWQgPSAnYXVkaW8tdGVzdC53ZWJtJztcclxuICAgICAgICAgICAgYS5jbGljaygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbWVkaWFSZWNvcmRlcj1udWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG1lZGlhUmVjb3JkZXIuc3RhcnQoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHNvcmNlQ250O1xyXG59XHJcbmZ1bmN0aW9uIHJlY3JlYXRlQXVkaW9PdXRwdXRTdHJlYW0oKXtcclxuICAgIGlmKG1lZGlhUmVjb3JkZXIpe1xyXG4gICAgICAgIFxyXG4gICAgICAgIG1lZGlhUmVjb3JkZXIuc3RvcCgpOyAvLyDkuIDml6bjgIHku4rjgb7jgafjga7pjLLpn7PlhoXlrrnjgpLjg5XjgqHjgqTjg6vjgavlh7rliptcclxuICAgICAgICBcclxuICAgICAgICByZWNyZWF0ZUF1ZGlvT3V0cHV0U3RyZWFtX3Jlc3RhcnQoKTsgLy8g6Yyy6Z+z44KS5YaN6ZaLXHJcbiAgICAgICAgXHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVjcmVhdGVBdWRpb091dHB1dFN0cmVhbV9yZXN0YXJ0KCl7XHJcbiAgICBpZihtZWRpYVJlY29yZGVyKXtcclxuICAgICAgICBzZXRUaW1lb3V0KCByZWNyZWF0ZUF1ZGlvT3V0cHV0U3RyZWFtX3Jlc3RhcnQgLDEwMCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNyZWF0ZUF1ZGlvT3V0cHV0U3RyZWFtKCk7XHJcbiAgICB9XHJcbn1cclxuLy8tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/udonRecordVoice.js\n");

/***/ }),

/***/ "./src/udonTextMessageChat.js":
/*!************************************!*\
  !*** ./src/udonTextMessageChat.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"htmlElemInit_TextMessageChat\": () => (/* binding */ htmlElemInit_TextMessageChat),\n/* harmony export */   \"recieveNewChatMessage\": () => (/* binding */ recieveNewChatMessage),\n/* harmony export */   \"sendNewChatMessage\": () => (/* binding */ sendNewChatMessage)\n/* harmony export */ });\n/* harmony import */ var _udonChatMessageLog_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./udonChatMessageLog.js */ \"./src/udonChatMessageLog.js\");\n/* harmony import */ var _udonWebRTC_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./udonWebRTC.js */ \"./src/udonWebRTC.js\");\n/* harmony import */ var _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./myGlobalParams.js */ \"./src/myGlobalParams.js\");\n/* harmony import */ var _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./udonChatHTML_elements.js */ \"./src/udonChatHTML_elements.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction htmlElemInit_TextMessageChat(){\r\n   //elemText_chatMessage_SW = document.getElementById(\"textarea_chatMessage-input_sw\");\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_3__.Ghtml.elemText_chatMessage_SW){\r\n     _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_3__.Ghtml.elemText_chatMessage_SW.addEventListener('click', function(e){\r\n         e.target.setAttribute(\"disabled\", true);\r\n         \r\n         let tgtmsg;\r\n         if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_3__.Ghtml.elemText_chatMessage){\r\n             tgtmsg = _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_3__.Ghtml.elemText_chatMessage.value;\r\n             if(tgtmsg){if(tgtmsg!=\"\"){\r\n                   sendNewChatMessage(tgtmsg);\r\n             }}\r\n             _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_3__.Ghtml.elemText_chatMessage.value =\"\";\r\n         }\r\n         \r\n         e.target.removeAttribute(\"disabled\");\r\n     });\r\n   }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction sendNewChatMessage(tgtmsg){\r\n    //チャットに送信する\r\n    \r\n    (0,_udonWebRTC_js__WEBPACK_IMPORTED_MODULE_1__.webRTC_SendData2All)(\"CM\",tgtmsg);\r\n    \r\n\r\n    // 自分のLog画面に表示\r\n    let tgtid = \"\";\r\n    if(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_2__.G.SkyWayPeer) { tgtid = _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_2__.G.SkyWayPeer.id; }\r\n    recieveNewChatMessage(tgtid,tgtmsg)\r\n    \r\n}\r\n\r\n\r\n// メッセージ受信イベントの設定\r\n\r\nfunction recieveNewChatMessage(strid,data,crflg=0) {\r\n    \r\n    (0,_udonChatMessageLog_js__WEBPACK_IMPORTED_MODULE_0__.addNewDataToChatMessageLog)(strid,data,crflg);\r\n    \r\n}\r\n\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdWRvblRleHRNZXNzYWdlQ2hhdC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFFO0FBQ2Y7QUFDYjtBQUNZO0FBQ3JEO0FBQ0E7QUFDb0Y7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxvRkFBNkI7QUFDbkMsS0FBSyxxR0FBOEM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpRkFBMEI7QUFDdEMsc0JBQXNCLHVGQUFnQztBQUN0RCx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBLGFBQWEsdUZBQWdDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxtRUFBbUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLDREQUFZLElBQUksUUFBUSwrREFBZTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtGQUEwQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLzIwMjEwMTExX3dlYmNoYXQvLi9zcmMvdWRvblRleHRNZXNzYWdlQ2hhdC5qcz9kZWY4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFkZE5ld0RhdGFUb0NoYXRNZXNzYWdlTG9nIH0gZnJvbSBcIi4vdWRvbkNoYXRNZXNzYWdlTG9nLmpzXCI7XHJcbmltcG9ydCB7IHdlYlJUQ19TZW5kRGF0YTJBbGwgfSBmcm9tIFwiLi91ZG9uV2ViUlRDLmpzXCI7XHJcbmltcG9ydCB7IEcgfSAgZnJvbSBcIi4vbXlHbG9iYWxQYXJhbXMuanNcIjtcclxuaW1wb3J0IHsgR2h0bWwgIH0gIGZyb20gXCIuL3Vkb25DaGF0SFRNTF9lbGVtZW50cy5qc1wiO1xyXG5cclxuXHJcbmV4cG9ydCB7IGh0bWxFbGVtSW5pdF9UZXh0TWVzc2FnZUNoYXQgLCByZWNpZXZlTmV3Q2hhdE1lc3NhZ2UgLCBzZW5kTmV3Q2hhdE1lc3NhZ2UgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gaHRtbEVsZW1Jbml0X1RleHRNZXNzYWdlQ2hhdCgpe1xyXG4gICAvL2VsZW1UZXh0X2NoYXRNZXNzYWdlX1NXID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZXh0YXJlYV9jaGF0TWVzc2FnZS1pbnB1dF9zd1wiKTtcclxuICAgaWYoR2h0bWwuZWxlbVRleHRfY2hhdE1lc3NhZ2VfU1cpe1xyXG4gICAgIEdodG1sLmVsZW1UZXh0X2NoYXRNZXNzYWdlX1NXLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgIGUudGFyZ2V0LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgICAgICBcclxuICAgICAgICAgbGV0IHRndG1zZztcclxuICAgICAgICAgaWYoR2h0bWwuZWxlbVRleHRfY2hhdE1lc3NhZ2Upe1xyXG4gICAgICAgICAgICAgdGd0bXNnID0gR2h0bWwuZWxlbVRleHRfY2hhdE1lc3NhZ2UudmFsdWU7XHJcbiAgICAgICAgICAgICBpZih0Z3Rtc2cpe2lmKHRndG1zZyE9XCJcIil7XHJcbiAgICAgICAgICAgICAgICAgICBzZW5kTmV3Q2hhdE1lc3NhZ2UodGd0bXNnKTtcclxuICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICBHaHRtbC5lbGVtVGV4dF9jaGF0TWVzc2FnZS52YWx1ZSA9XCJcIjtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBcclxuICAgICAgICAgZS50YXJnZXQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgfSk7XHJcbiAgIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBzZW5kTmV3Q2hhdE1lc3NhZ2UodGd0bXNnKXtcclxuICAgIC8v44OB44Oj44OD44OI44Gr6YCB5L+h44GZ44KLXHJcbiAgICBcclxuICAgIHdlYlJUQ19TZW5kRGF0YTJBbGwoXCJDTVwiLHRndG1zZyk7XHJcbiAgICBcclxuXHJcbiAgICAvLyDoh6rliIbjga5Mb2fnlLvpnaLjgavooajnpLpcclxuICAgIGxldCB0Z3RpZCA9IFwiXCI7XHJcbiAgICBpZihHLlNreVdheVBlZXIpIHsgdGd0aWQgPSBHLlNreVdheVBlZXIuaWQ7IH1cclxuICAgIHJlY2lldmVOZXdDaGF0TWVzc2FnZSh0Z3RpZCx0Z3Rtc2cpXHJcbiAgICBcclxufVxyXG5cclxuXHJcbi8vIOODoeODg+OCu+ODvOOCuOWPl+S/oeOCpOODmeODs+ODiOOBruioreWumlxyXG5cclxuZnVuY3Rpb24gcmVjaWV2ZU5ld0NoYXRNZXNzYWdlKHN0cmlkLGRhdGEsY3JmbGc9MCkge1xyXG4gICAgXHJcbiAgICBhZGROZXdEYXRhVG9DaGF0TWVzc2FnZUxvZyhzdHJpZCxkYXRhLGNyZmxnKTtcclxuICAgIFxyXG59XHJcblxyXG5cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/udonTextMessageChat.js\n");

/***/ }),

/***/ "./src/udonWebRTC.js":
/*!***************************!*\
  !*** ./src/udonWebRTC.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"connectedDatasModifyFlg\": () => (/* binding */ connectedDatasModifyFlg),\n/* harmony export */   \"deletePeerFromCallList\": () => (/* binding */ deletePeerFromCallList),\n/* harmony export */   \"deletePeerFromDataList\": () => (/* binding */ deletePeerFromDataList),\n/* harmony export */   \"htmlElemInit_WebRTC\": () => (/* binding */ htmlElemInit_WebRTC),\n/* harmony export */   \"quitAllConnection\": () => (/* binding */ quitAllConnection),\n/* harmony export */   \"sendStreamToPeer\": () => (/* binding */ sendStreamToPeer),\n/* harmony export */   \"startMultiparty\": () => (/* binding */ startMultiparty),\n/* harmony export */   \"webRTC_SendData2All\": () => (/* binding */ webRTC_SendData2All)\n/* harmony export */ });\n/* harmony import */ var _myClasses_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./myClasses.js */ \"./src/myClasses.js\");\n/* harmony import */ var _udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./udonChatHTML_VideoStreamElement.js */ \"./src/udonChatHTML_VideoStreamElement.js\");\n/* harmony import */ var _myfunc_cookie_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./myfunc_cookie.js */ \"./src/myfunc_cookie.js\");\n/* harmony import */ var _udonTextMessageChat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./udonTextMessageChat.js */ \"./src/udonTextMessageChat.js\");\n/* harmony import */ var _udonChatMessageLog_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./udonChatMessageLog.js */ \"./src/udonChatMessageLog.js\");\n/* harmony import */ var _udonRecordVoice_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./udonRecordVoice.js */ \"./src/udonRecordVoice.js\");\n/* harmony import */ var _myfunc_MessagePack_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./myfunc_MessagePack.js */ \"./src/myfunc_MessagePack.js\");\n/* harmony import */ var _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./myGlobalParams.js */ \"./src/myGlobalParams.js\");\n/* harmony import */ var _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./udonChatHTML_elements.js */ \"./src/udonChatHTML_elements.js\");\n/* harmony import */ var _udonMediaStream_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./udonMediaStream.js */ \"./src/udonMediaStream.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n // 循環参照に注意\r\n//let forceOnElemStream_SW;\r\n//import(\"./udonChatHTML.js\").then((module)=>{\r\n//          forceOnElemStream_SW = module.forceOnElemStream_SW;\r\n//});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ===================================================\r\nlet connectedDatasModifyFlg=0;\r\n\r\n\r\n\r\n\r\n// ===================================================\r\nfunction htmlElemInit_WebRTC(){\r\n   // elemAddNewPeer_SW = document.getElementById(\"my-addNewPeer\");\r\n   if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_8__.Ghtml.elemAddNewPeer_SW){\r\n     _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_8__.Ghtml.elemAddNewPeer_SW.addEventListener('click', function(e){\r\n         e.target.setAttribute(\"disabled\", true);\r\n         \r\n         let tgtpeerid;\r\n         if(_udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_8__.Ghtml.elemText_AddNewPeerID){\r\n             tgtpeerid = _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_8__.Ghtml.elemText_AddNewPeerID.value;\r\n             if(tgtpeerid){\r\n               if(tgtpeerid!=\"\"){\r\n                   addNewPeer(tgtpeerid);\r\n               }\r\n             }\r\n             _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_8__.Ghtml.elemText_AddNewPeerID.value =\"\";\r\n         }\r\n         e.target.removeAttribute(\"disabled\");\r\n     });\r\n   }\r\n}\r\n\r\n\r\n\r\n\r\n// ===================================================\r\n\r\nfunction startMultiparty(){\r\n  \r\n  // SkyWayのシグナリングサーバーへ接続する\r\n  _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.SkyWayPeer = getSkywayPeerInstance();\r\n  \r\n  if(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.SkyWayPeer){\r\n    // シグナリングサーバへの接続が確立したときに、このopenイベントが呼ばれる\r\n    _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.SkyWayPeer.on('open', function(){\r\n      // 自分のIDを表示する\r\n      // - 自分のIDはpeerオブジェクトのidプロパティに存在する\r\n      // - 相手はこのIDを指定することで、通話を開始することができる\r\n      _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_8__.Ghtml.elemText_myPeerId.value = _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.SkyWayPeer.id.toString();\r\n    });\r\n    \r\n\r\n    // 相手からデータ通信の接続要求イベントが来た場合、このconnectionイベントが呼ばれる\r\n    // - 渡されるconnectionオブジェクトを操作することで、データ通信が可能\r\n    _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.SkyWayPeer.on('connection', function(dataConnection){\r\n            createNewPeerSettingData(dataConnection)\r\n    });\r\n\r\n    // 相手からビデオ通話がかかってきた場合、このcallイベントが呼ばれる\r\n    // - 渡されるcallオブジェクトを操作することで、ビデオ映像を送受信できる\r\n    _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.SkyWayPeer.on('call', function(callConnection){\r\n            createNewPeerSettingCall(callConnection);\r\n    });\r\n\r\n    _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.SkyWayPeer.on(\"close\", () => {\r\n      let i=0;\r\n    });\r\n  }\r\n  \r\n  \r\n  \r\n  // 接続の初期化(ON)\r\n  // toggleElemStream_SW();\r\n  \r\n}\r\n\r\n\r\n// 新しい接続先に此方から接続に行った場合。 利用者の操作からの処理である場合 actionFlg=1\r\nfunction addNewPeer(newPeerID,actionFlg=1){\r\n  if(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.SkyWayPeer){\r\n    (0,_udonMediaStream_js__WEBPACK_IMPORTED_MODULE_9__.forceOnElemStream_SW)();\r\n    \r\n    // 相手と通話を開始して、自分のストリームを渡す\r\n    sendStreamToPeer(newPeerID);\r\n    \r\n    // 相手へのデータ通信接続を開始する\r\n    connectDataToPeer(newPeerID,actionFlg);\r\n    \r\n  }\r\n}\r\nfunction sendStreamToPeer(newPeerID){\r\n    // 相手と通話を開始して、自分のストリームを渡す\r\n    let call = _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.SkyWayPeer.call(newPeerID, _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.localStream);\r\n    if(call){\r\n        //call.on(\"open\", function() {\r\n            // 相手のストリームが渡された場合のイベントを設置する\r\n            createNewPeerSettingCall(call);\r\n        //})\r\n    }\r\n}\r\nfunction connectDataToPeer(newPeerID,actionFlg=0){\r\n    // 相手へのデータ通信接続を開始する\r\n    let conn = _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.SkyWayPeer.connect(newPeerID);\r\n\r\n    if(conn){\r\n            createNewPeerSettingData(conn,1,actionFlg);\r\n            // 相手のIDを表示する\r\n            // - 相手のIDはconnectionオブジェクトのidプロパティに存在する\r\n            //$(\"#peer-id\").text(conn.remoteId);\r\n\r\n\r\n    }\r\n}\r\nfunction createNewPeerSettingData(dataConnection,directionFlg=0,actionFlg=0){\r\n    //新規の通信相手を設定する(data)  dataConnection.remoteId は相手のPeerID\r\n    // directionFlg=1:こちらからの接続要求。0：向こうからの接続要求\r\n    console.log(\"debug : createNewPeerSettingData() \"+(directionFlg==1 ? \"to \":directionFlg==0 ? \"from \":\"??? \")+dataConnection.remoteId+\".\"  );\r\n\r\n    (0,_udonMediaStream_js__WEBPACK_IMPORTED_MODULE_9__.forceOnElemStream_SW)();\r\n\r\n     if (dataConnection.remoteId in _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedDatas) {\r\n         console.log(\"Warning (debug): コネクションojb上書き発生 [\"+dataConnection.remoteId+\"].\"  );\r\n     }else{\r\n         (0,_udonChatMessageLog_js__WEBPACK_IMPORTED_MODULE_4__.addNewDataToChatMessageLog)(dataConnection.remoteId,\"(接続)\",1); // 自分のLog画面に表示\r\n     }\r\n\r\n\r\n      \r\n     // 切断時に利用するため、コネクションオブジェクトを保存しておく\r\n      _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedDatas[dataConnection.remoteId] = dataConnection;\r\n\r\n     // 通信相手一覧のHTML-Domを設置する\r\n      if(!(document.getElementById('div_peerid-'+dataConnection.remoteId))){\r\n          (0,_udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_1__.domAppendOrRemoveforPeer)(1,dataConnection.remoteId); //Dom生成\r\n      }\r\n      \r\n      \r\n      // メッセージ受信イベントの設定\r\n      dataConnection.on(\"data\", function(data){\r\n            checkRecievedDataStatus(dataConnection.remoteId , data);\r\n      });\r\n      \r\n      //先方から接続が切断された場合の処理\r\n      dataConnection.on(\"close\", function(data){\r\n            let i=0;   // dummy\r\n            deletePeerFromCallList(dataConnection.remoteId);//データ接続切断時は映像/音声も切断する\r\n            deletePeerFromDataList(dataConnection.remoteId);\r\n      });\r\n      \r\n      \r\n      dataConnection.on(\"open\", function(data){\r\n          if(actionFlg!=0){ //こちらからの要求操作である場合\r\n              //こちらで保持している接続先を相手に送信する\r\n              sendListConnection(dataConnection.remoteId,1); // 送信先相手に、再送信要求付を付ける\r\n          }\r\n      });\r\n      \r\n\r\n\r\n   \r\n}\r\nfunction sendListConnection(remoteId,requireCastFlg=0){\r\n    //こちらで保持している接続先を相手に送信する\r\n    if(remoteId){if (remoteId in _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedDatas){\r\n        let conn = _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedDatas[remoteId];\r\n        if(conn){if(conn.open) {\r\n            let strlist = \"\"; \r\n            if(!(remoteId in _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedDatas)){ strlist = \",\"+(remoteId.toString(10)) }\r\n            for (let key in _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedDatas) {\r\n                strlist += (\",\"+key);\r\n            } \r\n            \r\n            let stts=\"CL\";\r\n            if (requireCastFlg!=0) stts+=\"2\"; // 再送信要求付 CL2\r\n            \r\n            //conn.send(stts+strlist); //strlistの最初はカンマ\r\n            webRTC_SendData(conn,stts,strlist);\r\n        }}\r\n    }}\r\n    \r\n}\r\nfunction createConnectionByList(strList,mode=1){\r\n    //与えられた接続先リストを確認し、未接続な相手があれば接続を試みる\r\n    // mode=0:通常、1:IDが自分より大きい相手のみ、2:小さい相手のみ \r\n    let ans =0;\r\n    let flg=0;\r\n    let flg2=1;// (Mode1,2はそのままではどうもうまく動作しない。時間差をつけて疑似mode0化する)\r\n    \r\n    let tgtlist = strList.split(\",\");\r\n    for (const tgtId of tgtlist) {\r\n        if(tgtId){if(tgtId!=\"\"){if(tgtId!=_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.SkyWayPeer.id){\r\n            if (!(tgtId in _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedDatas)){\r\n                flg=0;\r\n                switch(mode){\r\n                    case 0:\r\n                        flg=1;\r\n                        break;\r\n                    case 1:\r\n                        if(tgtId>_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.SkyWayPeer.id) {flg=1;}\r\n                        break;\r\n                    case 2:\r\n                        if(tgtId<_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.SkyWayPeer.id) {flg=1;} \r\n                        break;\r\n                    default:\r\n                        flg=0;\r\n                }\r\n                if (flg!=0){\r\n                    addNewPeer(tgtId,0);\r\n                    ans++;\r\n                }else{ //G.connectedDatasにのみ追加（接続はしない）\r\n                    //G.connectedDatas[tgtId]=null;\r\n                    //ロジックに穴がある。mode1,2で接続を後回しにされた接続先には、接続先リストも配信されないバグ\r\n                }\r\n            }\r\n        }}}\r\n    }\r\n    \r\n    if(ans!=0){\r\n        console.log(\"debug : createConnectionByList Mode\"+String(mode)+\" finish \"+String(ans)+\".\"+(mode==2 ? \"[Warning]delay!\":\"\")  );\r\n    }\r\n\r\n    if(flg2!=0){\r\n        if (mode==1){\r\n            setTimeout( function(){createConnectionByList(strList,2)} ,1000 );\r\n        }\r\n      //if (mode==2){\r\n      //    setTimeout( function(){createConnectionByList(strList,1)} ,1000 );\r\n      //}\r\n    }\r\n    return ans;\r\n}\r\nfunction allSendListConnection(expires=\"\"){\r\n    //全ての接続先に、こちらの接続先リストを送信する。但しExpiresを除く\r\n    for (let key in _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedDatas) {\r\n        if(key){if(key!=\"\"){if(key!=_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.SkyWayPeer.id){if(key!=expires){\r\n            sendListConnection(key); // keyは送信先\r\n        }}}}\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n//20220813\r\nfunction webRTC_SendData2All( type , data){\r\n    for (let key in _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedDatas) {\r\n       let conn = _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedDatas[key];\r\n       webRTC_SendData(conn,type,data);\r\n    }\r\n}\r\nfunction webRTC_SendData(targetConnect , type , data){\r\n    if(targetConnect.open) {\r\n        let dataInstance= new _myClasses_js__WEBPACK_IMPORTED_MODULE_0__.c_DataContainer();\r\n        dataInstance.data = data;\r\n        dataInstance.datatype = type;\r\n        //targetConnect.send(\"CM,\"+tgtmsg);\r\n        \r\n        let pkg=(0,_myfunc_MessagePack_js__WEBPACK_IMPORTED_MODULE_6__.msgpack_encode)(dataInstance);\r\n        if(pkg){\r\n            targetConnect.send( {msg:pkg,length:pkg.length} );\r\n        }else{\r\n            console.log(\"Warning(debug):msgpack_encodeに失敗\");\r\n        }\r\n        //delete dataInstance;\r\n    }\r\n}\r\n\r\nfunction checkRecievedDataStatus(remoteId,pkg0){\r\n  // 受信データを種別で振分けする。remoteIdは送信者。\r\n  \r\n  let collectFlg=0;\r\n  \r\n  let pkg = new Uint8Array(pkg0.msg,0,pkg0.length);\r\n  let dataInstance=(0,_myfunc_MessagePack_js__WEBPACK_IMPORTED_MODULE_6__.msgpack_decode)(pkg);\r\n\r\n  if(dataInstance){\r\n    if( typeof(dataInstance)==\"object\"){\r\n      //let aaa = Object.prototype.toString.call(dataInstance);\r\n      //if( aaa==\"[object c_DataContainer]\"){\r\n        //if (dataInstance instanceof c_DataContainer){\r\n            if((dataInstance.data)&&(dataInstance.datatype)){\r\n                \r\n                let data2 = dataInstance.data;\r\n                if(dataInstance.isCompressed){data2 = data.data;}\r\n                \r\n                switch(dataInstance.datatype){\r\n                  case \"CM\": // Chatメッセージ\r\n                      (0,_udonTextMessageChat_js__WEBPACK_IMPORTED_MODULE_3__.recieveNewChatMessage)(remoteId,data2);\r\n                      break;\r\n                  case \"CL\": // ConnectionList 接続先一覧\r\n                  case \"CL2\": // 再送信要求付\r\n                      console.log(\"debug : recieve ConnectionList(CL2) from \"+remoteId+\". \"+data2  );\r\n                      createConnectionByList(data2,1);\r\n                      if(dataInstance.datatype==\"CL2\") {\r\n                          allSendListConnection(); //新規入室者を全メンバーに通知\r\n                          //sendNewChatMessage(\"(入室) \"+remoteId); // 入室者はremoteIdであり、自分は申請受付者になる\r\n                      }\r\n                      break;\r\n                  default:\r\n                      console.log(\"Warning(debug):[\"+remoteId+\"]より不正なデータ(\"+data.datatype+\")を受信 : \" + data);\r\n                      break;\r\n                }\r\n                collectFlg=1;\r\n                \r\n            }\r\n        //}\r\n      //}\r\n    }\r\n  }\r\n  \r\n  if(collectFlg==0){\r\n    console.log(\"Warning(debug):[\"+remoteId+\"]より不正なデータを受信 \");\r\n  }\r\n  \r\n}\r\n\r\n\r\n\r\n\r\nfunction createNewPeerSettingCall(callConnection){\r\n    //新規の通信相手を設定する(Stream)\r\n   \r\n   // 切断時に利用するため、コールオブジェクトを保存しておく\r\n   _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedCalls[callConnection.remoteId] = callConnection;\r\n   \r\n   // 通信相手一覧のHTML-Domを設置する\r\n   //if(!(document.getElementById('div_peerid-'+callConnection.remoteId))){\r\n   //   domAppendOrRemoveforPeer(1,callConnection.remoteId); //Dom生成\r\n   //}\r\n   \r\n   if(callConnection._options.payload){\r\n       // 自分の映像ストリームを相手に渡す\r\n       // - getUserMediaで取得したストリームオブジェクトを指定する\r\n       if(!_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.localStream) {\r\n          _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.localStream=new MediaStream();\r\n       }\r\n       callConnection.answer(_myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.localStream);\r\n       \r\n   }\r\n   \r\n      \r\n      // 相手のストリームが渡された場合、このstreamイベントが呼ばれる\r\n      // - 渡されるstreamオブジェクトは相手の映像についてのストリームオブジェクト\r\n      \r\n      callConnection.on('stream', function(stream){\r\n          // 映像ストリームオブジェクトをURLに変換する\r\n          // - video要素に表示できる形にするため変換している\r\n          let tgtelem;\r\n          \r\n          tgtelem=document.getElementById('peervideo-'+callConnection.remoteId);\r\n          \r\n          if(tgtelem){\r\n             \r\n            if ('srcObject' in tgtelem) {\r\n                tgtelem.srcObject = stream;\r\n            }else{\r\n                // var blob=new Blob([data],{type:\"audio/webm\"})\r\n                // tgtelem.src=win.URL.createObjectURL(blob)\r\n                tgtelem.src = URL.createObjectURL(stream)\r\n            }\r\n            \r\n            //録音用GainNodeへの設定\r\n            if(callConnection.remoteId in _udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_1__.audioContextCtrls){\r\n             if(_udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_1__.audioContextCtrls[callConnection.remoteId].gainNode){\r\n                let audioTracks = stream.getAudioTracks();\r\n                if(audioTracks.length) {if(audioTracks[0]){\r\n                    //audioContextCtrls[callConnection.remoteId].orgStream=new MediaStream(audioTracks);\r\n                    _udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_1__.audioContextCtrls[callConnection.remoteId].orgStream=stream;\r\n                    //let audioSource = c_audioContext.createMediaStreamSource(stream);\r\n                    let audioSource = _udonChatHTML_elements_js__WEBPACK_IMPORTED_MODULE_8__.c_audioContext.createMediaStreamSource(new MediaStream(audioTracks));\r\n                    audioSource.connect(_udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_1__.audioContextCtrls[callConnection.remoteId].gainNode);\r\n                    _udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_1__.audioContextCtrls[callConnection.remoteId].gainNode.gain.value =1;\r\n                    \r\n                }}\r\n            }}\r\n            \r\n                 //映像再生の開始\r\n            if(false){}\r\n            \r\n            \r\n            \r\n            //録音に通知\r\n            if(_udonRecordVoice_js__WEBPACK_IMPORTED_MODULE_5__.mediaRecorder!==null){\r\n                (0,_udonRecordVoice_js__WEBPACK_IMPORTED_MODULE_5__.recreateAudioOutputStream)();\r\n            }\r\n            \r\n          }\r\n      });\r\n\r\n      //先方から接続が切断された場合の処理\r\n      callConnection.on(\"close\", () => {\r\n          let i=0;  // dummy\r\n          deletePeerFromCallList(callConnection.remoteId);\r\n      });\r\n\r\n\r\n}\r\n\r\n\r\n\r\nfunction deletePeerFromCallList(tgtPeerID){\r\n   \r\n   if ((tgtPeerID in _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedCalls) == true) {\r\n      \r\n      // 切断時に利用するため保存しておいた コールオブジェクト\r\n      let call = _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedCalls[tgtPeerID];\r\n      \r\n      //切断\r\n      if(call) call.close(true);\r\n      \r\n      //接続先リストから削除する\r\n      delete _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedCalls[tgtPeerID];\r\n      \r\n   }\r\n   //Dom削除\r\n   //if ((tgtPeerID in G.connectedDatas) != true) {\r\n   //    domAppendOrRemoveforPeer(0,tgtPeerID);\r\n   //}\r\n   \r\n}\r\nfunction deletePeerFromDataList(tgtPeerID){\r\n   connectedDatasModifyFlg=1;\r\n   if ((tgtPeerID in _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedDatas) == true) {\r\n      \r\n      // 切断時に利用するため保存しておいた コールオブジェクト\r\n      let conn = _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedDatas[tgtPeerID];\r\n\r\n      //切断\r\n      if(conn) conn.close(true);\r\n      \r\n      //接続先リストから削除する\r\n      delete _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedDatas[tgtPeerID];\r\n      \r\n      (0,_udonChatMessageLog_js__WEBPACK_IMPORTED_MODULE_4__.addNewDataToChatMessageLog)(tgtPeerID,\"(退室)\",1); // 自分のLog画面に表示\r\n   }\r\n   //Dom削除\r\n   if ((tgtPeerID in _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedCalls) != true) {\r\n      (0,_udonChatHTML_VideoStreamElement_js__WEBPACK_IMPORTED_MODULE_1__.domAppendOrRemoveforPeer)(0,tgtPeerID);\r\n   }\r\n   connectedDatasModifyFlg=0;\r\n}\r\n\r\n\r\nfunction quitAllConnection(){\r\n    //全ての接続先を切断する\r\n   \r\n   for (let tgtPeerID in _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedCalls) {\r\n      deletePeerFromCallList(tgtPeerID);\r\n   }\r\n   for (let tgtPeerID in _myGlobalParams_js__WEBPACK_IMPORTED_MODULE_7__.G.connectedDatas) {\r\n      deletePeerFromDataList(tgtPeerID);\r\n   }\r\n   \r\n}\r\n\r\n\r\n\r\n\r\nfunction getSkywayPeerInstance(){\r\n    let ans;\r\n    let varres;\r\n    let strKey;\r\n    \r\n    const cookieName = \"SkyWayKey\";\r\n    \r\n    varres = prompt( \"SkyWay key\" , (0,_myfunc_cookie_js__WEBPACK_IMPORTED_MODULE_2__.getCookie)(cookieName) );\r\n    if(varres){\r\n        strKey=varres.toString();\r\n        \r\n        ans = new Peer({ key:strKey, debug: 3}); /* SkyWay keyを指定 */\r\n        \r\n        ans.on(\"open\",(function(strKeyID){\r\n            if(strKeyID){\r\n               (0,_myfunc_cookie_js__WEBPACK_IMPORTED_MODULE_2__.setCookie)(cookieName,this.socket._key , 100);\r\n            }\r\n        }))\r\n    }\r\n    \r\n    return ans;\r\n}\r\n\r\n\r\n// --------------------------\r\n\r\n\r\n\r\n\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUF5QixnRUFBZ0I7QUFDekM7QUFDQTtBQUNBLHlCQUF5QixnRUFBZ0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDREQUFTO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixxQkFBcUIsR0FBRztBQUNqRDtBQUNBO0FBQ0E7QUFDQSxlQUFlLDREQUFTO0FBQ3hCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLzIwMjEwMTExX3dlYmNoYXQvLi9zcmMvdWRvbldlYlJUQy5qcz9mNTI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNfRGF0YUNvbnRhaW5lciB9IGZyb20gXCIuL215Q2xhc3Nlcy5qc1wiO1xyXG5pbXBvcnQgeyBkb21BcHBlbmRPclJlbW92ZWZvclBlZXIgLGF1ZGlvQ29udGV4dEN0cmxzIH0gZnJvbSBcIi4vdWRvbkNoYXRIVE1MX1ZpZGVvU3RyZWFtRWxlbWVudC5qc1wiO1xyXG5pbXBvcnQgeyBnZXRDb29raWUgLCBzZXRDb29raWUgfSBmcm9tIFwiLi9teWZ1bmNfY29va2llLmpzXCI7XHJcbmltcG9ydCB7IHJlY2lldmVOZXdDaGF0TWVzc2FnZSxzZW5kTmV3Q2hhdE1lc3NhZ2UgfSBmcm9tIFwiLi91ZG9uVGV4dE1lc3NhZ2VDaGF0LmpzXCI7XHJcbmltcG9ydCB7IGFkZE5ld0RhdGFUb0NoYXRNZXNzYWdlTG9nIH0gZnJvbSBcIi4vdWRvbkNoYXRNZXNzYWdlTG9nLmpzXCI7XHJcbmltcG9ydCB7IG1lZGlhUmVjb3JkZXIgLHJlY3JlYXRlQXVkaW9PdXRwdXRTdHJlYW0gfSBmcm9tIFwiLi91ZG9uUmVjb3JkVm9pY2UuanNcIjtcclxuaW1wb3J0IHsgbXNncGFja19lbmNvZGUsbXNncGFja19kZWNvZGUgfSBmcm9tIFwiLi9teWZ1bmNfTWVzc2FnZVBhY2suanNcIjtcclxuXHJcbmltcG9ydCB7IEcgfSAgZnJvbSBcIi4vbXlHbG9iYWxQYXJhbXMuanNcIjtcclxuaW1wb3J0IHsgR2h0bWwgLCAgIGNfYXVkaW9Db250ZXh0fSAgZnJvbSBcIi4vdWRvbkNoYXRIVE1MX2VsZW1lbnRzLmpzXCI7XHJcblxyXG5pbXBvcnQge2ZvcmNlT25FbGVtU3RyZWFtX1NXfSBmcm9tIFwiLi91ZG9uTWVkaWFTdHJlYW0uanNcIjsgLy8g5b6q55Kw5Y+C54Wn44Gr5rOo5oSPXHJcbi8vbGV0IGZvcmNlT25FbGVtU3RyZWFtX1NXO1xyXG4vL2ltcG9ydChcIi4vdWRvbkNoYXRIVE1MLmpzXCIpLnRoZW4oKG1vZHVsZSk9PntcclxuLy8gICAgICAgICAgZm9yY2VPbkVsZW1TdHJlYW1fU1cgPSBtb2R1bGUuZm9yY2VPbkVsZW1TdHJlYW1fU1c7XHJcbi8vfSk7XHJcblxyXG5cclxuZXhwb3J0IHsgc3RhcnRNdWx0aXBhcnR5ICxodG1sRWxlbUluaXRfV2ViUlRDICxkZWxldGVQZWVyRnJvbUNhbGxMaXN0ICwgZGVsZXRlUGVlckZyb21EYXRhTGlzdCAscXVpdEFsbENvbm5lY3Rpb24gLCBzZW5kU3RyZWFtVG9QZWVyICx3ZWJSVENfU2VuZERhdGEyQWxsICxjb25uZWN0ZWREYXRhc01vZGlmeUZsZ31cclxuXHJcblxyXG5cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5sZXQgY29ubmVjdGVkRGF0YXNNb2RpZnlGbGc9MDtcclxuXHJcblxyXG5cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5mdW5jdGlvbiBodG1sRWxlbUluaXRfV2ViUlRDKCl7XHJcbiAgIC8vIGVsZW1BZGROZXdQZWVyX1NXID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteS1hZGROZXdQZWVyXCIpO1xyXG4gICBpZihHaHRtbC5lbGVtQWRkTmV3UGVlcl9TVyl7XHJcbiAgICAgR2h0bWwuZWxlbUFkZE5ld1BlZXJfU1cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgZS50YXJnZXQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICBsZXQgdGd0cGVlcmlkO1xyXG4gICAgICAgICBpZihHaHRtbC5lbGVtVGV4dF9BZGROZXdQZWVySUQpe1xyXG4gICAgICAgICAgICAgdGd0cGVlcmlkID0gR2h0bWwuZWxlbVRleHRfQWRkTmV3UGVlcklELnZhbHVlO1xyXG4gICAgICAgICAgICAgaWYodGd0cGVlcmlkKXtcclxuICAgICAgICAgICAgICAgaWYodGd0cGVlcmlkIT1cIlwiKXtcclxuICAgICAgICAgICAgICAgICAgIGFkZE5ld1BlZXIodGd0cGVlcmlkKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgR2h0bWwuZWxlbVRleHRfQWRkTmV3UGVlcklELnZhbHVlID1cIlwiO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGUudGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgIH0pO1xyXG4gICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZnVuY3Rpb24gc3RhcnRNdWx0aXBhcnR5KCl7XHJcbiAgXHJcbiAgLy8gU2t5V2F544Gu44K344Kw44OK44Oq44Oz44Kw44K144O844OQ44O844G45o6l57aa44GZ44KLXHJcbiAgRy5Ta3lXYXlQZWVyID0gZ2V0U2t5d2F5UGVlckluc3RhbmNlKCk7XHJcbiAgXHJcbiAgaWYoRy5Ta3lXYXlQZWVyKXtcclxuICAgIC8vIOOCt+OCsOODiuODquODs+OCsOOCteODvOODkOOBuOOBruaOpee2muOBjOeiuueri+OBl+OBn+OBqOOBjeOBq+OAgeOBk+OBrm9wZW7jgqTjg5njg7Pjg4jjgYzlkbzjgbDjgozjgotcclxuICAgIEcuU2t5V2F5UGVlci5vbignb3BlbicsIGZ1bmN0aW9uKCl7XHJcbiAgICAgIC8vIOiHquWIhuOBrklE44KS6KGo56S644GZ44KLXHJcbiAgICAgIC8vIC0g6Ieq5YiG44GuSUTjga9wZWVy44Kq44OW44K444Kn44Kv44OI44GuaWTjg5fjg63jg5Hjg4bjgqPjgavlrZjlnKjjgZnjgotcclxuICAgICAgLy8gLSDnm7jmiYvjga/jgZPjga5JROOCkuaMh+WumuOBmeOCi+OBk+OBqOOBp+OAgemAmuipseOCkumWi+Wni+OBmeOCi+OBk+OBqOOBjOOBp+OBjeOCi1xyXG4gICAgICBHaHRtbC5lbGVtVGV4dF9teVBlZXJJZC52YWx1ZSA9IChHLlNreVdheVBlZXIuaWQpLnRvU3RyaW5nKCk7XHJcbiAgICB9KTtcclxuICAgIFxyXG5cclxuICAgIC8vIOebuOaJi+OBi+OCieODh+ODvOOCv+mAmuS/oeOBruaOpee2muimgeaxguOCpOODmeODs+ODiOOBjOadpeOBn+WgtOWQiOOAgeOBk+OBrmNvbm5lY3Rpb27jgqTjg5njg7Pjg4jjgYzlkbzjgbDjgozjgotcclxuICAgIC8vIC0g5rih44GV44KM44KLY29ubmVjdGlvbuOCquODluOCuOOCp+OCr+ODiOOCkuaTjeS9nOOBmeOCi+OBk+OBqOOBp+OAgeODh+ODvOOCv+mAmuS/oeOBjOWPr+iDvVxyXG4gICAgRy5Ta3lXYXlQZWVyLm9uKCdjb25uZWN0aW9uJywgZnVuY3Rpb24oZGF0YUNvbm5lY3Rpb24pe1xyXG4gICAgICAgICAgICBjcmVhdGVOZXdQZWVyU2V0dGluZ0RhdGEoZGF0YUNvbm5lY3Rpb24pXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDnm7jmiYvjgYvjgonjg5Pjg4fjgqrpgJroqbHjgYzjgYvjgYvjgaPjgabjgY3jgZ/loLTlkIjjgIHjgZPjga5jYWxs44Kk44OZ44Oz44OI44GM5ZG844Gw44KM44KLXHJcbiAgICAvLyAtIOa4oeOBleOCjOOCi2NhbGzjgqrjg5bjgrjjgqfjgq/jg4jjgpLmk43kvZzjgZnjgovjgZPjgajjgafjgIHjg5Pjg4fjgqrmmKDlg4/jgpLpgIHlj5fkv6HjgafjgY3jgotcclxuICAgIEcuU2t5V2F5UGVlci5vbignY2FsbCcsIGZ1bmN0aW9uKGNhbGxDb25uZWN0aW9uKXtcclxuICAgICAgICAgICAgY3JlYXRlTmV3UGVlclNldHRpbmdDYWxsKGNhbGxDb25uZWN0aW9uKTtcclxuICAgIH0pO1xyXG5cclxuICAgIEcuU2t5V2F5UGVlci5vbihcImNsb3NlXCIsICgpID0+IHtcclxuICAgICAgbGV0IGk9MDtcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICBcclxuICBcclxuICAvLyDmjqXntprjga7liJ3mnJ/ljJYoT04pXHJcbiAgLy8gdG9nZ2xlRWxlbVN0cmVhbV9TVygpO1xyXG4gIFxyXG59XHJcblxyXG5cclxuLy8g5paw44GX44GE5o6l57aa5YWI44Gr5q2k5pa544GL44KJ5o6l57aa44Gr6KGM44Gj44Gf5aC05ZCI44CCIOWIqeeUqOiAheOBruaTjeS9nOOBi+OCieOBruWHpueQhuOBp+OBguOCi+WgtOWQiCBhY3Rpb25GbGc9MVxyXG5mdW5jdGlvbiBhZGROZXdQZWVyKG5ld1BlZXJJRCxhY3Rpb25GbGc9MSl7XHJcbiAgaWYoRy5Ta3lXYXlQZWVyKXtcclxuICAgIGZvcmNlT25FbGVtU3RyZWFtX1NXKCk7XHJcbiAgICBcclxuICAgIC8vIOebuOaJi+OBqOmAmuipseOCkumWi+Wni+OBl+OBpuOAgeiHquWIhuOBruOCueODiOODquODvOODoOOCkua4oeOBmVxyXG4gICAgc2VuZFN0cmVhbVRvUGVlcihuZXdQZWVySUQpO1xyXG4gICAgXHJcbiAgICAvLyDnm7jmiYvjgbjjga7jg4fjg7zjgr/pgJrkv6HmjqXntprjgpLplovlp4vjgZnjgotcclxuICAgIGNvbm5lY3REYXRhVG9QZWVyKG5ld1BlZXJJRCxhY3Rpb25GbGcpO1xyXG4gICAgXHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIHNlbmRTdHJlYW1Ub1BlZXIobmV3UGVlcklEKXtcclxuICAgIC8vIOebuOaJi+OBqOmAmuipseOCkumWi+Wni+OBl+OBpuOAgeiHquWIhuOBruOCueODiOODquODvOODoOOCkua4oeOBmVxyXG4gICAgbGV0IGNhbGwgPSBHLlNreVdheVBlZXIuY2FsbChuZXdQZWVySUQsIEcubG9jYWxTdHJlYW0pO1xyXG4gICAgaWYoY2FsbCl7XHJcbiAgICAgICAgLy9jYWxsLm9uKFwib3BlblwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8g55u45omL44Gu44K544OI44Oq44O844Og44GM5rih44GV44KM44Gf5aC05ZCI44Gu44Kk44OZ44Oz44OI44KS6Kit572u44GZ44KLXHJcbiAgICAgICAgICAgIGNyZWF0ZU5ld1BlZXJTZXR0aW5nQ2FsbChjYWxsKTtcclxuICAgICAgICAvL30pXHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY29ubmVjdERhdGFUb1BlZXIobmV3UGVlcklELGFjdGlvbkZsZz0wKXtcclxuICAgIC8vIOebuOaJi+OBuOOBruODh+ODvOOCv+mAmuS/oeaOpee2muOCkumWi+Wni+OBmeOCi1xyXG4gICAgbGV0IGNvbm4gPSBHLlNreVdheVBlZXIuY29ubmVjdChuZXdQZWVySUQpO1xyXG5cclxuICAgIGlmKGNvbm4pe1xyXG4gICAgICAgICAgICBjcmVhdGVOZXdQZWVyU2V0dGluZ0RhdGEoY29ubiwxLGFjdGlvbkZsZyk7XHJcbiAgICAgICAgICAgIC8vIOebuOaJi+OBrklE44KS6KGo56S644GZ44KLXHJcbiAgICAgICAgICAgIC8vIC0g55u45omL44GuSUTjga9jb25uZWN0aW9u44Kq44OW44K444Kn44Kv44OI44GuaWTjg5fjg63jg5Hjg4bjgqPjgavlrZjlnKjjgZnjgotcclxuICAgICAgICAgICAgLy8kKFwiI3BlZXItaWRcIikudGV4dChjb25uLnJlbW90ZUlkKTtcclxuXHJcblxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZU5ld1BlZXJTZXR0aW5nRGF0YShkYXRhQ29ubmVjdGlvbixkaXJlY3Rpb25GbGc9MCxhY3Rpb25GbGc9MCl7XHJcbiAgICAvL+aWsOimj+OBrumAmuS/oeebuOaJi+OCkuioreWumuOBmeOCiyhkYXRhKSAgZGF0YUNvbm5lY3Rpb24ucmVtb3RlSWQg44Gv55u45omL44GuUGVlcklEXHJcbiAgICAvLyBkaXJlY3Rpb25GbGc9MTrjgZPjgaHjgonjgYvjgonjga7mjqXntpropoHmsYLjgIIw77ya5ZCR44GT44GG44GL44KJ44Gu5o6l57aa6KaB5rGCXHJcbiAgICBjb25zb2xlLmxvZyhcImRlYnVnIDogY3JlYXRlTmV3UGVlclNldHRpbmdEYXRhKCkgXCIrKGRpcmVjdGlvbkZsZz09MSA/IFwidG8gXCI6ZGlyZWN0aW9uRmxnPT0wID8gXCJmcm9tIFwiOlwiPz8/IFwiKStkYXRhQ29ubmVjdGlvbi5yZW1vdGVJZCtcIi5cIiAgKTtcclxuXHJcbiAgICBmb3JjZU9uRWxlbVN0cmVhbV9TVygpO1xyXG5cclxuICAgICBpZiAoZGF0YUNvbm5lY3Rpb24ucmVtb3RlSWQgaW4gRy5jb25uZWN0ZWREYXRhcykge1xyXG4gICAgICAgICBjb25zb2xlLmxvZyhcIldhcm5pbmcgKGRlYnVnKTog44Kz44ON44Kv44K344On44Ozb2pi5LiK5pu444GN55m655SfIFtcIitkYXRhQ29ubmVjdGlvbi5yZW1vdGVJZCtcIl0uXCIgICk7XHJcbiAgICAgfWVsc2V7XHJcbiAgICAgICAgIGFkZE5ld0RhdGFUb0NoYXRNZXNzYWdlTG9nKGRhdGFDb25uZWN0aW9uLnJlbW90ZUlkLFwiKOaOpee2milcIiwxKTsgLy8g6Ieq5YiG44GuTG9n55S76Z2i44Gr6KGo56S6XHJcbiAgICAgfVxyXG5cclxuXHJcbiAgICAgIFxyXG4gICAgIC8vIOWIh+aWreaZguOBq+WIqeeUqOOBmeOCi+OBn+OCgeOAgeOCs+ODjeOCr+OCt+ODp+ODs+OCquODluOCuOOCp+OCr+ODiOOCkuS/neWtmOOBl+OBpuOBiuOBj1xyXG4gICAgICBHLmNvbm5lY3RlZERhdGFzW2RhdGFDb25uZWN0aW9uLnJlbW90ZUlkXSA9IGRhdGFDb25uZWN0aW9uO1xyXG5cclxuICAgICAvLyDpgJrkv6Hnm7jmiYvkuIDopqfjga5IVE1MLURvbeOCkuioree9ruOBmeOCi1xyXG4gICAgICBpZighKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXZfcGVlcmlkLScrZGF0YUNvbm5lY3Rpb24ucmVtb3RlSWQpKSl7XHJcbiAgICAgICAgICBkb21BcHBlbmRPclJlbW92ZWZvclBlZXIoMSxkYXRhQ29ubmVjdGlvbi5yZW1vdGVJZCk7IC8vRG9t55Sf5oiQXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIFxyXG4gICAgICAvLyDjg6Hjg4Pjgrvjg7zjgrjlj5fkv6HjgqTjg5njg7Pjg4jjga7oqK3lrppcclxuICAgICAgZGF0YUNvbm5lY3Rpb24ub24oXCJkYXRhXCIsIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICBjaGVja1JlY2lldmVkRGF0YVN0YXR1cyhkYXRhQ29ubmVjdGlvbi5yZW1vdGVJZCAsIGRhdGEpO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIC8v5YWI5pa544GL44KJ5o6l57aa44GM5YiH5pat44GV44KM44Gf5aC05ZCI44Gu5Yem55CGXHJcbiAgICAgIGRhdGFDb25uZWN0aW9uLm9uKFwiY2xvc2VcIiwgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgIGxldCBpPTA7ICAgLy8gZHVtbXlcclxuICAgICAgICAgICAgZGVsZXRlUGVlckZyb21DYWxsTGlzdChkYXRhQ29ubmVjdGlvbi5yZW1vdGVJZCk7Ly/jg4fjg7zjgr/mjqXntprliIfmlq3mmYLjga/mmKDlg48v6Z+z5aOw44KC5YiH5pat44GZ44KLXHJcbiAgICAgICAgICAgIGRlbGV0ZVBlZXJGcm9tRGF0YUxpc3QoZGF0YUNvbm5lY3Rpb24ucmVtb3RlSWQpO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIFxyXG4gICAgICBkYXRhQ29ubmVjdGlvbi5vbihcIm9wZW5cIiwgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICBpZihhY3Rpb25GbGchPTApeyAvL+OBk+OBoeOCieOBi+OCieOBruimgeaxguaTjeS9nOOBp+OBguOCi+WgtOWQiFxyXG4gICAgICAgICAgICAgIC8v44GT44Gh44KJ44Gn5L+d5oyB44GX44Gm44GE44KL5o6l57aa5YWI44KS55u45omL44Gr6YCB5L+h44GZ44KLXHJcbiAgICAgICAgICAgICAgc2VuZExpc3RDb25uZWN0aW9uKGRhdGFDb25uZWN0aW9uLnJlbW90ZUlkLDEpOyAvLyDpgIHkv6HlhYjnm7jmiYvjgavjgIHlho3pgIHkv6HopoHmsYLku5jjgpLku5jjgZHjgotcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG5cclxuXHJcbiAgIFxyXG59XHJcbmZ1bmN0aW9uIHNlbmRMaXN0Q29ubmVjdGlvbihyZW1vdGVJZCxyZXF1aXJlQ2FzdEZsZz0wKXtcclxuICAgIC8v44GT44Gh44KJ44Gn5L+d5oyB44GX44Gm44GE44KL5o6l57aa5YWI44KS55u45omL44Gr6YCB5L+h44GZ44KLXHJcbiAgICBpZihyZW1vdGVJZCl7aWYgKHJlbW90ZUlkIGluIEcuY29ubmVjdGVkRGF0YXMpe1xyXG4gICAgICAgIGxldCBjb25uID0gRy5jb25uZWN0ZWREYXRhc1tyZW1vdGVJZF07XHJcbiAgICAgICAgaWYoY29ubil7aWYoY29ubi5vcGVuKSB7XHJcbiAgICAgICAgICAgIGxldCBzdHJsaXN0ID0gXCJcIjsgXHJcbiAgICAgICAgICAgIGlmKCEocmVtb3RlSWQgaW4gRy5jb25uZWN0ZWREYXRhcykpeyBzdHJsaXN0ID0gXCIsXCIrKHJlbW90ZUlkLnRvU3RyaW5nKDEwKSkgfVxyXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gRy5jb25uZWN0ZWREYXRhcykge1xyXG4gICAgICAgICAgICAgICAgc3RybGlzdCArPSAoXCIsXCIra2V5KTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBzdHRzPVwiQ0xcIjtcclxuICAgICAgICAgICAgaWYgKHJlcXVpcmVDYXN0RmxnIT0wKSBzdHRzKz1cIjJcIjsgLy8g5YaN6YCB5L+h6KaB5rGC5LuYIENMMlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy9jb25uLnNlbmQoc3R0cytzdHJsaXN0KTsgLy9zdHJsaXN044Gu5pyA5Yid44Gv44Kr44Oz44OeXHJcbiAgICAgICAgICAgIHdlYlJUQ19TZW5kRGF0YShjb25uLHN0dHMsc3RybGlzdCk7XHJcbiAgICAgICAgfX1cclxuICAgIH19XHJcbiAgICBcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVDb25uZWN0aW9uQnlMaXN0KHN0ckxpc3QsbW9kZT0xKXtcclxuICAgIC8v5LiO44GI44KJ44KM44Gf5o6l57aa5YWI44Oq44K544OI44KS56K66KqN44GX44CB5pyq5o6l57aa44Gq55u45omL44GM44GC44KM44Gw5o6l57aa44KS6Kmm44G/44KLXHJcbiAgICAvLyBtb2RlPTA66YCa5bi444CBMTpJROOBjOiHquWIhuOCiOOCiuWkp+OBjeOBhOebuOaJi+OBruOBv+OAgTI65bCP44GV44GE55u45omL44Gu44G/IFxyXG4gICAgbGV0IGFucyA9MDtcclxuICAgIGxldCBmbGc9MDtcclxuICAgIGxldCBmbGcyPTE7Ly8gKE1vZGUxLDLjga/jgZ3jga7jgb7jgb7jgafjga/jganjgYbjgoLjgYbjgb7jgY/li5XkvZzjgZfjgarjgYTjgILmmYLplpPlt67jgpLjgaTjgZHjgabnlpHkvLxtb2RlMOWMluOBmeOCiylcclxuICAgIFxyXG4gICAgbGV0IHRndGxpc3QgPSBzdHJMaXN0LnNwbGl0KFwiLFwiKTtcclxuICAgIGZvciAoY29uc3QgdGd0SWQgb2YgdGd0bGlzdCkge1xyXG4gICAgICAgIGlmKHRndElkKXtpZih0Z3RJZCE9XCJcIil7aWYodGd0SWQhPUcuU2t5V2F5UGVlci5pZCl7XHJcbiAgICAgICAgICAgIGlmICghKHRndElkIGluIEcuY29ubmVjdGVkRGF0YXMpKXtcclxuICAgICAgICAgICAgICAgIGZsZz0wO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoKG1vZGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxnPTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGd0SWQ+Ry5Ta3lXYXlQZWVyLmlkKSB7ZmxnPTE7fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRndElkPEcuU2t5V2F5UGVlci5pZCkge2ZsZz0xO30gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsZz0wO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGZsZyE9MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkTmV3UGVlcih0Z3RJZCwwKTtcclxuICAgICAgICAgICAgICAgICAgICBhbnMrKztcclxuICAgICAgICAgICAgICAgIH1lbHNleyAvL0cuY29ubmVjdGVkRGF0YXPjgavjga7jgb/ov73liqDvvIjmjqXntprjga/jgZfjgarjgYTvvIlcclxuICAgICAgICAgICAgICAgICAgICAvL0cuY29ubmVjdGVkRGF0YXNbdGd0SWRdPW51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/jg63jgrjjg4Pjgq/jgavnqbTjgYzjgYLjgovjgIJtb2RlMSwy44Gn5o6l57aa44KS5b6M5Zue44GX44Gr44GV44KM44Gf5o6l57aa5YWI44Gr44Gv44CB5o6l57aa5YWI44Oq44K544OI44KC6YWN5L+h44GV44KM44Gq44GE44OQ44KwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9fX1cclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYoYW5zIT0wKXtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImRlYnVnIDogY3JlYXRlQ29ubmVjdGlvbkJ5TGlzdCBNb2RlXCIrU3RyaW5nKG1vZGUpK1wiIGZpbmlzaCBcIitTdHJpbmcoYW5zKStcIi5cIisobW9kZT09MiA/IFwiW1dhcm5pbmddZGVsYXkhXCI6XCJcIikgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoZmxnMiE9MCl7XHJcbiAgICAgICAgaWYgKG1vZGU9PTEpe1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe2NyZWF0ZUNvbm5lY3Rpb25CeUxpc3Qoc3RyTGlzdCwyKX0gLDEwMDAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIC8vaWYgKG1vZGU9PTIpe1xyXG4gICAgICAvLyAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe2NyZWF0ZUNvbm5lY3Rpb25CeUxpc3Qoc3RyTGlzdCwxKX0gLDEwMDAgKTtcclxuICAgICAgLy99XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYW5zO1xyXG59XHJcbmZ1bmN0aW9uIGFsbFNlbmRMaXN0Q29ubmVjdGlvbihleHBpcmVzPVwiXCIpe1xyXG4gICAgLy/lhajjgabjga7mjqXntprlhYjjgavjgIHjgZPjgaHjgonjga7mjqXntprlhYjjg6rjgrnjg4jjgpLpgIHkv6HjgZnjgovjgILkvYbjgZdFeHBpcmVz44KS6Zmk44GPXHJcbiAgICBmb3IgKGxldCBrZXkgaW4gRy5jb25uZWN0ZWREYXRhcykge1xyXG4gICAgICAgIGlmKGtleSl7aWYoa2V5IT1cIlwiKXtpZihrZXkhPUcuU2t5V2F5UGVlci5pZCl7aWYoa2V5IT1leHBpcmVzKXtcclxuICAgICAgICAgICAgc2VuZExpc3RDb25uZWN0aW9uKGtleSk7IC8vIGtleeOBr+mAgeS/oeWFiFxyXG4gICAgICAgIH19fX1cclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuLy8yMDIyMDgxM1xyXG5mdW5jdGlvbiB3ZWJSVENfU2VuZERhdGEyQWxsKCB0eXBlICwgZGF0YSl7XHJcbiAgICBmb3IgKGxldCBrZXkgaW4gRy5jb25uZWN0ZWREYXRhcykge1xyXG4gICAgICAgbGV0IGNvbm4gPSBHLmNvbm5lY3RlZERhdGFzW2tleV07XHJcbiAgICAgICB3ZWJSVENfU2VuZERhdGEoY29ubix0eXBlLGRhdGEpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHdlYlJUQ19TZW5kRGF0YSh0YXJnZXRDb25uZWN0ICwgdHlwZSAsIGRhdGEpe1xyXG4gICAgaWYodGFyZ2V0Q29ubmVjdC5vcGVuKSB7XHJcbiAgICAgICAgbGV0IGRhdGFJbnN0YW5jZT0gbmV3IGNfRGF0YUNvbnRhaW5lcigpO1xyXG4gICAgICAgIGRhdGFJbnN0YW5jZS5kYXRhID0gZGF0YTtcclxuICAgICAgICBkYXRhSW5zdGFuY2UuZGF0YXR5cGUgPSB0eXBlO1xyXG4gICAgICAgIC8vdGFyZ2V0Q29ubmVjdC5zZW5kKFwiQ00sXCIrdGd0bXNnKTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgcGtnPW1zZ3BhY2tfZW5jb2RlKGRhdGFJbnN0YW5jZSk7XHJcbiAgICAgICAgaWYocGtnKXtcclxuICAgICAgICAgICAgdGFyZ2V0Q29ubmVjdC5zZW5kKCB7bXNnOnBrZyxsZW5ndGg6cGtnLmxlbmd0aH0gKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJXYXJuaW5nKGRlYnVnKTptc2dwYWNrX2VuY29kZeOBq+WkseaVl1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9kZWxldGUgZGF0YUluc3RhbmNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja1JlY2lldmVkRGF0YVN0YXR1cyhyZW1vdGVJZCxwa2cwKXtcclxuICAvLyDlj5fkv6Hjg4fjg7zjgr/jgpLnqK7liKXjgafmjK/liIbjgZHjgZnjgovjgIJyZW1vdGVJZOOBr+mAgeS/oeiAheOAglxyXG4gIFxyXG4gIGxldCBjb2xsZWN0RmxnPTA7XHJcbiAgXHJcbiAgbGV0IHBrZyA9IG5ldyBVaW50OEFycmF5KHBrZzAubXNnLDAscGtnMC5sZW5ndGgpO1xyXG4gIGxldCBkYXRhSW5zdGFuY2U9bXNncGFja19kZWNvZGUocGtnKTtcclxuXHJcbiAgaWYoZGF0YUluc3RhbmNlKXtcclxuICAgIGlmKCB0eXBlb2YoZGF0YUluc3RhbmNlKT09XCJvYmplY3RcIil7XHJcbiAgICAgIC8vbGV0IGFhYSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChkYXRhSW5zdGFuY2UpO1xyXG4gICAgICAvL2lmKCBhYWE9PVwiW29iamVjdCBjX0RhdGFDb250YWluZXJdXCIpe1xyXG4gICAgICAgIC8vaWYgKGRhdGFJbnN0YW5jZSBpbnN0YW5jZW9mIGNfRGF0YUNvbnRhaW5lcil7XHJcbiAgICAgICAgICAgIGlmKChkYXRhSW5zdGFuY2UuZGF0YSkmJihkYXRhSW5zdGFuY2UuZGF0YXR5cGUpKXtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IGRhdGEyID0gZGF0YUluc3RhbmNlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhSW5zdGFuY2UuaXNDb21wcmVzc2VkKXtkYXRhMiA9IGRhdGEuZGF0YTt9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHN3aXRjaChkYXRhSW5zdGFuY2UuZGF0YXR5cGUpe1xyXG4gICAgICAgICAgICAgICAgICBjYXNlIFwiQ01cIjogLy8gQ2hhdOODoeODg+OCu+ODvOOCuFxyXG4gICAgICAgICAgICAgICAgICAgICAgcmVjaWV2ZU5ld0NoYXRNZXNzYWdlKHJlbW90ZUlkLGRhdGEyKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICBjYXNlIFwiQ0xcIjogLy8gQ29ubmVjdGlvbkxpc3Qg5o6l57aa5YWI5LiA6KanXHJcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJDTDJcIjogLy8g5YaN6YCB5L+h6KaB5rGC5LuYXHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImRlYnVnIDogcmVjaWV2ZSBDb25uZWN0aW9uTGlzdChDTDIpIGZyb20gXCIrcmVtb3RlSWQrXCIuIFwiK2RhdGEyICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ29ubmVjdGlvbkJ5TGlzdChkYXRhMiwxKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGFJbnN0YW5jZS5kYXRhdHlwZT09XCJDTDJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFsbFNlbmRMaXN0Q29ubmVjdGlvbigpOyAvL+aWsOimj+WFpeWupOiAheOCkuWFqOODoeODs+ODkOODvOOBq+mAmuefpVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VuZE5ld0NoYXRNZXNzYWdlKFwiKOWFpeWupCkgXCIrcmVtb3RlSWQpOyAvLyDlhaXlrqTogIXjga9yZW1vdGVJZOOBp+OBguOCiuOAgeiHquWIhuOBr+eUs+iri+WPl+S7mOiAheOBq+OBquOCi1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIldhcm5pbmcoZGVidWcpOltcIityZW1vdGVJZCtcIl3jgojjgorkuI3mraPjgarjg4fjg7zjgr8oXCIrZGF0YS5kYXRhdHlwZStcIinjgpLlj5fkv6EgOiBcIiArIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb2xsZWN0RmxnPTE7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vfVxyXG4gICAgICAvL31cclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgaWYoY29sbGVjdEZsZz09MCl7XHJcbiAgICBjb25zb2xlLmxvZyhcIldhcm5pbmcoZGVidWcpOltcIityZW1vdGVJZCtcIl3jgojjgorkuI3mraPjgarjg4fjg7zjgr/jgpLlj5fkv6EgXCIpO1xyXG4gIH1cclxuICBcclxufVxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gY3JlYXRlTmV3UGVlclNldHRpbmdDYWxsKGNhbGxDb25uZWN0aW9uKXtcclxuICAgIC8v5paw6KaP44Gu6YCa5L+h55u45omL44KS6Kit5a6a44GZ44KLKFN0cmVhbSlcclxuICAgXHJcbiAgIC8vIOWIh+aWreaZguOBq+WIqeeUqOOBmeOCi+OBn+OCgeOAgeOCs+ODvOODq+OCquODluOCuOOCp+OCr+ODiOOCkuS/neWtmOOBl+OBpuOBiuOBj1xyXG4gICBHLmNvbm5lY3RlZENhbGxzW2NhbGxDb25uZWN0aW9uLnJlbW90ZUlkXSA9IGNhbGxDb25uZWN0aW9uO1xyXG4gICBcclxuICAgLy8g6YCa5L+h55u45omL5LiA6Kan44GuSFRNTC1Eb23jgpLoqK3nva7jgZnjgotcclxuICAgLy9pZighKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXZfcGVlcmlkLScrY2FsbENvbm5lY3Rpb24ucmVtb3RlSWQpKSl7XHJcbiAgIC8vICAgZG9tQXBwZW5kT3JSZW1vdmVmb3JQZWVyKDEsY2FsbENvbm5lY3Rpb24ucmVtb3RlSWQpOyAvL0RvbeeUn+aIkFxyXG4gICAvL31cclxuICAgXHJcbiAgIGlmKGNhbGxDb25uZWN0aW9uLl9vcHRpb25zLnBheWxvYWQpe1xyXG4gICAgICAgLy8g6Ieq5YiG44Gu5pig5YOP44K544OI44Oq44O844Og44KS55u45omL44Gr5rih44GZXHJcbiAgICAgICAvLyAtIGdldFVzZXJNZWRpYeOBp+WPluW+l+OBl+OBn+OCueODiOODquODvOODoOOCquODluOCuOOCp+OCr+ODiOOCkuaMh+WumuOBmeOCi1xyXG4gICAgICAgaWYoIUcubG9jYWxTdHJlYW0pIHtcclxuICAgICAgICAgIEcubG9jYWxTdHJlYW09bmV3IE1lZGlhU3RyZWFtKCk7XHJcbiAgICAgICB9XHJcbiAgICAgICBjYWxsQ29ubmVjdGlvbi5hbnN3ZXIoRy5sb2NhbFN0cmVhbSk7XHJcbiAgICAgICBcclxuICAgfVxyXG4gICBcclxuICAgICAgXHJcbiAgICAgIC8vIOebuOaJi+OBruOCueODiOODquODvOODoOOBjOa4oeOBleOCjOOBn+WgtOWQiOOAgeOBk+OBrnN0cmVhbeOCpOODmeODs+ODiOOBjOWRvOOBsOOCjOOCi1xyXG4gICAgICAvLyAtIOa4oeOBleOCjOOCi3N0cmVhbeOCquODluOCuOOCp+OCr+ODiOOBr+ebuOaJi+OBruaYoOWDj+OBq+OBpOOBhOOBpuOBruOCueODiOODquODvOODoOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICBcclxuICAgICAgY2FsbENvbm5lY3Rpb24ub24oJ3N0cmVhbScsIGZ1bmN0aW9uKHN0cmVhbSl7XHJcbiAgICAgICAgICAvLyDmmKDlg4/jgrnjg4jjg6rjg7zjg6Djgqrjg5bjgrjjgqfjgq/jg4jjgpJVUkzjgavlpInmj5vjgZnjgotcclxuICAgICAgICAgIC8vIC0gdmlkZW/opoHntKDjgavooajnpLrjgafjgY3jgovlvaLjgavjgZnjgovjgZ/jgoHlpInmj5vjgZfjgabjgYTjgotcclxuICAgICAgICAgIGxldCB0Z3RlbGVtO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB0Z3RlbGVtPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZWVydmlkZW8tJytjYWxsQ29ubmVjdGlvbi5yZW1vdGVJZCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmKHRndGVsZW0pe1xyXG4gICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICgnc3JjT2JqZWN0JyBpbiB0Z3RlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICB0Z3RlbGVtLnNyY09iamVjdCA9IHN0cmVhbTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAvLyB2YXIgYmxvYj1uZXcgQmxvYihbZGF0YV0se3R5cGU6XCJhdWRpby93ZWJtXCJ9KVxyXG4gICAgICAgICAgICAgICAgLy8gdGd0ZWxlbS5zcmM9d2luLlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYilcclxuICAgICAgICAgICAgICAgIHRndGVsZW0uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8v6Yyy6Z+z55SoR2Fpbk5vZGXjgbjjga7oqK3lrppcclxuICAgICAgICAgICAgaWYoY2FsbENvbm5lY3Rpb24ucmVtb3RlSWQgaW4gYXVkaW9Db250ZXh0Q3RybHMpe1xyXG4gICAgICAgICAgICAgaWYoYXVkaW9Db250ZXh0Q3RybHNbY2FsbENvbm5lY3Rpb24ucmVtb3RlSWRdLmdhaW5Ob2RlKXtcclxuICAgICAgICAgICAgICAgIGxldCBhdWRpb1RyYWNrcyA9IHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpO1xyXG4gICAgICAgICAgICAgICAgaWYoYXVkaW9UcmFja3MubGVuZ3RoKSB7aWYoYXVkaW9UcmFja3NbMF0pe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vYXVkaW9Db250ZXh0Q3RybHNbY2FsbENvbm5lY3Rpb24ucmVtb3RlSWRdLm9yZ1N0cmVhbT1uZXcgTWVkaWFTdHJlYW0oYXVkaW9UcmFja3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvQ29udGV4dEN0cmxzW2NhbGxDb25uZWN0aW9uLnJlbW90ZUlkXS5vcmdTdHJlYW09c3RyZWFtO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vbGV0IGF1ZGlvU291cmNlID0gY19hdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2Uoc3RyZWFtKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYXVkaW9Tb3VyY2UgPSBjX2F1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShuZXcgTWVkaWFTdHJlYW0oYXVkaW9UcmFja3MpKTtcclxuICAgICAgICAgICAgICAgICAgICBhdWRpb1NvdXJjZS5jb25uZWN0KGF1ZGlvQ29udGV4dEN0cmxzW2NhbGxDb25uZWN0aW9uLnJlbW90ZUlkXS5nYWluTm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9Db250ZXh0Q3RybHNbY2FsbENvbm5lY3Rpb24ucmVtb3RlSWRdLmdhaW5Ob2RlLmdhaW4udmFsdWUgPTE7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAvL+aYoOWDj+WGjeeUn+OBrumWi+Wni1xyXG4gICAgICAgICAgICBpZigxPT0yKXsgICAvLyBIVE1M5YG044Gn5bGe5oCn44Gu5oyH5a6a44KS44GX44Gf5aC05ZCI44Gv5LiN6KaB44GLXHJcbiAgICAgICAgICAgICAgdGd0ZWxlbS5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsIGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0Z3RlbGVtLnZvbHVtZSA9IDAuMztcclxuICAgICAgICAgICAgICAgICAgdGd0ZWxlbS5tdXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICB0Z3RlbGVtLmNvbnRyb2xzPXRydWU7XHJcbiAgICAgICAgICAgICAgICAgIHRndGVsZW0ucGxheSgpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8v6Yyy6Z+z44Gr6YCa55+lXHJcbiAgICAgICAgICAgIGlmKG1lZGlhUmVjb3JkZXIhPT1udWxsKXtcclxuICAgICAgICAgICAgICAgIHJlY3JlYXRlQXVkaW9PdXRwdXRTdHJlYW0oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvL+WFiOaWueOBi+OCieaOpee2muOBjOWIh+aWreOBleOCjOOBn+WgtOWQiOOBruWHpueQhlxyXG4gICAgICBjYWxsQ29ubmVjdGlvbi5vbihcImNsb3NlXCIsICgpID0+IHtcclxuICAgICAgICAgIGxldCBpPTA7ICAvLyBkdW1teVxyXG4gICAgICAgICAgZGVsZXRlUGVlckZyb21DYWxsTGlzdChjYWxsQ29ubmVjdGlvbi5yZW1vdGVJZCk7XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbn1cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gZGVsZXRlUGVlckZyb21DYWxsTGlzdCh0Z3RQZWVySUQpe1xyXG4gICBcclxuICAgaWYgKCh0Z3RQZWVySUQgaW4gRy5jb25uZWN0ZWRDYWxscykgPT0gdHJ1ZSkge1xyXG4gICAgICBcclxuICAgICAgLy8g5YiH5pat5pmC44Gr5Yip55So44GZ44KL44Gf44KB5L+d5a2Y44GX44Gm44GK44GE44GfIOOCs+ODvOODq+OCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICBsZXQgY2FsbCA9IEcuY29ubmVjdGVkQ2FsbHNbdGd0UGVlcklEXTtcclxuICAgICAgXHJcbiAgICAgIC8v5YiH5patXHJcbiAgICAgIGlmKGNhbGwpIGNhbGwuY2xvc2UodHJ1ZSk7XHJcbiAgICAgIFxyXG4gICAgICAvL+aOpee2muWFiOODquOCueODiOOBi+OCieWJiumZpOOBmeOCi1xyXG4gICAgICBkZWxldGUgRy5jb25uZWN0ZWRDYWxsc1t0Z3RQZWVySURdO1xyXG4gICAgICBcclxuICAgfVxyXG4gICAvL0RvbeWJiumZpFxyXG4gICAvL2lmICgodGd0UGVlcklEIGluIEcuY29ubmVjdGVkRGF0YXMpICE9IHRydWUpIHtcclxuICAgLy8gICAgZG9tQXBwZW5kT3JSZW1vdmVmb3JQZWVyKDAsdGd0UGVlcklEKTtcclxuICAgLy99XHJcbiAgIFxyXG59XHJcbmZ1bmN0aW9uIGRlbGV0ZVBlZXJGcm9tRGF0YUxpc3QodGd0UGVlcklEKXtcclxuICAgY29ubmVjdGVkRGF0YXNNb2RpZnlGbGc9MTtcclxuICAgaWYgKCh0Z3RQZWVySUQgaW4gRy5jb25uZWN0ZWREYXRhcykgPT0gdHJ1ZSkge1xyXG4gICAgICBcclxuICAgICAgLy8g5YiH5pat5pmC44Gr5Yip55So44GZ44KL44Gf44KB5L+d5a2Y44GX44Gm44GK44GE44GfIOOCs+ODvOODq+OCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICBsZXQgY29ubiA9IEcuY29ubmVjdGVkRGF0YXNbdGd0UGVlcklEXTtcclxuXHJcbiAgICAgIC8v5YiH5patXHJcbiAgICAgIGlmKGNvbm4pIGNvbm4uY2xvc2UodHJ1ZSk7XHJcbiAgICAgIFxyXG4gICAgICAvL+aOpee2muWFiOODquOCueODiOOBi+OCieWJiumZpOOBmeOCi1xyXG4gICAgICBkZWxldGUgRy5jb25uZWN0ZWREYXRhc1t0Z3RQZWVySURdO1xyXG4gICAgICBcclxuICAgICAgYWRkTmV3RGF0YVRvQ2hhdE1lc3NhZ2VMb2codGd0UGVlcklELFwiKOmAgOWupClcIiwxKTsgLy8g6Ieq5YiG44GuTG9n55S76Z2i44Gr6KGo56S6XHJcbiAgIH1cclxuICAgLy9Eb23liYrpmaRcclxuICAgaWYgKCh0Z3RQZWVySUQgaW4gRy5jb25uZWN0ZWRDYWxscykgIT0gdHJ1ZSkge1xyXG4gICAgICBkb21BcHBlbmRPclJlbW92ZWZvclBlZXIoMCx0Z3RQZWVySUQpO1xyXG4gICB9XHJcbiAgIGNvbm5lY3RlZERhdGFzTW9kaWZ5RmxnPTA7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBxdWl0QWxsQ29ubmVjdGlvbigpe1xyXG4gICAgLy/lhajjgabjga7mjqXntprlhYjjgpLliIfmlq3jgZnjgotcclxuICAgXHJcbiAgIGZvciAobGV0IHRndFBlZXJJRCBpbiBHLmNvbm5lY3RlZENhbGxzKSB7XHJcbiAgICAgIGRlbGV0ZVBlZXJGcm9tQ2FsbExpc3QodGd0UGVlcklEKTtcclxuICAgfVxyXG4gICBmb3IgKGxldCB0Z3RQZWVySUQgaW4gRy5jb25uZWN0ZWREYXRhcykge1xyXG4gICAgICBkZWxldGVQZWVyRnJvbURhdGFMaXN0KHRndFBlZXJJRCk7XHJcbiAgIH1cclxuICAgXHJcbn1cclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIGdldFNreXdheVBlZXJJbnN0YW5jZSgpe1xyXG4gICAgbGV0IGFucztcclxuICAgIGxldCB2YXJyZXM7XHJcbiAgICBsZXQgc3RyS2V5O1xyXG4gICAgXHJcbiAgICBjb25zdCBjb29raWVOYW1lID0gXCJTa3lXYXlLZXlcIjtcclxuICAgIFxyXG4gICAgdmFycmVzID0gcHJvbXB0KCBcIlNreVdheSBrZXlcIiAsIGdldENvb2tpZShjb29raWVOYW1lKSApO1xyXG4gICAgaWYodmFycmVzKXtcclxuICAgICAgICBzdHJLZXk9dmFycmVzLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYW5zID0gbmV3IFBlZXIoeyBrZXk6c3RyS2V5LCBkZWJ1ZzogM30pOyAvKiBTa3lXYXkga2V544KS5oyH5a6aICovXHJcbiAgICAgICAgXHJcbiAgICAgICAgYW5zLm9uKFwib3BlblwiLChmdW5jdGlvbihzdHJLZXlJRCl7XHJcbiAgICAgICAgICAgIGlmKHN0cktleUlEKXtcclxuICAgICAgICAgICAgICAgc2V0Q29va2llKGNvb2tpZU5hbWUsdGhpcy5zb2NrZXQuX2tleSAsIDEwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGFucztcclxufVxyXG5cclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/udonWebRTC.js\n");

/***/ }),

/***/ "./node_modules/@msgpack/msgpack/dist.es5+esm/CachedKeyDecoder.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@msgpack/msgpack/dist.es5+esm/CachedKeyDecoder.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CachedKeyDecoder\": () => (/* binding */ CachedKeyDecoder)\n/* harmony export */ });\n/* harmony import */ var _utils_utf8_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/utf8.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/utils/utf8.mjs\");\n\nvar DEFAULT_MAX_KEY_LENGTH = 16;\nvar DEFAULT_MAX_LENGTH_PER_KEY = 16;\nvar CachedKeyDecoder = /** @class */ (function () {\n    function CachedKeyDecoder(maxKeyLength, maxLengthPerKey) {\n        if (maxKeyLength === void 0) { maxKeyLength = DEFAULT_MAX_KEY_LENGTH; }\n        if (maxLengthPerKey === void 0) { maxLengthPerKey = DEFAULT_MAX_LENGTH_PER_KEY; }\n        this.maxKeyLength = maxKeyLength;\n        this.maxLengthPerKey = maxLengthPerKey;\n        this.hit = 0;\n        this.miss = 0;\n        // avoid `new Array(N)`, which makes a sparse array,\n        // because a sparse array is typically slower than a non-sparse array.\n        this.caches = [];\n        for (var i = 0; i < this.maxKeyLength; i++) {\n            this.caches.push([]);\n        }\n    }\n    CachedKeyDecoder.prototype.canBeCached = function (byteLength) {\n        return byteLength > 0 && byteLength <= this.maxKeyLength;\n    };\n    CachedKeyDecoder.prototype.find = function (bytes, inputOffset, byteLength) {\n        var records = this.caches[byteLength - 1];\n        FIND_CHUNK: for (var _i = 0, records_1 = records; _i < records_1.length; _i++) {\n            var record = records_1[_i];\n            var recordBytes = record.bytes;\n            for (var j = 0; j < byteLength; j++) {\n                if (recordBytes[j] !== bytes[inputOffset + j]) {\n                    continue FIND_CHUNK;\n                }\n            }\n            return record.str;\n        }\n        return null;\n    };\n    CachedKeyDecoder.prototype.store = function (bytes, value) {\n        var records = this.caches[bytes.length - 1];\n        var record = { bytes: bytes, str: value };\n        if (records.length >= this.maxLengthPerKey) {\n            // `records` are full!\n            // Set `record` to an arbitrary position.\n            records[(Math.random() * records.length) | 0] = record;\n        }\n        else {\n            records.push(record);\n        }\n    };\n    CachedKeyDecoder.prototype.decode = function (bytes, inputOffset, byteLength) {\n        var cachedValue = this.find(bytes, inputOffset, byteLength);\n        if (cachedValue != null) {\n            this.hit++;\n            return cachedValue;\n        }\n        this.miss++;\n        var str = (0,_utils_utf8_mjs__WEBPACK_IMPORTED_MODULE_0__.utf8DecodeJs)(bytes, inputOffset, byteLength);\n        // Ensure to copy a slice of bytes because the byte may be NodeJS Buffer and Buffer#slice() returns a reference to its internal ArrayBuffer.\n        var slicedCopyOfBytes = Uint8Array.prototype.slice.call(bytes, inputOffset, inputOffset + byteLength);\n        this.store(slicedCopyOfBytes, str);\n        return str;\n    };\n    return CachedKeyDecoder;\n}());\n\n//# sourceMappingURL=CachedKeyDecoder.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vQ2FjaGVkS2V5RGVjb2Rlci5tanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkMsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELHVCQUF1QjtBQUNqRjtBQUNBO0FBQ0EsNEJBQTRCLGdCQUFnQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw2REFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQzJCO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vMjAyMTAxMTFfd2ViY2hhdC8uL25vZGVfbW9kdWxlcy9AbXNncGFjay9tc2dwYWNrL2Rpc3QuZXM1K2VzbS9DYWNoZWRLZXlEZWNvZGVyLm1qcz8wMmZjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHV0ZjhEZWNvZGVKcyB9IGZyb20gXCIuL3V0aWxzL3V0ZjgubWpzXCI7XG52YXIgREVGQVVMVF9NQVhfS0VZX0xFTkdUSCA9IDE2O1xudmFyIERFRkFVTFRfTUFYX0xFTkdUSF9QRVJfS0VZID0gMTY7XG52YXIgQ2FjaGVkS2V5RGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDYWNoZWRLZXlEZWNvZGVyKG1heEtleUxlbmd0aCwgbWF4TGVuZ3RoUGVyS2V5KSB7XG4gICAgICAgIGlmIChtYXhLZXlMZW5ndGggPT09IHZvaWQgMCkgeyBtYXhLZXlMZW5ndGggPSBERUZBVUxUX01BWF9LRVlfTEVOR1RIOyB9XG4gICAgICAgIGlmIChtYXhMZW5ndGhQZXJLZXkgPT09IHZvaWQgMCkgeyBtYXhMZW5ndGhQZXJLZXkgPSBERUZBVUxUX01BWF9MRU5HVEhfUEVSX0tFWTsgfVxuICAgICAgICB0aGlzLm1heEtleUxlbmd0aCA9IG1heEtleUxlbmd0aDtcbiAgICAgICAgdGhpcy5tYXhMZW5ndGhQZXJLZXkgPSBtYXhMZW5ndGhQZXJLZXk7XG4gICAgICAgIHRoaXMuaGl0ID0gMDtcbiAgICAgICAgdGhpcy5taXNzID0gMDtcbiAgICAgICAgLy8gYXZvaWQgYG5ldyBBcnJheShOKWAsIHdoaWNoIG1ha2VzIGEgc3BhcnNlIGFycmF5LFxuICAgICAgICAvLyBiZWNhdXNlIGEgc3BhcnNlIGFycmF5IGlzIHR5cGljYWxseSBzbG93ZXIgdGhhbiBhIG5vbi1zcGFyc2UgYXJyYXkuXG4gICAgICAgIHRoaXMuY2FjaGVzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tYXhLZXlMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5jYWNoZXMucHVzaChbXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgQ2FjaGVkS2V5RGVjb2Rlci5wcm90b3R5cGUuY2FuQmVDYWNoZWQgPSBmdW5jdGlvbiAoYnl0ZUxlbmd0aCkge1xuICAgICAgICByZXR1cm4gYnl0ZUxlbmd0aCA+IDAgJiYgYnl0ZUxlbmd0aCA8PSB0aGlzLm1heEtleUxlbmd0aDtcbiAgICB9O1xuICAgIENhY2hlZEtleURlY29kZXIucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbiAoYnl0ZXMsIGlucHV0T2Zmc2V0LCBieXRlTGVuZ3RoKSB7XG4gICAgICAgIHZhciByZWNvcmRzID0gdGhpcy5jYWNoZXNbYnl0ZUxlbmd0aCAtIDFdO1xuICAgICAgICBGSU5EX0NIVU5LOiBmb3IgKHZhciBfaSA9IDAsIHJlY29yZHNfMSA9IHJlY29yZHM7IF9pIDwgcmVjb3Jkc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIHJlY29yZCA9IHJlY29yZHNfMVtfaV07XG4gICAgICAgICAgICB2YXIgcmVjb3JkQnl0ZXMgPSByZWNvcmQuYnl0ZXM7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGJ5dGVMZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChyZWNvcmRCeXRlc1tqXSAhPT0gYnl0ZXNbaW5wdXRPZmZzZXQgKyBqXSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBGSU5EX0NIVU5LO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZWNvcmQuc3RyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgQ2FjaGVkS2V5RGVjb2Rlci5wcm90b3R5cGUuc3RvcmUgPSBmdW5jdGlvbiAoYnl0ZXMsIHZhbHVlKSB7XG4gICAgICAgIHZhciByZWNvcmRzID0gdGhpcy5jYWNoZXNbYnl0ZXMubGVuZ3RoIC0gMV07XG4gICAgICAgIHZhciByZWNvcmQgPSB7IGJ5dGVzOiBieXRlcywgc3RyOiB2YWx1ZSB9O1xuICAgICAgICBpZiAocmVjb3Jkcy5sZW5ndGggPj0gdGhpcy5tYXhMZW5ndGhQZXJLZXkpIHtcbiAgICAgICAgICAgIC8vIGByZWNvcmRzYCBhcmUgZnVsbCFcbiAgICAgICAgICAgIC8vIFNldCBgcmVjb3JkYCB0byBhbiBhcmJpdHJhcnkgcG9zaXRpb24uXG4gICAgICAgICAgICByZWNvcmRzWyhNYXRoLnJhbmRvbSgpICogcmVjb3Jkcy5sZW5ndGgpIHwgMF0gPSByZWNvcmQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZWNvcmRzLnB1c2gocmVjb3JkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ2FjaGVkS2V5RGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCBpbnB1dE9mZnNldCwgYnl0ZUxlbmd0aCkge1xuICAgICAgICB2YXIgY2FjaGVkVmFsdWUgPSB0aGlzLmZpbmQoYnl0ZXMsIGlucHV0T2Zmc2V0LCBieXRlTGVuZ3RoKTtcbiAgICAgICAgaWYgKGNhY2hlZFZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuaGl0Kys7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5taXNzKys7XG4gICAgICAgIHZhciBzdHIgPSB1dGY4RGVjb2RlSnMoYnl0ZXMsIGlucHV0T2Zmc2V0LCBieXRlTGVuZ3RoKTtcbiAgICAgICAgLy8gRW5zdXJlIHRvIGNvcHkgYSBzbGljZSBvZiBieXRlcyBiZWNhdXNlIHRoZSBieXRlIG1heSBiZSBOb2RlSlMgQnVmZmVyIGFuZCBCdWZmZXIjc2xpY2UoKSByZXR1cm5zIGEgcmVmZXJlbmNlIHRvIGl0cyBpbnRlcm5hbCBBcnJheUJ1ZmZlci5cbiAgICAgICAgdmFyIHNsaWNlZENvcHlPZkJ5dGVzID0gVWludDhBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChieXRlcywgaW5wdXRPZmZzZXQsIGlucHV0T2Zmc2V0ICsgYnl0ZUxlbmd0aCk7XG4gICAgICAgIHRoaXMuc3RvcmUoc2xpY2VkQ29weU9mQnl0ZXMsIHN0cik7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfTtcbiAgICByZXR1cm4gQ2FjaGVkS2V5RGVjb2Rlcjtcbn0oKSk7XG5leHBvcnQgeyBDYWNoZWRLZXlEZWNvZGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1DYWNoZWRLZXlEZWNvZGVyLm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@msgpack/msgpack/dist.es5+esm/CachedKeyDecoder.mjs\n");

/***/ }),

/***/ "./node_modules/@msgpack/msgpack/dist.es5+esm/DecodeError.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/@msgpack/msgpack/dist.es5+esm/DecodeError.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DecodeError\": () => (/* binding */ DecodeError)\n/* harmony export */ });\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar DecodeError = /** @class */ (function (_super) {\n    __extends(DecodeError, _super);\n    function DecodeError(message) {\n        var _this = _super.call(this, message) || this;\n        // fix the prototype chain in a cross-platform way\n        var proto = Object.create(DecodeError.prototype);\n        Object.setPrototypeOf(_this, proto);\n        Object.defineProperty(_this, \"name\", {\n            configurable: true,\n            enumerable: false,\n            value: DecodeError.name,\n        });\n        return _this;\n    }\n    return DecodeError;\n}(Error));\n\n//# sourceMappingURL=DecodeError.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vRGVjb2RlRXJyb3IubWpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpQkFBaUIsU0FBSSxJQUFJLFNBQUk7QUFDN0I7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCLHNDQUFzQyxrQkFBa0I7QUFDdkYsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNzQjtBQUN2QiIsInNvdXJjZXMiOlsid2VicGFjazovLzIwMjEwMTExX3dlYmNoYXQvLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vRGVjb2RlRXJyb3IubWpzPzVjZTgiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBEZWNvZGVFcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGVjb2RlRXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRGVjb2RlRXJyb3IobWVzc2FnZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgICAgICAvLyBmaXggdGhlIHByb3RvdHlwZSBjaGFpbiBpbiBhIGNyb3NzLXBsYXRmb3JtIHdheVxuICAgICAgICB2YXIgcHJvdG8gPSBPYmplY3QuY3JlYXRlKERlY29kZUVycm9yLnByb3RvdHlwZSk7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihfdGhpcywgcHJvdG8pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX3RoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlOiBEZWNvZGVFcnJvci5uYW1lLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gRGVjb2RlRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnQgeyBEZWNvZGVFcnJvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVjb2RlRXJyb3IubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@msgpack/msgpack/dist.es5+esm/DecodeError.mjs\n");

/***/ }),

/***/ "./node_modules/@msgpack/msgpack/dist.es5+esm/Decoder.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@msgpack/msgpack/dist.es5+esm/Decoder.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DataViewIndexOutOfBoundsError\": () => (/* binding */ DataViewIndexOutOfBoundsError),\n/* harmony export */   \"Decoder\": () => (/* binding */ Decoder)\n/* harmony export */ });\n/* harmony import */ var _utils_prettyByte_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/prettyByte.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/utils/prettyByte.mjs\");\n/* harmony import */ var _ExtensionCodec_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ExtensionCodec.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/ExtensionCodec.mjs\");\n/* harmony import */ var _utils_int_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/int.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/utils/int.mjs\");\n/* harmony import */ var _utils_utf8_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/utf8.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/utils/utf8.mjs\");\n/* harmony import */ var _utils_typedArrays_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/typedArrays.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/utils/typedArrays.mjs\");\n/* harmony import */ var _CachedKeyDecoder_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CachedKeyDecoder.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/CachedKeyDecoder.mjs\");\n/* harmony import */ var _DecodeError_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./DecodeError.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/DecodeError.mjs\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __asyncValues = (undefined && undefined.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nvar __await = (undefined && undefined.__await) || function (v) { return this instanceof __await ? (this.v = v, this) : new __await(v); }\nvar __asyncGenerator = (undefined && undefined.__asyncGenerator) || function (thisArg, _arguments, generator) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n    function fulfill(value) { resume(\"next\", value); }\n    function reject(value) { resume(\"throw\", value); }\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n};\n\n\n\n\n\n\n\nvar isValidMapKeyType = function (key) {\n    var keyType = typeof key;\n    return keyType === \"string\" || keyType === \"number\";\n};\nvar HEAD_BYTE_REQUIRED = -1;\nvar EMPTY_VIEW = new DataView(new ArrayBuffer(0));\nvar EMPTY_BYTES = new Uint8Array(EMPTY_VIEW.buffer);\n// IE11: Hack to support IE11.\n// IE11: Drop this hack and just use RangeError when IE11 is obsolete.\nvar DataViewIndexOutOfBoundsError = (function () {\n    try {\n        // IE11: The spec says it should throw RangeError,\n        // IE11: but in IE11 it throws TypeError.\n        EMPTY_VIEW.getInt8(0);\n    }\n    catch (e) {\n        return e.constructor;\n    }\n    throw new Error(\"never reached\");\n})();\nvar MORE_DATA = new DataViewIndexOutOfBoundsError(\"Insufficient data\");\nvar sharedCachedKeyDecoder = new _CachedKeyDecoder_mjs__WEBPACK_IMPORTED_MODULE_0__.CachedKeyDecoder();\nvar Decoder = /** @class */ (function () {\n    function Decoder(extensionCodec, context, maxStrLength, maxBinLength, maxArrayLength, maxMapLength, maxExtLength, keyDecoder) {\n        if (extensionCodec === void 0) { extensionCodec = _ExtensionCodec_mjs__WEBPACK_IMPORTED_MODULE_1__.ExtensionCodec.defaultCodec; }\n        if (context === void 0) { context = undefined; }\n        if (maxStrLength === void 0) { maxStrLength = _utils_int_mjs__WEBPACK_IMPORTED_MODULE_2__.UINT32_MAX; }\n        if (maxBinLength === void 0) { maxBinLength = _utils_int_mjs__WEBPACK_IMPORTED_MODULE_2__.UINT32_MAX; }\n        if (maxArrayLength === void 0) { maxArrayLength = _utils_int_mjs__WEBPACK_IMPORTED_MODULE_2__.UINT32_MAX; }\n        if (maxMapLength === void 0) { maxMapLength = _utils_int_mjs__WEBPACK_IMPORTED_MODULE_2__.UINT32_MAX; }\n        if (maxExtLength === void 0) { maxExtLength = _utils_int_mjs__WEBPACK_IMPORTED_MODULE_2__.UINT32_MAX; }\n        if (keyDecoder === void 0) { keyDecoder = sharedCachedKeyDecoder; }\n        this.extensionCodec = extensionCodec;\n        this.context = context;\n        this.maxStrLength = maxStrLength;\n        this.maxBinLength = maxBinLength;\n        this.maxArrayLength = maxArrayLength;\n        this.maxMapLength = maxMapLength;\n        this.maxExtLength = maxExtLength;\n        this.keyDecoder = keyDecoder;\n        this.totalPos = 0;\n        this.pos = 0;\n        this.view = EMPTY_VIEW;\n        this.bytes = EMPTY_BYTES;\n        this.headByte = HEAD_BYTE_REQUIRED;\n        this.stack = [];\n    }\n    Decoder.prototype.reinitializeState = function () {\n        this.totalPos = 0;\n        this.headByte = HEAD_BYTE_REQUIRED;\n        this.stack.length = 0;\n        // view, bytes, and pos will be re-initialized in setBuffer()\n    };\n    Decoder.prototype.setBuffer = function (buffer) {\n        this.bytes = (0,_utils_typedArrays_mjs__WEBPACK_IMPORTED_MODULE_3__.ensureUint8Array)(buffer);\n        this.view = (0,_utils_typedArrays_mjs__WEBPACK_IMPORTED_MODULE_3__.createDataView)(this.bytes);\n        this.pos = 0;\n    };\n    Decoder.prototype.appendBuffer = function (buffer) {\n        if (this.headByte === HEAD_BYTE_REQUIRED && !this.hasRemaining(1)) {\n            this.setBuffer(buffer);\n        }\n        else {\n            var remainingData = this.bytes.subarray(this.pos);\n            var newData = (0,_utils_typedArrays_mjs__WEBPACK_IMPORTED_MODULE_3__.ensureUint8Array)(buffer);\n            // concat remainingData + newData\n            var newBuffer = new Uint8Array(remainingData.length + newData.length);\n            newBuffer.set(remainingData);\n            newBuffer.set(newData, remainingData.length);\n            this.setBuffer(newBuffer);\n        }\n    };\n    Decoder.prototype.hasRemaining = function (size) {\n        return this.view.byteLength - this.pos >= size;\n    };\n    Decoder.prototype.createExtraByteError = function (posToShow) {\n        var _a = this, view = _a.view, pos = _a.pos;\n        return new RangeError(\"Extra \".concat(view.byteLength - pos, \" of \").concat(view.byteLength, \" byte(s) found at buffer[\").concat(posToShow, \"]\"));\n    };\n    /**\n     * @throws {DecodeError}\n     * @throws {RangeError}\n     */\n    Decoder.prototype.decode = function (buffer) {\n        this.reinitializeState();\n        this.setBuffer(buffer);\n        var object = this.doDecodeSync();\n        if (this.hasRemaining(1)) {\n            throw this.createExtraByteError(this.pos);\n        }\n        return object;\n    };\n    Decoder.prototype.decodeMulti = function (buffer) {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    this.reinitializeState();\n                    this.setBuffer(buffer);\n                    _a.label = 1;\n                case 1:\n                    if (!this.hasRemaining(1)) return [3 /*break*/, 3];\n                    return [4 /*yield*/, this.doDecodeSync()];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 1];\n                case 3: return [2 /*return*/];\n            }\n        });\n    };\n    Decoder.prototype.decodeAsync = function (stream) {\n        var stream_1, stream_1_1;\n        var e_1, _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var decoded, object, buffer, e_1_1, _b, headByte, pos, totalPos;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        decoded = false;\n                        _c.label = 1;\n                    case 1:\n                        _c.trys.push([1, 6, 7, 12]);\n                        stream_1 = __asyncValues(stream);\n                        _c.label = 2;\n                    case 2: return [4 /*yield*/, stream_1.next()];\n                    case 3:\n                        if (!(stream_1_1 = _c.sent(), !stream_1_1.done)) return [3 /*break*/, 5];\n                        buffer = stream_1_1.value;\n                        if (decoded) {\n                            throw this.createExtraByteError(this.totalPos);\n                        }\n                        this.appendBuffer(buffer);\n                        try {\n                            object = this.doDecodeSync();\n                            decoded = true;\n                        }\n                        catch (e) {\n                            if (!(e instanceof DataViewIndexOutOfBoundsError)) {\n                                throw e; // rethrow\n                            }\n                            // fallthrough\n                        }\n                        this.totalPos += this.pos;\n                        _c.label = 4;\n                    case 4: return [3 /*break*/, 2];\n                    case 5: return [3 /*break*/, 12];\n                    case 6:\n                        e_1_1 = _c.sent();\n                        e_1 = { error: e_1_1 };\n                        return [3 /*break*/, 12];\n                    case 7:\n                        _c.trys.push([7, , 10, 11]);\n                        if (!(stream_1_1 && !stream_1_1.done && (_a = stream_1.return))) return [3 /*break*/, 9];\n                        return [4 /*yield*/, _a.call(stream_1)];\n                    case 8:\n                        _c.sent();\n                        _c.label = 9;\n                    case 9: return [3 /*break*/, 11];\n                    case 10:\n                        if (e_1) throw e_1.error;\n                        return [7 /*endfinally*/];\n                    case 11: return [7 /*endfinally*/];\n                    case 12:\n                        if (decoded) {\n                            if (this.hasRemaining(1)) {\n                                throw this.createExtraByteError(this.totalPos);\n                            }\n                            return [2 /*return*/, object];\n                        }\n                        _b = this, headByte = _b.headByte, pos = _b.pos, totalPos = _b.totalPos;\n                        throw new RangeError(\"Insufficient data in parsing \".concat((0,_utils_prettyByte_mjs__WEBPACK_IMPORTED_MODULE_4__.prettyByte)(headByte), \" at \").concat(totalPos, \" (\").concat(pos, \" in the current buffer)\"));\n                }\n            });\n        });\n    };\n    Decoder.prototype.decodeArrayStream = function (stream) {\n        return this.decodeMultiAsync(stream, true);\n    };\n    Decoder.prototype.decodeStream = function (stream) {\n        return this.decodeMultiAsync(stream, false);\n    };\n    Decoder.prototype.decodeMultiAsync = function (stream, isArray) {\n        return __asyncGenerator(this, arguments, function decodeMultiAsync_1() {\n            var isArrayHeaderRequired, arrayItemsLeft, stream_2, stream_2_1, buffer, e_2, e_3_1;\n            var e_3, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        isArrayHeaderRequired = isArray;\n                        arrayItemsLeft = -1;\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 13, 14, 19]);\n                        stream_2 = __asyncValues(stream);\n                        _b.label = 2;\n                    case 2: return [4 /*yield*/, __await(stream_2.next())];\n                    case 3:\n                        if (!(stream_2_1 = _b.sent(), !stream_2_1.done)) return [3 /*break*/, 12];\n                        buffer = stream_2_1.value;\n                        if (isArray && arrayItemsLeft === 0) {\n                            throw this.createExtraByteError(this.totalPos);\n                        }\n                        this.appendBuffer(buffer);\n                        if (isArrayHeaderRequired) {\n                            arrayItemsLeft = this.readArraySize();\n                            isArrayHeaderRequired = false;\n                            this.complete();\n                        }\n                        _b.label = 4;\n                    case 4:\n                        _b.trys.push([4, 9, , 10]);\n                        _b.label = 5;\n                    case 5:\n                        if (false) {}\n                        return [4 /*yield*/, __await(this.doDecodeSync())];\n                    case 6: return [4 /*yield*/, _b.sent()];\n                    case 7:\n                        _b.sent();\n                        if (--arrayItemsLeft === 0) {\n                            return [3 /*break*/, 8];\n                        }\n                        return [3 /*break*/, 5];\n                    case 8: return [3 /*break*/, 10];\n                    case 9:\n                        e_2 = _b.sent();\n                        if (!(e_2 instanceof DataViewIndexOutOfBoundsError)) {\n                            throw e_2; // rethrow\n                        }\n                        return [3 /*break*/, 10];\n                    case 10:\n                        this.totalPos += this.pos;\n                        _b.label = 11;\n                    case 11: return [3 /*break*/, 2];\n                    case 12: return [3 /*break*/, 19];\n                    case 13:\n                        e_3_1 = _b.sent();\n                        e_3 = { error: e_3_1 };\n                        return [3 /*break*/, 19];\n                    case 14:\n                        _b.trys.push([14, , 17, 18]);\n                        if (!(stream_2_1 && !stream_2_1.done && (_a = stream_2.return))) return [3 /*break*/, 16];\n                        return [4 /*yield*/, __await(_a.call(stream_2))];\n                    case 15:\n                        _b.sent();\n                        _b.label = 16;\n                    case 16: return [3 /*break*/, 18];\n                    case 17:\n                        if (e_3) throw e_3.error;\n                        return [7 /*endfinally*/];\n                    case 18: return [7 /*endfinally*/];\n                    case 19: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Decoder.prototype.doDecodeSync = function () {\n        DECODE: while (true) {\n            var headByte = this.readHeadByte();\n            var object = void 0;\n            if (headByte >= 0xe0) {\n                // negative fixint (111x xxxx) 0xe0 - 0xff\n                object = headByte - 0x100;\n            }\n            else if (headByte < 0xc0) {\n                if (headByte < 0x80) {\n                    // positive fixint (0xxx xxxx) 0x00 - 0x7f\n                    object = headByte;\n                }\n                else if (headByte < 0x90) {\n                    // fixmap (1000 xxxx) 0x80 - 0x8f\n                    var size = headByte - 0x80;\n                    if (size !== 0) {\n                        this.pushMapState(size);\n                        this.complete();\n                        continue DECODE;\n                    }\n                    else {\n                        object = {};\n                    }\n                }\n                else if (headByte < 0xa0) {\n                    // fixarray (1001 xxxx) 0x90 - 0x9f\n                    var size = headByte - 0x90;\n                    if (size !== 0) {\n                        this.pushArrayState(size);\n                        this.complete();\n                        continue DECODE;\n                    }\n                    else {\n                        object = [];\n                    }\n                }\n                else {\n                    // fixstr (101x xxxx) 0xa0 - 0xbf\n                    var byteLength = headByte - 0xa0;\n                    object = this.decodeUtf8String(byteLength, 0);\n                }\n            }\n            else if (headByte === 0xc0) {\n                // nil\n                object = null;\n            }\n            else if (headByte === 0xc2) {\n                // false\n                object = false;\n            }\n            else if (headByte === 0xc3) {\n                // true\n                object = true;\n            }\n            else if (headByte === 0xca) {\n                // float 32\n                object = this.readF32();\n            }\n            else if (headByte === 0xcb) {\n                // float 64\n                object = this.readF64();\n            }\n            else if (headByte === 0xcc) {\n                // uint 8\n                object = this.readU8();\n            }\n            else if (headByte === 0xcd) {\n                // uint 16\n                object = this.readU16();\n            }\n            else if (headByte === 0xce) {\n                // uint 32\n                object = this.readU32();\n            }\n            else if (headByte === 0xcf) {\n                // uint 64\n                object = this.readU64();\n            }\n            else if (headByte === 0xd0) {\n                // int 8\n                object = this.readI8();\n            }\n            else if (headByte === 0xd1) {\n                // int 16\n                object = this.readI16();\n            }\n            else if (headByte === 0xd2) {\n                // int 32\n                object = this.readI32();\n            }\n            else if (headByte === 0xd3) {\n                // int 64\n                object = this.readI64();\n            }\n            else if (headByte === 0xd9) {\n                // str 8\n                var byteLength = this.lookU8();\n                object = this.decodeUtf8String(byteLength, 1);\n            }\n            else if (headByte === 0xda) {\n                // str 16\n                var byteLength = this.lookU16();\n                object = this.decodeUtf8String(byteLength, 2);\n            }\n            else if (headByte === 0xdb) {\n                // str 32\n                var byteLength = this.lookU32();\n                object = this.decodeUtf8String(byteLength, 4);\n            }\n            else if (headByte === 0xdc) {\n                // array 16\n                var size = this.readU16();\n                if (size !== 0) {\n                    this.pushArrayState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = [];\n                }\n            }\n            else if (headByte === 0xdd) {\n                // array 32\n                var size = this.readU32();\n                if (size !== 0) {\n                    this.pushArrayState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = [];\n                }\n            }\n            else if (headByte === 0xde) {\n                // map 16\n                var size = this.readU16();\n                if (size !== 0) {\n                    this.pushMapState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = {};\n                }\n            }\n            else if (headByte === 0xdf) {\n                // map 32\n                var size = this.readU32();\n                if (size !== 0) {\n                    this.pushMapState(size);\n                    this.complete();\n                    continue DECODE;\n                }\n                else {\n                    object = {};\n                }\n            }\n            else if (headByte === 0xc4) {\n                // bin 8\n                var size = this.lookU8();\n                object = this.decodeBinary(size, 1);\n            }\n            else if (headByte === 0xc5) {\n                // bin 16\n                var size = this.lookU16();\n                object = this.decodeBinary(size, 2);\n            }\n            else if (headByte === 0xc6) {\n                // bin 32\n                var size = this.lookU32();\n                object = this.decodeBinary(size, 4);\n            }\n            else if (headByte === 0xd4) {\n                // fixext 1\n                object = this.decodeExtension(1, 0);\n            }\n            else if (headByte === 0xd5) {\n                // fixext 2\n                object = this.decodeExtension(2, 0);\n            }\n            else if (headByte === 0xd6) {\n                // fixext 4\n                object = this.decodeExtension(4, 0);\n            }\n            else if (headByte === 0xd7) {\n                // fixext 8\n                object = this.decodeExtension(8, 0);\n            }\n            else if (headByte === 0xd8) {\n                // fixext 16\n                object = this.decodeExtension(16, 0);\n            }\n            else if (headByte === 0xc7) {\n                // ext 8\n                var size = this.lookU8();\n                object = this.decodeExtension(size, 1);\n            }\n            else if (headByte === 0xc8) {\n                // ext 16\n                var size = this.lookU16();\n                object = this.decodeExtension(size, 2);\n            }\n            else if (headByte === 0xc9) {\n                // ext 32\n                var size = this.lookU32();\n                object = this.decodeExtension(size, 4);\n            }\n            else {\n                throw new _DecodeError_mjs__WEBPACK_IMPORTED_MODULE_5__.DecodeError(\"Unrecognized type byte: \".concat((0,_utils_prettyByte_mjs__WEBPACK_IMPORTED_MODULE_4__.prettyByte)(headByte)));\n            }\n            this.complete();\n            var stack = this.stack;\n            while (stack.length > 0) {\n                // arrays and maps\n                var state = stack[stack.length - 1];\n                if (state.type === 0 /* ARRAY */) {\n                    state.array[state.position] = object;\n                    state.position++;\n                    if (state.position === state.size) {\n                        stack.pop();\n                        object = state.array;\n                    }\n                    else {\n                        continue DECODE;\n                    }\n                }\n                else if (state.type === 1 /* MAP_KEY */) {\n                    if (!isValidMapKeyType(object)) {\n                        throw new _DecodeError_mjs__WEBPACK_IMPORTED_MODULE_5__.DecodeError(\"The type of key must be string or number but \" + typeof object);\n                    }\n                    if (object === \"__proto__\") {\n                        throw new _DecodeError_mjs__WEBPACK_IMPORTED_MODULE_5__.DecodeError(\"The key __proto__ is not allowed\");\n                    }\n                    state.key = object;\n                    state.type = 2 /* MAP_VALUE */;\n                    continue DECODE;\n                }\n                else {\n                    // it must be `state.type === State.MAP_VALUE` here\n                    state.map[state.key] = object;\n                    state.readCount++;\n                    if (state.readCount === state.size) {\n                        stack.pop();\n                        object = state.map;\n                    }\n                    else {\n                        state.key = null;\n                        state.type = 1 /* MAP_KEY */;\n                        continue DECODE;\n                    }\n                }\n            }\n            return object;\n        }\n    };\n    Decoder.prototype.readHeadByte = function () {\n        if (this.headByte === HEAD_BYTE_REQUIRED) {\n            this.headByte = this.readU8();\n            // console.log(\"headByte\", prettyByte(this.headByte));\n        }\n        return this.headByte;\n    };\n    Decoder.prototype.complete = function () {\n        this.headByte = HEAD_BYTE_REQUIRED;\n    };\n    Decoder.prototype.readArraySize = function () {\n        var headByte = this.readHeadByte();\n        switch (headByte) {\n            case 0xdc:\n                return this.readU16();\n            case 0xdd:\n                return this.readU32();\n            default: {\n                if (headByte < 0xa0) {\n                    return headByte - 0x90;\n                }\n                else {\n                    throw new _DecodeError_mjs__WEBPACK_IMPORTED_MODULE_5__.DecodeError(\"Unrecognized array type byte: \".concat((0,_utils_prettyByte_mjs__WEBPACK_IMPORTED_MODULE_4__.prettyByte)(headByte)));\n                }\n            }\n        }\n    };\n    Decoder.prototype.pushMapState = function (size) {\n        if (size > this.maxMapLength) {\n            throw new _DecodeError_mjs__WEBPACK_IMPORTED_MODULE_5__.DecodeError(\"Max length exceeded: map length (\".concat(size, \") > maxMapLengthLength (\").concat(this.maxMapLength, \")\"));\n        }\n        this.stack.push({\n            type: 1 /* MAP_KEY */,\n            size: size,\n            key: null,\n            readCount: 0,\n            map: {},\n        });\n    };\n    Decoder.prototype.pushArrayState = function (size) {\n        if (size > this.maxArrayLength) {\n            throw new _DecodeError_mjs__WEBPACK_IMPORTED_MODULE_5__.DecodeError(\"Max length exceeded: array length (\".concat(size, \") > maxArrayLength (\").concat(this.maxArrayLength, \")\"));\n        }\n        this.stack.push({\n            type: 0 /* ARRAY */,\n            size: size,\n            array: new Array(size),\n            position: 0,\n        });\n    };\n    Decoder.prototype.decodeUtf8String = function (byteLength, headerOffset) {\n        var _a;\n        if (byteLength > this.maxStrLength) {\n            throw new _DecodeError_mjs__WEBPACK_IMPORTED_MODULE_5__.DecodeError(\"Max length exceeded: UTF-8 byte length (\".concat(byteLength, \") > maxStrLength (\").concat(this.maxStrLength, \")\"));\n        }\n        if (this.bytes.byteLength < this.pos + headerOffset + byteLength) {\n            throw MORE_DATA;\n        }\n        var offset = this.pos + headerOffset;\n        var object;\n        if (this.stateIsMapKey() && ((_a = this.keyDecoder) === null || _a === void 0 ? void 0 : _a.canBeCached(byteLength))) {\n            object = this.keyDecoder.decode(this.bytes, offset, byteLength);\n        }\n        else if (byteLength > _utils_utf8_mjs__WEBPACK_IMPORTED_MODULE_6__.TEXT_DECODER_THRESHOLD) {\n            object = (0,_utils_utf8_mjs__WEBPACK_IMPORTED_MODULE_6__.utf8DecodeTD)(this.bytes, offset, byteLength);\n        }\n        else {\n            object = (0,_utils_utf8_mjs__WEBPACK_IMPORTED_MODULE_6__.utf8DecodeJs)(this.bytes, offset, byteLength);\n        }\n        this.pos += headerOffset + byteLength;\n        return object;\n    };\n    Decoder.prototype.stateIsMapKey = function () {\n        if (this.stack.length > 0) {\n            var state = this.stack[this.stack.length - 1];\n            return state.type === 1 /* MAP_KEY */;\n        }\n        return false;\n    };\n    Decoder.prototype.decodeBinary = function (byteLength, headOffset) {\n        if (byteLength > this.maxBinLength) {\n            throw new _DecodeError_mjs__WEBPACK_IMPORTED_MODULE_5__.DecodeError(\"Max length exceeded: bin length (\".concat(byteLength, \") > maxBinLength (\").concat(this.maxBinLength, \")\"));\n        }\n        if (!this.hasRemaining(byteLength + headOffset)) {\n            throw MORE_DATA;\n        }\n        var offset = this.pos + headOffset;\n        var object = this.bytes.subarray(offset, offset + byteLength);\n        this.pos += headOffset + byteLength;\n        return object;\n    };\n    Decoder.prototype.decodeExtension = function (size, headOffset) {\n        if (size > this.maxExtLength) {\n            throw new _DecodeError_mjs__WEBPACK_IMPORTED_MODULE_5__.DecodeError(\"Max length exceeded: ext length (\".concat(size, \") > maxExtLength (\").concat(this.maxExtLength, \")\"));\n        }\n        var extType = this.view.getInt8(this.pos + headOffset);\n        var data = this.decodeBinary(size, headOffset + 1 /* extType */);\n        return this.extensionCodec.decode(data, extType, this.context);\n    };\n    Decoder.prototype.lookU8 = function () {\n        return this.view.getUint8(this.pos);\n    };\n    Decoder.prototype.lookU16 = function () {\n        return this.view.getUint16(this.pos);\n    };\n    Decoder.prototype.lookU32 = function () {\n        return this.view.getUint32(this.pos);\n    };\n    Decoder.prototype.readU8 = function () {\n        var value = this.view.getUint8(this.pos);\n        this.pos++;\n        return value;\n    };\n    Decoder.prototype.readI8 = function () {\n        var value = this.view.getInt8(this.pos);\n        this.pos++;\n        return value;\n    };\n    Decoder.prototype.readU16 = function () {\n        var value = this.view.getUint16(this.pos);\n        this.pos += 2;\n        return value;\n    };\n    Decoder.prototype.readI16 = function () {\n        var value = this.view.getInt16(this.pos);\n        this.pos += 2;\n        return value;\n    };\n    Decoder.prototype.readU32 = function () {\n        var value = this.view.getUint32(this.pos);\n        this.pos += 4;\n        return value;\n    };\n    Decoder.prototype.readI32 = function () {\n        var value = this.view.getInt32(this.pos);\n        this.pos += 4;\n        return value;\n    };\n    Decoder.prototype.readU64 = function () {\n        var value = (0,_utils_int_mjs__WEBPACK_IMPORTED_MODULE_2__.getUint64)(this.view, this.pos);\n        this.pos += 8;\n        return value;\n    };\n    Decoder.prototype.readI64 = function () {\n        var value = (0,_utils_int_mjs__WEBPACK_IMPORTED_MODULE_2__.getInt64)(this.view, this.pos);\n        this.pos += 8;\n        return value;\n    };\n    Decoder.prototype.readF32 = function () {\n        var value = this.view.getFloat32(this.pos);\n        this.pos += 4;\n        return value;\n    };\n    Decoder.prototype.readF64 = function () {\n        var value = this.view.getFloat64(this.pos);\n        this.pos += 8;\n        return value;\n    };\n    return Decoder;\n}());\n\n//# sourceMappingURL=Decoder.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vRGVjb2Rlci5tanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsaUJBQWlCLFNBQUksSUFBSSxTQUFJO0FBQzdCLDRCQUE0QiwrREFBK0QsaUJBQWlCO0FBQzVHO0FBQ0Esb0NBQW9DLE1BQU0sK0JBQStCLFlBQVk7QUFDckYsbUNBQW1DLE1BQU0sbUNBQW1DLFlBQVk7QUFDeEYsZ0NBQWdDO0FBQ2hDO0FBQ0EsS0FBSztBQUNMO0FBQ0EsbUJBQW1CLFNBQUksSUFBSSxTQUFJO0FBQy9CLGNBQWMsNkJBQTZCLDBCQUEwQixjQUFjLHFCQUFxQjtBQUN4RyxpQkFBaUIsb0RBQW9ELHFFQUFxRSxjQUFjO0FBQ3hKLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLG1DQUFtQyxTQUFTO0FBQzVDLG1DQUFtQyxXQUFXLFVBQVU7QUFDeEQsMENBQTBDLGNBQWM7QUFDeEQ7QUFDQSw4R0FBOEcsT0FBTztBQUNySCxpRkFBaUYsaUJBQWlCO0FBQ2xHLHlEQUF5RCxnQkFBZ0IsUUFBUTtBQUNqRiwrQ0FBK0MsZ0JBQWdCLGdCQUFnQjtBQUMvRTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsVUFBVSxZQUFZLGFBQWEsU0FBUyxVQUFVO0FBQ3RELG9DQUFvQyxTQUFTO0FBQzdDO0FBQ0E7QUFDQSxxQkFBcUIsU0FBSSxJQUFJLFNBQUk7QUFDakM7QUFDQTtBQUNBLDJHQUEyRyx1RkFBdUYsY0FBYztBQUNoTix1QkFBdUIsOEJBQThCLGdEQUFnRCx3REFBd0Q7QUFDN0osNkNBQTZDLHNDQUFzQyxVQUFVLG1CQUFtQixJQUFJO0FBQ3BIO0FBQ0EsZUFBZSxTQUFJLElBQUksU0FBSSw0QkFBNEI7QUFDdkQsd0JBQXdCLFNBQUksSUFBSSxTQUFJO0FBQ3BDO0FBQ0E7QUFDQSxpQkFBaUIsdUZBQXVGLGNBQWM7QUFDdEgs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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix5REFBVyxtQ0FBbUMsaUVBQVU7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MseURBQVc7QUFDN0M7QUFDQTtBQUNBLGtDQUFrQyx5REFBVztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIseURBQVcseUNBQXlDLGlFQUFVO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5REFBVztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5REFBVztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IseURBQVc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLG1FQUFzQjtBQUNwRCxxQkFBcUIsNkRBQVk7QUFDakM7QUFDQTtBQUNBLHFCQUFxQiw2REFBWTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5REFBVztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHlEQUFXO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix5REFBUztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix3REFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNrQjtBQUNuQiIsInNvdXJjZXMiOlsid2VicGFjazovLzIwMjEwMTExX3dlYmNoYXQvLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vRGVjb2Rlci5tanM/ZDU0YSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xudmFyIF9fYXN5bmNWYWx1ZXMgPSAodGhpcyAmJiB0aGlzLl9fYXN5bmNWYWx1ZXMpIHx8IGZ1bmN0aW9uIChvKSB7XG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxufTtcbnZhciBfX2F3YWl0ID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0KSB8fCBmdW5jdGlvbiAodikgeyByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTsgfVxudmFyIF9fYXN5bmNHZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fYXN5bmNHZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cbn07XG5pbXBvcnQgeyBwcmV0dHlCeXRlIH0gZnJvbSBcIi4vdXRpbHMvcHJldHR5Qnl0ZS5tanNcIjtcbmltcG9ydCB7IEV4dGVuc2lvbkNvZGVjIH0gZnJvbSBcIi4vRXh0ZW5zaW9uQ29kZWMubWpzXCI7XG5pbXBvcnQgeyBnZXRJbnQ2NCwgZ2V0VWludDY0LCBVSU5UMzJfTUFYIH0gZnJvbSBcIi4vdXRpbHMvaW50Lm1qc1wiO1xuaW1wb3J0IHsgdXRmOERlY29kZUpzLCBURVhUX0RFQ09ERVJfVEhSRVNIT0xELCB1dGY4RGVjb2RlVEQgfSBmcm9tIFwiLi91dGlscy91dGY4Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlRGF0YVZpZXcsIGVuc3VyZVVpbnQ4QXJyYXkgfSBmcm9tIFwiLi91dGlscy90eXBlZEFycmF5cy5tanNcIjtcbmltcG9ydCB7IENhY2hlZEtleURlY29kZXIgfSBmcm9tIFwiLi9DYWNoZWRLZXlEZWNvZGVyLm1qc1wiO1xuaW1wb3J0IHsgRGVjb2RlRXJyb3IgfSBmcm9tIFwiLi9EZWNvZGVFcnJvci5tanNcIjtcbnZhciBpc1ZhbGlkTWFwS2V5VHlwZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIga2V5VHlwZSA9IHR5cGVvZiBrZXk7XG4gICAgcmV0dXJuIGtleVR5cGUgPT09IFwic3RyaW5nXCIgfHwga2V5VHlwZSA9PT0gXCJudW1iZXJcIjtcbn07XG52YXIgSEVBRF9CWVRFX1JFUVVJUkVEID0gLTE7XG52YXIgRU1QVFlfVklFVyA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMCkpO1xudmFyIEVNUFRZX0JZVEVTID0gbmV3IFVpbnQ4QXJyYXkoRU1QVFlfVklFVy5idWZmZXIpO1xuLy8gSUUxMTogSGFjayB0byBzdXBwb3J0IElFMTEuXG4vLyBJRTExOiBEcm9wIHRoaXMgaGFjayBhbmQganVzdCB1c2UgUmFuZ2VFcnJvciB3aGVuIElFMTEgaXMgb2Jzb2xldGUuXG5leHBvcnQgdmFyIERhdGFWaWV3SW5kZXhPdXRPZkJvdW5kc0Vycm9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBJRTExOiBUaGUgc3BlYyBzYXlzIGl0IHNob3VsZCB0aHJvdyBSYW5nZUVycm9yLFxuICAgICAgICAvLyBJRTExOiBidXQgaW4gSUUxMSBpdCB0aHJvd3MgVHlwZUVycm9yLlxuICAgICAgICBFTVBUWV9WSUVXLmdldEludDgoMCk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBlLmNvbnN0cnVjdG9yO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJuZXZlciByZWFjaGVkXCIpO1xufSkoKTtcbnZhciBNT1JFX0RBVEEgPSBuZXcgRGF0YVZpZXdJbmRleE91dE9mQm91bmRzRXJyb3IoXCJJbnN1ZmZpY2llbnQgZGF0YVwiKTtcbnZhciBzaGFyZWRDYWNoZWRLZXlEZWNvZGVyID0gbmV3IENhY2hlZEtleURlY29kZXIoKTtcbnZhciBEZWNvZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERlY29kZXIoZXh0ZW5zaW9uQ29kZWMsIGNvbnRleHQsIG1heFN0ckxlbmd0aCwgbWF4QmluTGVuZ3RoLCBtYXhBcnJheUxlbmd0aCwgbWF4TWFwTGVuZ3RoLCBtYXhFeHRMZW5ndGgsIGtleURlY29kZXIpIHtcbiAgICAgICAgaWYgKGV4dGVuc2lvbkNvZGVjID09PSB2b2lkIDApIHsgZXh0ZW5zaW9uQ29kZWMgPSBFeHRlbnNpb25Db2RlYy5kZWZhdWx0Q29kZWM7IH1cbiAgICAgICAgaWYgKGNvbnRleHQgPT09IHZvaWQgMCkgeyBjb250ZXh0ID0gdW5kZWZpbmVkOyB9XG4gICAgICAgIGlmIChtYXhTdHJMZW5ndGggPT09IHZvaWQgMCkgeyBtYXhTdHJMZW5ndGggPSBVSU5UMzJfTUFYOyB9XG4gICAgICAgIGlmIChtYXhCaW5MZW5ndGggPT09IHZvaWQgMCkgeyBtYXhCaW5MZW5ndGggPSBVSU5UMzJfTUFYOyB9XG4gICAgICAgIGlmIChtYXhBcnJheUxlbmd0aCA9PT0gdm9pZCAwKSB7IG1heEFycmF5TGVuZ3RoID0gVUlOVDMyX01BWDsgfVxuICAgICAgICBpZiAobWF4TWFwTGVuZ3RoID09PSB2b2lkIDApIHsgbWF4TWFwTGVuZ3RoID0gVUlOVDMyX01BWDsgfVxuICAgICAgICBpZiAobWF4RXh0TGVuZ3RoID09PSB2b2lkIDApIHsgbWF4RXh0TGVuZ3RoID0gVUlOVDMyX01BWDsgfVxuICAgICAgICBpZiAoa2V5RGVjb2RlciA9PT0gdm9pZCAwKSB7IGtleURlY29kZXIgPSBzaGFyZWRDYWNoZWRLZXlEZWNvZGVyOyB9XG4gICAgICAgIHRoaXMuZXh0ZW5zaW9uQ29kZWMgPSBleHRlbnNpb25Db2RlYztcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5tYXhTdHJMZW5ndGggPSBtYXhTdHJMZW5ndGg7XG4gICAgICAgIHRoaXMubWF4QmluTGVuZ3RoID0gbWF4QmluTGVuZ3RoO1xuICAgICAgICB0aGlzLm1heEFycmF5TGVuZ3RoID0gbWF4QXJyYXlMZW5ndGg7XG4gICAgICAgIHRoaXMubWF4TWFwTGVuZ3RoID0gbWF4TWFwTGVuZ3RoO1xuICAgICAgICB0aGlzLm1heEV4dExlbmd0aCA9IG1heEV4dExlbmd0aDtcbiAgICAgICAgdGhpcy5rZXlEZWNvZGVyID0ga2V5RGVjb2RlcjtcbiAgICAgICAgdGhpcy50b3RhbFBvcyA9IDA7XG4gICAgICAgIHRoaXMucG9zID0gMDtcbiAgICAgICAgdGhpcy52aWV3ID0gRU1QVFlfVklFVztcbiAgICAgICAgdGhpcy5ieXRlcyA9IEVNUFRZX0JZVEVTO1xuICAgICAgICB0aGlzLmhlYWRCeXRlID0gSEVBRF9CWVRFX1JFUVVJUkVEO1xuICAgICAgICB0aGlzLnN0YWNrID0gW107XG4gICAgfVxuICAgIERlY29kZXIucHJvdG90eXBlLnJlaW5pdGlhbGl6ZVN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnRvdGFsUG9zID0gMDtcbiAgICAgICAgdGhpcy5oZWFkQnl0ZSA9IEhFQURfQllURV9SRVFVSVJFRDtcbiAgICAgICAgdGhpcy5zdGFjay5sZW5ndGggPSAwO1xuICAgICAgICAvLyB2aWV3LCBieXRlcywgYW5kIHBvcyB3aWxsIGJlIHJlLWluaXRpYWxpemVkIGluIHNldEJ1ZmZlcigpXG4gICAgfTtcbiAgICBEZWNvZGVyLnByb3RvdHlwZS5zZXRCdWZmZXIgPSBmdW5jdGlvbiAoYnVmZmVyKSB7XG4gICAgICAgIHRoaXMuYnl0ZXMgPSBlbnN1cmVVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgIHRoaXMudmlldyA9IGNyZWF0ZURhdGFWaWV3KHRoaXMuYnl0ZXMpO1xuICAgICAgICB0aGlzLnBvcyA9IDA7XG4gICAgfTtcbiAgICBEZWNvZGVyLnByb3RvdHlwZS5hcHBlbmRCdWZmZXIgPSBmdW5jdGlvbiAoYnVmZmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmhlYWRCeXRlID09PSBIRUFEX0JZVEVfUkVRVUlSRUQgJiYgIXRoaXMuaGFzUmVtYWluaW5nKDEpKSB7XG4gICAgICAgICAgICB0aGlzLnNldEJ1ZmZlcihidWZmZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHJlbWFpbmluZ0RhdGEgPSB0aGlzLmJ5dGVzLnN1YmFycmF5KHRoaXMucG9zKTtcbiAgICAgICAgICAgIHZhciBuZXdEYXRhID0gZW5zdXJlVWludDhBcnJheShidWZmZXIpO1xuICAgICAgICAgICAgLy8gY29uY2F0IHJlbWFpbmluZ0RhdGEgKyBuZXdEYXRhXG4gICAgICAgICAgICB2YXIgbmV3QnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkocmVtYWluaW5nRGF0YS5sZW5ndGggKyBuZXdEYXRhLmxlbmd0aCk7XG4gICAgICAgICAgICBuZXdCdWZmZXIuc2V0KHJlbWFpbmluZ0RhdGEpO1xuICAgICAgICAgICAgbmV3QnVmZmVyLnNldChuZXdEYXRhLCByZW1haW5pbmdEYXRhLmxlbmd0aCk7XG4gICAgICAgICAgICB0aGlzLnNldEJ1ZmZlcihuZXdCdWZmZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEZWNvZGVyLnByb3RvdHlwZS5oYXNSZW1haW5pbmcgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LmJ5dGVMZW5ndGggLSB0aGlzLnBvcyA+PSBzaXplO1xuICAgIH07XG4gICAgRGVjb2Rlci5wcm90b3R5cGUuY3JlYXRlRXh0cmFCeXRlRXJyb3IgPSBmdW5jdGlvbiAocG9zVG9TaG93KSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIHZpZXcgPSBfYS52aWV3LCBwb3MgPSBfYS5wb3M7XG4gICAgICAgIHJldHVybiBuZXcgUmFuZ2VFcnJvcihcIkV4dHJhIFwiLmNvbmNhdCh2aWV3LmJ5dGVMZW5ndGggLSBwb3MsIFwiIG9mIFwiKS5jb25jYXQodmlldy5ieXRlTGVuZ3RoLCBcIiBieXRlKHMpIGZvdW5kIGF0IGJ1ZmZlcltcIikuY29uY2F0KHBvc1RvU2hvdywgXCJdXCIpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEB0aHJvd3Mge0RlY29kZUVycm9yfVxuICAgICAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9XG4gICAgICovXG4gICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gKGJ1ZmZlcikge1xuICAgICAgICB0aGlzLnJlaW5pdGlhbGl6ZVN0YXRlKCk7XG4gICAgICAgIHRoaXMuc2V0QnVmZmVyKGJ1ZmZlcik7XG4gICAgICAgIHZhciBvYmplY3QgPSB0aGlzLmRvRGVjb2RlU3luYygpO1xuICAgICAgICBpZiAodGhpcy5oYXNSZW1haW5pbmcoMSkpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuY3JlYXRlRXh0cmFCeXRlRXJyb3IodGhpcy5wb3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfTtcbiAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVNdWx0aSA9IGZ1bmN0aW9uIChidWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWluaXRpYWxpemVTdGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEJ1ZmZlcihidWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaGFzUmVtYWluaW5nKDEpKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kb0RlY29kZVN5bmMoKV07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIERlY29kZXIucHJvdG90eXBlLmRlY29kZUFzeW5jID0gZnVuY3Rpb24gKHN0cmVhbSkge1xuICAgICAgICB2YXIgc3RyZWFtXzEsIHN0cmVhbV8xXzE7XG4gICAgICAgIHZhciBlXzEsIF9hO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGVjb2RlZCwgb2JqZWN0LCBidWZmZXIsIGVfMV8xLCBfYiwgaGVhZEJ5dGUsIHBvcywgdG90YWxQb3M7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnRyeXMucHVzaChbMSwgNiwgNywgMTJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbV8xID0gX19hc3luY1ZhbHVlcyhzdHJlYW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2MubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbNCAvKnlpZWxkKi8sIHN0cmVhbV8xLm5leHQoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHN0cmVhbV8xXzEgPSBfYy5zZW50KCksICFzdHJlYW1fMV8xLmRvbmUpKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IHN0cmVhbV8xXzEudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVjb2RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHRoaXMuY3JlYXRlRXh0cmFCeXRlRXJyb3IodGhpcy50b3RhbFBvcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZEJ1ZmZlcihidWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QgPSB0aGlzLmRvRGVjb2RlU3luYygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgRGF0YVZpZXdJbmRleE91dE9mQm91bmRzRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGU7IC8vIHJldGhyb3dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmFsbHRocm91Z2hcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWxQb3MgKz0gdGhpcy5wb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDQ7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFszIC8qYnJlYWsqLywgMTJdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgICAgICBlXzFfMSA9IF9jLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxMl07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnRyeXMucHVzaChbNywgLCAxMCwgMTFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHN0cmVhbV8xXzEgJiYgIXN0cmVhbV8xXzEuZG9uZSAmJiAoX2EgPSBzdHJlYW1fMS5yZXR1cm4pKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgOV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBfYS5jYWxsKHN0cmVhbV8xKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gOTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OiByZXR1cm4gWzMgLypicmVhayovLCAxMV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzcgLyplbmRmaW5hbGx5Ki9dO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDExOiByZXR1cm4gWzcgLyplbmRmaW5hbGx5Ki9dO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlY29kZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXNSZW1haW5pbmcoMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5jcmVhdGVFeHRyYUJ5dGVFcnJvcih0aGlzLnRvdGFsUG9zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG9iamVjdF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IHRoaXMsIGhlYWRCeXRlID0gX2IuaGVhZEJ5dGUsIHBvcyA9IF9iLnBvcywgdG90YWxQb3MgPSBfYi50b3RhbFBvcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW5zdWZmaWNpZW50IGRhdGEgaW4gcGFyc2luZyBcIi5jb25jYXQocHJldHR5Qnl0ZShoZWFkQnl0ZSksIFwiIGF0IFwiKS5jb25jYXQodG90YWxQb3MsIFwiIChcIikuY29uY2F0KHBvcywgXCIgaW4gdGhlIGN1cnJlbnQgYnVmZmVyKVwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQXJyYXlTdHJlYW0gPSBmdW5jdGlvbiAoc3RyZWFtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZU11bHRpQXN5bmMoc3RyZWFtLCB0cnVlKTtcbiAgICB9O1xuICAgIERlY29kZXIucHJvdG90eXBlLmRlY29kZVN0cmVhbSA9IGZ1bmN0aW9uIChzdHJlYW0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlTXVsdGlBc3luYyhzdHJlYW0sIGZhbHNlKTtcbiAgICB9O1xuICAgIERlY29kZXIucHJvdG90eXBlLmRlY29kZU11bHRpQXN5bmMgPSBmdW5jdGlvbiAoc3RyZWFtLCBpc0FycmF5KSB7XG4gICAgICAgIHJldHVybiBfX2FzeW5jR2VuZXJhdG9yKHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24gZGVjb2RlTXVsdGlBc3luY18xKCkge1xuICAgICAgICAgICAgdmFyIGlzQXJyYXlIZWFkZXJSZXF1aXJlZCwgYXJyYXlJdGVtc0xlZnQsIHN0cmVhbV8yLCBzdHJlYW1fMl8xLCBidWZmZXIsIGVfMiwgZV8zXzE7XG4gICAgICAgICAgICB2YXIgZV8zLCBfYTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXJyYXlIZWFkZXJSZXF1aXJlZCA9IGlzQXJyYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheUl0ZW1zTGVmdCA9IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzEsIDEzLCAxNCwgMTldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbV8yID0gX19hc3luY1ZhbHVlcyhzdHJlYW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbNCAvKnlpZWxkKi8sIF9fYXdhaXQoc3RyZWFtXzIubmV4dCgpKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHN0cmVhbV8yXzEgPSBfYi5zZW50KCksICFzdHJlYW1fMl8xLmRvbmUpKSByZXR1cm4gWzMgLypicmVhayovLCAxMl07XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBzdHJlYW1fMl8xLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkgJiYgYXJyYXlJdGVtc0xlZnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyB0aGlzLmNyZWF0ZUV4dHJhQnl0ZUVycm9yKHRoaXMudG90YWxQb3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRCdWZmZXIoYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5SGVhZGVyUmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJheUl0ZW1zTGVmdCA9IHRoaXMucmVhZEFycmF5U2l6ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQXJyYXlIZWFkZXJSZXF1aXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNDtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2IudHJ5cy5wdXNoKFs0LCA5LCAsIDEwXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDU7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdHJ1ZSkgcmV0dXJuIFszIC8qYnJlYWsqLywgOF07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBfX2F3YWl0KHRoaXMuZG9EZWNvZGVTeW5jKCkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzQgLyp5aWVsZCovLCBfYi5zZW50KCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoLS1hcnJheUl0ZW1zTGVmdCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODogcmV0dXJuIFszIC8qYnJlYWsqLywgMTBdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgICAgICBlXzIgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShlXzIgaW5zdGFuY2VvZiBEYXRhVmlld0luZGV4T3V0T2ZCb3VuZHNFcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlXzI7IC8vIHJldGhyb3dcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDEwXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWxQb3MgKz0gdGhpcy5wb3M7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDExO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDExOiByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjogcmV0dXJuIFszIC8qYnJlYWsqLywgMTldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICAgICAgICAgICAgZV8zXzEgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlXzMgPSB7IGVycm9yOiBlXzNfMSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMTldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2IudHJ5cy5wdXNoKFsxNCwgLCAxNywgMThdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHN0cmVhbV8yXzEgJiYgIXN0cmVhbV8yXzEuZG9uZSAmJiAoX2EgPSBzdHJlYW1fMi5yZXR1cm4pKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMTZdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgX19hd2FpdChfYS5jYWxsKHN0cmVhbV8yKSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE1OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxNjtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxNjogcmV0dXJuIFszIC8qYnJlYWsqLywgMThdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE3OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs3IC8qZW5kZmluYWxseSovXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxODogcmV0dXJuIFs3IC8qZW5kZmluYWxseSovXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIERlY29kZXIucHJvdG90eXBlLmRvRGVjb2RlU3luYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgREVDT0RFOiB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgdmFyIGhlYWRCeXRlID0gdGhpcy5yZWFkSGVhZEJ5dGUoKTtcbiAgICAgICAgICAgIHZhciBvYmplY3QgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAoaGVhZEJ5dGUgPj0gMHhlMCkge1xuICAgICAgICAgICAgICAgIC8vIG5lZ2F0aXZlIGZpeGludCAoMTExeCB4eHh4KSAweGUwIC0gMHhmZlxuICAgICAgICAgICAgICAgIG9iamVjdCA9IGhlYWRCeXRlIC0gMHgxMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoZWFkQnl0ZSA8IDB4YzApIHtcbiAgICAgICAgICAgICAgICBpZiAoaGVhZEJ5dGUgPCAweDgwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHBvc2l0aXZlIGZpeGludCAoMHh4eCB4eHh4KSAweDAwIC0gMHg3ZlxuICAgICAgICAgICAgICAgICAgICBvYmplY3QgPSBoZWFkQnl0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaGVhZEJ5dGUgPCAweDkwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZpeG1hcCAoMTAwMCB4eHh4KSAweDgwIC0gMHg4ZlxuICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGhlYWRCeXRlIC0gMHg4MDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpemUgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHVzaE1hcFN0YXRlKHNpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUgREVDT0RFO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0ID0ge307XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaGVhZEJ5dGUgPCAweGEwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZpeGFycmF5ICgxMDAxIHh4eHgpIDB4OTAgLSAweDlmXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gaGVhZEJ5dGUgLSAweDkwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2l6ZSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXNoQXJyYXlTdGF0ZShzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIERFQ09ERTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBmaXhzdHIgKDEwMXggeHh4eCkgMHhhMCAtIDB4YmZcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJ5dGVMZW5ndGggPSBoZWFkQnl0ZSAtIDB4YTA7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdCA9IHRoaXMuZGVjb2RlVXRmOFN0cmluZyhieXRlTGVuZ3RoLCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoZWFkQnl0ZSA9PT0gMHhjMCkge1xuICAgICAgICAgICAgICAgIC8vIG5pbFxuICAgICAgICAgICAgICAgIG9iamVjdCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoZWFkQnl0ZSA9PT0gMHhjMikge1xuICAgICAgICAgICAgICAgIC8vIGZhbHNlXG4gICAgICAgICAgICAgICAgb2JqZWN0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoZWFkQnl0ZSA9PT0gMHhjMykge1xuICAgICAgICAgICAgICAgIC8vIHRydWVcbiAgICAgICAgICAgICAgICBvYmplY3QgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGVhZEJ5dGUgPT09IDB4Y2EpIHtcbiAgICAgICAgICAgICAgICAvLyBmbG9hdCAzMlxuICAgICAgICAgICAgICAgIG9iamVjdCA9IHRoaXMucmVhZEYzMigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGVhZEJ5dGUgPT09IDB4Y2IpIHtcbiAgICAgICAgICAgICAgICAvLyBmbG9hdCA2NFxuICAgICAgICAgICAgICAgIG9iamVjdCA9IHRoaXMucmVhZEY2NCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGVhZEJ5dGUgPT09IDB4Y2MpIHtcbiAgICAgICAgICAgICAgICAvLyB1aW50IDhcbiAgICAgICAgICAgICAgICBvYmplY3QgPSB0aGlzLnJlYWRVOCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGVhZEJ5dGUgPT09IDB4Y2QpIHtcbiAgICAgICAgICAgICAgICAvLyB1aW50IDE2XG4gICAgICAgICAgICAgICAgb2JqZWN0ID0gdGhpcy5yZWFkVTE2KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoZWFkQnl0ZSA9PT0gMHhjZSkge1xuICAgICAgICAgICAgICAgIC8vIHVpbnQgMzJcbiAgICAgICAgICAgICAgICBvYmplY3QgPSB0aGlzLnJlYWRVMzIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRCeXRlID09PSAweGNmKSB7XG4gICAgICAgICAgICAgICAgLy8gdWludCA2NFxuICAgICAgICAgICAgICAgIG9iamVjdCA9IHRoaXMucmVhZFU2NCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGVhZEJ5dGUgPT09IDB4ZDApIHtcbiAgICAgICAgICAgICAgICAvLyBpbnQgOFxuICAgICAgICAgICAgICAgIG9iamVjdCA9IHRoaXMucmVhZEk4KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoZWFkQnl0ZSA9PT0gMHhkMSkge1xuICAgICAgICAgICAgICAgIC8vIGludCAxNlxuICAgICAgICAgICAgICAgIG9iamVjdCA9IHRoaXMucmVhZEkxNigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGVhZEJ5dGUgPT09IDB4ZDIpIHtcbiAgICAgICAgICAgICAgICAvLyBpbnQgMzJcbiAgICAgICAgICAgICAgICBvYmplY3QgPSB0aGlzLnJlYWRJMzIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRCeXRlID09PSAweGQzKSB7XG4gICAgICAgICAgICAgICAgLy8gaW50IDY0XG4gICAgICAgICAgICAgICAgb2JqZWN0ID0gdGhpcy5yZWFkSTY0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoZWFkQnl0ZSA9PT0gMHhkOSkge1xuICAgICAgICAgICAgICAgIC8vIHN0ciA4XG4gICAgICAgICAgICAgICAgdmFyIGJ5dGVMZW5ndGggPSB0aGlzLmxvb2tVOCgpO1xuICAgICAgICAgICAgICAgIG9iamVjdCA9IHRoaXMuZGVjb2RlVXRmOFN0cmluZyhieXRlTGVuZ3RoLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRCeXRlID09PSAweGRhKSB7XG4gICAgICAgICAgICAgICAgLy8gc3RyIDE2XG4gICAgICAgICAgICAgICAgdmFyIGJ5dGVMZW5ndGggPSB0aGlzLmxvb2tVMTYoKTtcbiAgICAgICAgICAgICAgICBvYmplY3QgPSB0aGlzLmRlY29kZVV0ZjhTdHJpbmcoYnl0ZUxlbmd0aCwgMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoZWFkQnl0ZSA9PT0gMHhkYikge1xuICAgICAgICAgICAgICAgIC8vIHN0ciAzMlxuICAgICAgICAgICAgICAgIHZhciBieXRlTGVuZ3RoID0gdGhpcy5sb29rVTMyKCk7XG4gICAgICAgICAgICAgICAgb2JqZWN0ID0gdGhpcy5kZWNvZGVVdGY4U3RyaW5nKGJ5dGVMZW5ndGgsIDQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGVhZEJ5dGUgPT09IDB4ZGMpIHtcbiAgICAgICAgICAgICAgICAvLyBhcnJheSAxNlxuICAgICAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5yZWFkVTE2KCk7XG4gICAgICAgICAgICAgICAgaWYgKHNpemUgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXNoQXJyYXlTdGF0ZShzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBERUNPREU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoZWFkQnl0ZSA9PT0gMHhkZCkge1xuICAgICAgICAgICAgICAgIC8vIGFycmF5IDMyXG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSB0aGlzLnJlYWRVMzIoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2l6ZSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnB1c2hBcnJheVN0YXRlKHNpemUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIERFQ09ERTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdCA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRCeXRlID09PSAweGRlKSB7XG4gICAgICAgICAgICAgICAgLy8gbWFwIDE2XG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSB0aGlzLnJlYWRVMTYoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2l6ZSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnB1c2hNYXBTdGF0ZShzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBERUNPREU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QgPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoZWFkQnl0ZSA9PT0gMHhkZikge1xuICAgICAgICAgICAgICAgIC8vIG1hcCAzMlxuICAgICAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5yZWFkVTMyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHNpemUgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXNoTWFwU3RhdGUoc2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWUgREVDT0RFO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0ID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGVhZEJ5dGUgPT09IDB4YzQpIHtcbiAgICAgICAgICAgICAgICAvLyBiaW4gOFxuICAgICAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5sb29rVTgoKTtcbiAgICAgICAgICAgICAgICBvYmplY3QgPSB0aGlzLmRlY29kZUJpbmFyeShzaXplLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRCeXRlID09PSAweGM1KSB7XG4gICAgICAgICAgICAgICAgLy8gYmluIDE2XG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSB0aGlzLmxvb2tVMTYoKTtcbiAgICAgICAgICAgICAgICBvYmplY3QgPSB0aGlzLmRlY29kZUJpbmFyeShzaXplLCAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRCeXRlID09PSAweGM2KSB7XG4gICAgICAgICAgICAgICAgLy8gYmluIDMyXG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSB0aGlzLmxvb2tVMzIoKTtcbiAgICAgICAgICAgICAgICBvYmplY3QgPSB0aGlzLmRlY29kZUJpbmFyeShzaXplLCA0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRCeXRlID09PSAweGQ0KSB7XG4gICAgICAgICAgICAgICAgLy8gZml4ZXh0IDFcbiAgICAgICAgICAgICAgICBvYmplY3QgPSB0aGlzLmRlY29kZUV4dGVuc2lvbigxLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRCeXRlID09PSAweGQ1KSB7XG4gICAgICAgICAgICAgICAgLy8gZml4ZXh0IDJcbiAgICAgICAgICAgICAgICBvYmplY3QgPSB0aGlzLmRlY29kZUV4dGVuc2lvbigyLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRCeXRlID09PSAweGQ2KSB7XG4gICAgICAgICAgICAgICAgLy8gZml4ZXh0IDRcbiAgICAgICAgICAgICAgICBvYmplY3QgPSB0aGlzLmRlY29kZUV4dGVuc2lvbig0LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRCeXRlID09PSAweGQ3KSB7XG4gICAgICAgICAgICAgICAgLy8gZml4ZXh0IDhcbiAgICAgICAgICAgICAgICBvYmplY3QgPSB0aGlzLmRlY29kZUV4dGVuc2lvbig4LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRCeXRlID09PSAweGQ4KSB7XG4gICAgICAgICAgICAgICAgLy8gZml4ZXh0IDE2XG4gICAgICAgICAgICAgICAgb2JqZWN0ID0gdGhpcy5kZWNvZGVFeHRlbnNpb24oMTYsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGVhZEJ5dGUgPT09IDB4YzcpIHtcbiAgICAgICAgICAgICAgICAvLyBleHQgOFxuICAgICAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5sb29rVTgoKTtcbiAgICAgICAgICAgICAgICBvYmplY3QgPSB0aGlzLmRlY29kZUV4dGVuc2lvbihzaXplLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRCeXRlID09PSAweGM4KSB7XG4gICAgICAgICAgICAgICAgLy8gZXh0IDE2XG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSB0aGlzLmxvb2tVMTYoKTtcbiAgICAgICAgICAgICAgICBvYmplY3QgPSB0aGlzLmRlY29kZUV4dGVuc2lvbihzaXplLCAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRCeXRlID09PSAweGM5KSB7XG4gICAgICAgICAgICAgICAgLy8gZXh0IDMyXG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSB0aGlzLmxvb2tVMzIoKTtcbiAgICAgICAgICAgICAgICBvYmplY3QgPSB0aGlzLmRlY29kZUV4dGVuc2lvbihzaXplLCA0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBEZWNvZGVFcnJvcihcIlVucmVjb2duaXplZCB0eXBlIGJ5dGU6IFwiLmNvbmNhdChwcmV0dHlCeXRlKGhlYWRCeXRlKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgdmFyIHN0YWNrID0gdGhpcy5zdGFjaztcbiAgICAgICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gYXJyYXlzIGFuZCBtYXBzXG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLnR5cGUgPT09IDAgLyogQVJSQVkgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuYXJyYXlbc3RhdGUucG9zaXRpb25dID0gb2JqZWN0O1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUucG9zaXRpb24gPT09IHN0YXRlLnNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0ID0gc3RhdGUuYXJyYXk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBERUNPREU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc3RhdGUudHlwZSA9PT0gMSAvKiBNQVBfS0VZICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZE1hcEtleVR5cGUob2JqZWN0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IERlY29kZUVycm9yKFwiVGhlIHR5cGUgb2Yga2V5IG11c3QgYmUgc3RyaW5nIG9yIG51bWJlciBidXQgXCIgKyB0eXBlb2Ygb2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0ID09PSBcIl9fcHJvdG9fX1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGVjb2RlRXJyb3IoXCJUaGUga2V5IF9fcHJvdG9fXyBpcyBub3QgYWxsb3dlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5rZXkgPSBvYmplY3Q7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLnR5cGUgPSAyIC8qIE1BUF9WQUxVRSAqLztcbiAgICAgICAgICAgICAgICAgICAgY29udGludWUgREVDT0RFO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQgbXVzdCBiZSBgc3RhdGUudHlwZSA9PT0gU3RhdGUuTUFQX1ZBTFVFYCBoZXJlXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLm1hcFtzdGF0ZS5rZXldID0gb2JqZWN0O1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5yZWFkQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLnJlYWRDb3VudCA9PT0gc3RhdGUuc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QgPSBzdGF0ZS5tYXA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5rZXkgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUudHlwZSA9IDEgLyogTUFQX0tFWSAqLztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIERFQ09ERTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERlY29kZXIucHJvdG90eXBlLnJlYWRIZWFkQnl0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVhZEJ5dGUgPT09IEhFQURfQllURV9SRVFVSVJFRCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkQnl0ZSA9IHRoaXMucmVhZFU4KCk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImhlYWRCeXRlXCIsIHByZXR0eUJ5dGUodGhpcy5oZWFkQnl0ZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmhlYWRCeXRlO1xuICAgIH07XG4gICAgRGVjb2Rlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGVhZEJ5dGUgPSBIRUFEX0JZVEVfUkVRVUlSRUQ7XG4gICAgfTtcbiAgICBEZWNvZGVyLnByb3RvdHlwZS5yZWFkQXJyYXlTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaGVhZEJ5dGUgPSB0aGlzLnJlYWRIZWFkQnl0ZSgpO1xuICAgICAgICBzd2l0Y2ggKGhlYWRCeXRlKSB7XG4gICAgICAgICAgICBjYXNlIDB4ZGM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVhZFUxNigpO1xuICAgICAgICAgICAgY2FzZSAweGRkOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlYWRVMzIoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBpZiAoaGVhZEJ5dGUgPCAweGEwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoZWFkQnl0ZSAtIDB4OTA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGVjb2RlRXJyb3IoXCJVbnJlY29nbml6ZWQgYXJyYXkgdHlwZSBieXRlOiBcIi5jb25jYXQocHJldHR5Qnl0ZShoZWFkQnl0ZSkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERlY29kZXIucHJvdG90eXBlLnB1c2hNYXBTdGF0ZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgICAgIGlmIChzaXplID4gdGhpcy5tYXhNYXBMZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBEZWNvZGVFcnJvcihcIk1heCBsZW5ndGggZXhjZWVkZWQ6IG1hcCBsZW5ndGggKFwiLmNvbmNhdChzaXplLCBcIikgPiBtYXhNYXBMZW5ndGhMZW5ndGggKFwiKS5jb25jYXQodGhpcy5tYXhNYXBMZW5ndGgsIFwiKVwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGFjay5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IDEgLyogTUFQX0tFWSAqLyxcbiAgICAgICAgICAgIHNpemU6IHNpemUsXG4gICAgICAgICAgICBrZXk6IG51bGwsXG4gICAgICAgICAgICByZWFkQ291bnQ6IDAsXG4gICAgICAgICAgICBtYXA6IHt9LFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIERlY29kZXIucHJvdG90eXBlLnB1c2hBcnJheVN0YXRlID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICAgICAgaWYgKHNpemUgPiB0aGlzLm1heEFycmF5TGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRGVjb2RlRXJyb3IoXCJNYXggbGVuZ3RoIGV4Y2VlZGVkOiBhcnJheSBsZW5ndGggKFwiLmNvbmNhdChzaXplLCBcIikgPiBtYXhBcnJheUxlbmd0aCAoXCIpLmNvbmNhdCh0aGlzLm1heEFycmF5TGVuZ3RoLCBcIilcIikpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhY2sucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiAwIC8qIEFSUkFZICovLFxuICAgICAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgICAgIGFycmF5OiBuZXcgQXJyYXkoc2l6ZSksXG4gICAgICAgICAgICBwb3NpdGlvbjogMCxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVVdGY4U3RyaW5nID0gZnVuY3Rpb24gKGJ5dGVMZW5ndGgsIGhlYWRlck9mZnNldCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmIChieXRlTGVuZ3RoID4gdGhpcy5tYXhTdHJMZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBEZWNvZGVFcnJvcihcIk1heCBsZW5ndGggZXhjZWVkZWQ6IFVURi04IGJ5dGUgbGVuZ3RoIChcIi5jb25jYXQoYnl0ZUxlbmd0aCwgXCIpID4gbWF4U3RyTGVuZ3RoIChcIikuY29uY2F0KHRoaXMubWF4U3RyTGVuZ3RoLCBcIilcIikpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmJ5dGVzLmJ5dGVMZW5ndGggPCB0aGlzLnBvcyArIGhlYWRlck9mZnNldCArIGJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IE1PUkVfREFUQTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb2Zmc2V0ID0gdGhpcy5wb3MgKyBoZWFkZXJPZmZzZXQ7XG4gICAgICAgIHZhciBvYmplY3Q7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlSXNNYXBLZXkoKSAmJiAoKF9hID0gdGhpcy5rZXlEZWNvZGVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FuQmVDYWNoZWQoYnl0ZUxlbmd0aCkpKSB7XG4gICAgICAgICAgICBvYmplY3QgPSB0aGlzLmtleURlY29kZXIuZGVjb2RlKHRoaXMuYnl0ZXMsIG9mZnNldCwgYnl0ZUxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYnl0ZUxlbmd0aCA+IFRFWFRfREVDT0RFUl9USFJFU0hPTEQpIHtcbiAgICAgICAgICAgIG9iamVjdCA9IHV0ZjhEZWNvZGVURCh0aGlzLmJ5dGVzLCBvZmZzZXQsIGJ5dGVMZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqZWN0ID0gdXRmOERlY29kZUpzKHRoaXMuYnl0ZXMsIG9mZnNldCwgYnl0ZUxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wb3MgKz0gaGVhZGVyT2Zmc2V0ICsgYnl0ZUxlbmd0aDtcbiAgICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9O1xuICAgIERlY29kZXIucHJvdG90eXBlLnN0YXRlSXNNYXBLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhY2tbdGhpcy5zdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS50eXBlID09PSAxIC8qIE1BUF9LRVkgKi87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQmluYXJ5ID0gZnVuY3Rpb24gKGJ5dGVMZW5ndGgsIGhlYWRPZmZzZXQpIHtcbiAgICAgICAgaWYgKGJ5dGVMZW5ndGggPiB0aGlzLm1heEJpbkxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IERlY29kZUVycm9yKFwiTWF4IGxlbmd0aCBleGNlZWRlZDogYmluIGxlbmd0aCAoXCIuY29uY2F0KGJ5dGVMZW5ndGgsIFwiKSA+IG1heEJpbkxlbmd0aCAoXCIpLmNvbmNhdCh0aGlzLm1heEJpbkxlbmd0aCwgXCIpXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaGFzUmVtYWluaW5nKGJ5dGVMZW5ndGggKyBoZWFkT2Zmc2V0KSkge1xuICAgICAgICAgICAgdGhyb3cgTU9SRV9EQVRBO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLnBvcyArIGhlYWRPZmZzZXQ7XG4gICAgICAgIHZhciBvYmplY3QgPSB0aGlzLmJ5dGVzLnN1YmFycmF5KG9mZnNldCwgb2Zmc2V0ICsgYnl0ZUxlbmd0aCk7XG4gICAgICAgIHRoaXMucG9zICs9IGhlYWRPZmZzZXQgKyBieXRlTGVuZ3RoO1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH07XG4gICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlRXh0ZW5zaW9uID0gZnVuY3Rpb24gKHNpemUsIGhlYWRPZmZzZXQpIHtcbiAgICAgICAgaWYgKHNpemUgPiB0aGlzLm1heEV4dExlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IERlY29kZUVycm9yKFwiTWF4IGxlbmd0aCBleGNlZWRlZDogZXh0IGxlbmd0aCAoXCIuY29uY2F0KHNpemUsIFwiKSA+IG1heEV4dExlbmd0aCAoXCIpLmNvbmNhdCh0aGlzLm1heEV4dExlbmd0aCwgXCIpXCIpKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZXh0VHlwZSA9IHRoaXMudmlldy5nZXRJbnQ4KHRoaXMucG9zICsgaGVhZE9mZnNldCk7XG4gICAgICAgIHZhciBkYXRhID0gdGhpcy5kZWNvZGVCaW5hcnkoc2l6ZSwgaGVhZE9mZnNldCArIDEgLyogZXh0VHlwZSAqLyk7XG4gICAgICAgIHJldHVybiB0aGlzLmV4dGVuc2lvbkNvZGVjLmRlY29kZShkYXRhLCBleHRUeXBlLCB0aGlzLmNvbnRleHQpO1xuICAgIH07XG4gICAgRGVjb2Rlci5wcm90b3R5cGUubG9va1U4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LmdldFVpbnQ4KHRoaXMucG9zKTtcbiAgICB9O1xuICAgIERlY29kZXIucHJvdG90eXBlLmxvb2tVMTYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXcuZ2V0VWludDE2KHRoaXMucG9zKTtcbiAgICB9O1xuICAgIERlY29kZXIucHJvdG90eXBlLmxvb2tVMzIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXcuZ2V0VWludDMyKHRoaXMucG9zKTtcbiAgICB9O1xuICAgIERlY29kZXIucHJvdG90eXBlLnJlYWRVOCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52aWV3LmdldFVpbnQ4KHRoaXMucG9zKTtcbiAgICAgICAgdGhpcy5wb3MrKztcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgRGVjb2Rlci5wcm90b3R5cGUucmVhZEk4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZpZXcuZ2V0SW50OCh0aGlzLnBvcyk7XG4gICAgICAgIHRoaXMucG9zKys7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIERlY29kZXIucHJvdG90eXBlLnJlYWRVMTYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmlldy5nZXRVaW50MTYodGhpcy5wb3MpO1xuICAgICAgICB0aGlzLnBvcyArPSAyO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgICBEZWNvZGVyLnByb3RvdHlwZS5yZWFkSTE2ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZpZXcuZ2V0SW50MTYodGhpcy5wb3MpO1xuICAgICAgICB0aGlzLnBvcyArPSAyO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgICBEZWNvZGVyLnByb3RvdHlwZS5yZWFkVTMyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZpZXcuZ2V0VWludDMyKHRoaXMucG9zKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gNDtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgRGVjb2Rlci5wcm90b3R5cGUucmVhZEkzMiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52aWV3LmdldEludDMyKHRoaXMucG9zKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gNDtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgRGVjb2Rlci5wcm90b3R5cGUucmVhZFU2NCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gZ2V0VWludDY0KHRoaXMudmlldywgdGhpcy5wb3MpO1xuICAgICAgICB0aGlzLnBvcyArPSA4O1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgICBEZWNvZGVyLnByb3RvdHlwZS5yZWFkSTY0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBnZXRJbnQ2NCh0aGlzLnZpZXcsIHRoaXMucG9zKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gODtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgRGVjb2Rlci5wcm90b3R5cGUucmVhZEYzMiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52aWV3LmdldEZsb2F0MzIodGhpcy5wb3MpO1xuICAgICAgICB0aGlzLnBvcyArPSA0O1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgICBEZWNvZGVyLnByb3RvdHlwZS5yZWFkRjY0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZpZXcuZ2V0RmxvYXQ2NCh0aGlzLnBvcyk7XG4gICAgICAgIHRoaXMucG9zICs9IDg7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIHJldHVybiBEZWNvZGVyO1xufSgpKTtcbmV4cG9ydCB7IERlY29kZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURlY29kZXIubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@msgpack/msgpack/dist.es5+esm/Decoder.mjs\n");

/***/ }),

/***/ "./node_modules/@msgpack/msgpack/dist.es5+esm/Encoder.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@msgpack/msgpack/dist.es5+esm/Encoder.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DEFAULT_INITIAL_BUFFER_SIZE\": () => (/* binding */ DEFAULT_INITIAL_BUFFER_SIZE),\n/* harmony export */   \"DEFAULT_MAX_DEPTH\": () => (/* binding */ DEFAULT_MAX_DEPTH),\n/* harmony export */   \"Encoder\": () => (/* binding */ Encoder)\n/* harmony export */ });\n/* harmony import */ var _utils_utf8_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/utf8.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/utils/utf8.mjs\");\n/* harmony import */ var _ExtensionCodec_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ExtensionCodec.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/ExtensionCodec.mjs\");\n/* harmony import */ var _utils_int_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/int.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/utils/int.mjs\");\n/* harmony import */ var _utils_typedArrays_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/typedArrays.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/utils/typedArrays.mjs\");\n\n\n\n\nvar DEFAULT_MAX_DEPTH = 100;\nvar DEFAULT_INITIAL_BUFFER_SIZE = 2048;\nvar Encoder = /** @class */ (function () {\n    function Encoder(extensionCodec, context, maxDepth, initialBufferSize, sortKeys, forceFloat32, ignoreUndefined, forceIntegerToFloat) {\n        if (extensionCodec === void 0) { extensionCodec = _ExtensionCodec_mjs__WEBPACK_IMPORTED_MODULE_0__.ExtensionCodec.defaultCodec; }\n        if (context === void 0) { context = undefined; }\n        if (maxDepth === void 0) { maxDepth = DEFAULT_MAX_DEPTH; }\n        if (initialBufferSize === void 0) { initialBufferSize = DEFAULT_INITIAL_BUFFER_SIZE; }\n        if (sortKeys === void 0) { sortKeys = false; }\n        if (forceFloat32 === void 0) { forceFloat32 = false; }\n        if (ignoreUndefined === void 0) { ignoreUndefined = false; }\n        if (forceIntegerToFloat === void 0) { forceIntegerToFloat = false; }\n        this.extensionCodec = extensionCodec;\n        this.context = context;\n        this.maxDepth = maxDepth;\n        this.initialBufferSize = initialBufferSize;\n        this.sortKeys = sortKeys;\n        this.forceFloat32 = forceFloat32;\n        this.ignoreUndefined = ignoreUndefined;\n        this.forceIntegerToFloat = forceIntegerToFloat;\n        this.pos = 0;\n        this.view = new DataView(new ArrayBuffer(this.initialBufferSize));\n        this.bytes = new Uint8Array(this.view.buffer);\n    }\n    Encoder.prototype.getUint8Array = function () {\n        return this.bytes.subarray(0, this.pos);\n    };\n    Encoder.prototype.reinitializeState = function () {\n        this.pos = 0;\n    };\n    Encoder.prototype.encode = function (object) {\n        this.reinitializeState();\n        this.doEncode(object, 1);\n        return this.getUint8Array();\n    };\n    Encoder.prototype.doEncode = function (object, depth) {\n        if (depth > this.maxDepth) {\n            throw new Error(\"Too deep objects in depth \".concat(depth));\n        }\n        if (object == null) {\n            this.encodeNil();\n        }\n        else if (typeof object === \"boolean\") {\n            this.encodeBoolean(object);\n        }\n        else if (typeof object === \"number\") {\n            this.encodeNumber(object);\n        }\n        else if (typeof object === \"string\") {\n            this.encodeString(object);\n        }\n        else {\n            this.encodeObject(object, depth);\n        }\n    };\n    Encoder.prototype.ensureBufferSizeToWrite = function (sizeToWrite) {\n        var requiredSize = this.pos + sizeToWrite;\n        if (this.view.byteLength < requiredSize) {\n            this.resizeBuffer(requiredSize * 2);\n        }\n    };\n    Encoder.prototype.resizeBuffer = function (newSize) {\n        var newBuffer = new ArrayBuffer(newSize);\n        var newBytes = new Uint8Array(newBuffer);\n        var newView = new DataView(newBuffer);\n        newBytes.set(this.bytes);\n        this.view = newView;\n        this.bytes = newBytes;\n    };\n    Encoder.prototype.encodeNil = function () {\n        this.writeU8(0xc0);\n    };\n    Encoder.prototype.encodeBoolean = function (object) {\n        if (object === false) {\n            this.writeU8(0xc2);\n        }\n        else {\n            this.writeU8(0xc3);\n        }\n    };\n    Encoder.prototype.encodeNumber = function (object) {\n        if (Number.isSafeInteger(object) && !this.forceIntegerToFloat) {\n            if (object >= 0) {\n                if (object < 0x80) {\n                    // positive fixint\n                    this.writeU8(object);\n                }\n                else if (object < 0x100) {\n                    // uint 8\n                    this.writeU8(0xcc);\n                    this.writeU8(object);\n                }\n                else if (object < 0x10000) {\n                    // uint 16\n                    this.writeU8(0xcd);\n                    this.writeU16(object);\n                }\n                else if (object < 0x100000000) {\n                    // uint 32\n                    this.writeU8(0xce);\n                    this.writeU32(object);\n                }\n                else {\n                    // uint 64\n                    this.writeU8(0xcf);\n                    this.writeU64(object);\n                }\n            }\n            else {\n                if (object >= -0x20) {\n                    // negative fixint\n                    this.writeU8(0xe0 | (object + 0x20));\n                }\n                else if (object >= -0x80) {\n                    // int 8\n                    this.writeU8(0xd0);\n                    this.writeI8(object);\n                }\n                else if (object >= -0x8000) {\n                    // int 16\n                    this.writeU8(0xd1);\n                    this.writeI16(object);\n                }\n                else if (object >= -0x80000000) {\n                    // int 32\n                    this.writeU8(0xd2);\n                    this.writeI32(object);\n                }\n                else {\n                    // int 64\n                    this.writeU8(0xd3);\n                    this.writeI64(object);\n                }\n            }\n        }\n        else {\n            // non-integer numbers\n            if (this.forceFloat32) {\n                // float 32\n                this.writeU8(0xca);\n                this.writeF32(object);\n            }\n            else {\n                // float 64\n                this.writeU8(0xcb);\n                this.writeF64(object);\n            }\n        }\n    };\n    Encoder.prototype.writeStringHeader = function (byteLength) {\n        if (byteLength < 32) {\n            // fixstr\n            this.writeU8(0xa0 + byteLength);\n        }\n        else if (byteLength < 0x100) {\n            // str 8\n            this.writeU8(0xd9);\n            this.writeU8(byteLength);\n        }\n        else if (byteLength < 0x10000) {\n            // str 16\n            this.writeU8(0xda);\n            this.writeU16(byteLength);\n        }\n        else if (byteLength < 0x100000000) {\n            // str 32\n            this.writeU8(0xdb);\n            this.writeU32(byteLength);\n        }\n        else {\n            throw new Error(\"Too long string: \".concat(byteLength, \" bytes in UTF-8\"));\n        }\n    };\n    Encoder.prototype.encodeString = function (object) {\n        var maxHeaderSize = 1 + 4;\n        var strLength = object.length;\n        if (strLength > _utils_utf8_mjs__WEBPACK_IMPORTED_MODULE_1__.TEXT_ENCODER_THRESHOLD) {\n            var byteLength = (0,_utils_utf8_mjs__WEBPACK_IMPORTED_MODULE_1__.utf8Count)(object);\n            this.ensureBufferSizeToWrite(maxHeaderSize + byteLength);\n            this.writeStringHeader(byteLength);\n            (0,_utils_utf8_mjs__WEBPACK_IMPORTED_MODULE_1__.utf8EncodeTE)(object, this.bytes, this.pos);\n            this.pos += byteLength;\n        }\n        else {\n            var byteLength = (0,_utils_utf8_mjs__WEBPACK_IMPORTED_MODULE_1__.utf8Count)(object);\n            this.ensureBufferSizeToWrite(maxHeaderSize + byteLength);\n            this.writeStringHeader(byteLength);\n            (0,_utils_utf8_mjs__WEBPACK_IMPORTED_MODULE_1__.utf8EncodeJs)(object, this.bytes, this.pos);\n            this.pos += byteLength;\n        }\n    };\n    Encoder.prototype.encodeObject = function (object, depth) {\n        // try to encode objects with custom codec first of non-primitives\n        var ext = this.extensionCodec.tryToEncode(object, this.context);\n        if (ext != null) {\n            this.encodeExtension(ext);\n        }\n        else if (Array.isArray(object)) {\n            this.encodeArray(object, depth);\n        }\n        else if (ArrayBuffer.isView(object)) {\n            this.encodeBinary(object);\n        }\n        else if (typeof object === \"object\") {\n            this.encodeMap(object, depth);\n        }\n        else {\n            // symbol, function and other special object come here unless extensionCodec handles them.\n            throw new Error(\"Unrecognized object: \".concat(Object.prototype.toString.apply(object)));\n        }\n    };\n    Encoder.prototype.encodeBinary = function (object) {\n        var size = object.byteLength;\n        if (size < 0x100) {\n            // bin 8\n            this.writeU8(0xc4);\n            this.writeU8(size);\n        }\n        else if (size < 0x10000) {\n            // bin 16\n            this.writeU8(0xc5);\n            this.writeU16(size);\n        }\n        else if (size < 0x100000000) {\n            // bin 32\n            this.writeU8(0xc6);\n            this.writeU32(size);\n        }\n        else {\n            throw new Error(\"Too large binary: \".concat(size));\n        }\n        var bytes = (0,_utils_typedArrays_mjs__WEBPACK_IMPORTED_MODULE_2__.ensureUint8Array)(object);\n        this.writeU8a(bytes);\n    };\n    Encoder.prototype.encodeArray = function (object, depth) {\n        var size = object.length;\n        if (size < 16) {\n            // fixarray\n            this.writeU8(0x90 + size);\n        }\n        else if (size < 0x10000) {\n            // array 16\n            this.writeU8(0xdc);\n            this.writeU16(size);\n        }\n        else if (size < 0x100000000) {\n            // array 32\n            this.writeU8(0xdd);\n            this.writeU32(size);\n        }\n        else {\n            throw new Error(\"Too large array: \".concat(size));\n        }\n        for (var _i = 0, object_1 = object; _i < object_1.length; _i++) {\n            var item = object_1[_i];\n            this.doEncode(item, depth + 1);\n        }\n    };\n    Encoder.prototype.countWithoutUndefined = function (object, keys) {\n        var count = 0;\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            if (object[key] !== undefined) {\n                count++;\n            }\n        }\n        return count;\n    };\n    Encoder.prototype.encodeMap = function (object, depth) {\n        var keys = Object.keys(object);\n        if (this.sortKeys) {\n            keys.sort();\n        }\n        var size = this.ignoreUndefined ? this.countWithoutUndefined(object, keys) : keys.length;\n        if (size < 16) {\n            // fixmap\n            this.writeU8(0x80 + size);\n        }\n        else if (size < 0x10000) {\n            // map 16\n            this.writeU8(0xde);\n            this.writeU16(size);\n        }\n        else if (size < 0x100000000) {\n            // map 32\n            this.writeU8(0xdf);\n            this.writeU32(size);\n        }\n        else {\n            throw new Error(\"Too large map object: \".concat(size));\n        }\n        for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n            var key = keys_2[_i];\n            var value = object[key];\n            if (!(this.ignoreUndefined && value === undefined)) {\n                this.encodeString(key);\n                this.doEncode(value, depth + 1);\n            }\n        }\n    };\n    Encoder.prototype.encodeExtension = function (ext) {\n        var size = ext.data.length;\n        if (size === 1) {\n            // fixext 1\n            this.writeU8(0xd4);\n        }\n        else if (size === 2) {\n            // fixext 2\n            this.writeU8(0xd5);\n        }\n        else if (size === 4) {\n            // fixext 4\n            this.writeU8(0xd6);\n        }\n        else if (size === 8) {\n            // fixext 8\n            this.writeU8(0xd7);\n        }\n        else if (size === 16) {\n            // fixext 16\n            this.writeU8(0xd8);\n        }\n        else if (size < 0x100) {\n            // ext 8\n            this.writeU8(0xc7);\n            this.writeU8(size);\n        }\n        else if (size < 0x10000) {\n            // ext 16\n            this.writeU8(0xc8);\n            this.writeU16(size);\n        }\n        else if (size < 0x100000000) {\n            // ext 32\n            this.writeU8(0xc9);\n            this.writeU32(size);\n        }\n        else {\n            throw new Error(\"Too large extension object: \".concat(size));\n        }\n        this.writeI8(ext.type);\n        this.writeU8a(ext.data);\n    };\n    Encoder.prototype.writeU8 = function (value) {\n        this.ensureBufferSizeToWrite(1);\n        this.view.setUint8(this.pos, value);\n        this.pos++;\n    };\n    Encoder.prototype.writeU8a = function (values) {\n        var size = values.length;\n        this.ensureBufferSizeToWrite(size);\n        this.bytes.set(values, this.pos);\n        this.pos += size;\n    };\n    Encoder.prototype.writeI8 = function (value) {\n        this.ensureBufferSizeToWrite(1);\n        this.view.setInt8(this.pos, value);\n        this.pos++;\n    };\n    Encoder.prototype.writeU16 = function (value) {\n        this.ensureBufferSizeToWrite(2);\n        this.view.setUint16(this.pos, value);\n        this.pos += 2;\n    };\n    Encoder.prototype.writeI16 = function (value) {\n        this.ensureBufferSizeToWrite(2);\n        this.view.setInt16(this.pos, value);\n        this.pos += 2;\n    };\n    Encoder.prototype.writeU32 = function (value) {\n        this.ensureBufferSizeToWrite(4);\n        this.view.setUint32(this.pos, value);\n        this.pos += 4;\n    };\n    Encoder.prototype.writeI32 = function (value) {\n        this.ensureBufferSizeToWrite(4);\n        this.view.setInt32(this.pos, value);\n        this.pos += 4;\n    };\n    Encoder.prototype.writeF32 = function (value) {\n        this.ensureBufferSizeToWrite(4);\n        this.view.setFloat32(this.pos, value);\n        this.pos += 4;\n    };\n    Encoder.prototype.writeF64 = function (value) {\n        this.ensureBufferSizeToWrite(8);\n        this.view.setFloat64(this.pos, value);\n        this.pos += 8;\n    };\n    Encoder.prototype.writeU64 = function (value) {\n        this.ensureBufferSizeToWrite(8);\n        (0,_utils_int_mjs__WEBPACK_IMPORTED_MODULE_3__.setUint64)(this.view, this.pos, value);\n        this.pos += 8;\n    };\n    Encoder.prototype.writeI64 = function (value) {\n        this.ensureBufferSizeToWrite(8);\n        (0,_utils_int_mjs__WEBPACK_IMPORTED_MODULE_3__.setInt64)(this.view, this.pos, value);\n        this.pos += 8;\n    };\n    return Encoder;\n}());\n\n//# sourceMappingURL=Encoder.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vRW5jb2Rlci5tanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFpRztBQUMzQztBQUNBO0FBQ0s7QUFDcEQ7QUFDQTtBQUNQO0FBQ0E7QUFDQSx5Q0FBeUMsaUJBQWlCLDRFQUEyQjtBQUNyRixrQ0FBa0M7QUFDbEMsbUNBQW1DO0FBQ25DLDRDQUE0QztBQUM1QyxtQ0FBbUM7QUFDbkMsdUNBQXVDO0FBQ3ZDLDBDQUEwQztBQUMxQyw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixtRUFBc0I7QUFDOUMsNkJBQTZCLDBEQUFTO0FBQ3RDO0FBQ0E7QUFDQSxZQUFZLDZEQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwwREFBUztBQUN0QztBQUNBO0FBQ0EsWUFBWSw2REFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix3RUFBZ0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHNCQUFzQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msb0JBQW9CO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxvQkFBb0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx5REFBUztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsd0RBQVE7QUFDaEI7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNrQjtBQUNuQiIsInNvdXJjZXMiOlsid2VicGFjazovLzIwMjEwMTExX3dlYmNoYXQvLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vRW5jb2Rlci5tanM/N2ZmOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1dGY4RW5jb2RlSnMsIHV0ZjhDb3VudCwgVEVYVF9FTkNPREVSX1RIUkVTSE9MRCwgdXRmOEVuY29kZVRFIH0gZnJvbSBcIi4vdXRpbHMvdXRmOC5tanNcIjtcbmltcG9ydCB7IEV4dGVuc2lvbkNvZGVjIH0gZnJvbSBcIi4vRXh0ZW5zaW9uQ29kZWMubWpzXCI7XG5pbXBvcnQgeyBzZXRJbnQ2NCwgc2V0VWludDY0IH0gZnJvbSBcIi4vdXRpbHMvaW50Lm1qc1wiO1xuaW1wb3J0IHsgZW5zdXJlVWludDhBcnJheSB9IGZyb20gXCIuL3V0aWxzL3R5cGVkQXJyYXlzLm1qc1wiO1xuZXhwb3J0IHZhciBERUZBVUxUX01BWF9ERVBUSCA9IDEwMDtcbmV4cG9ydCB2YXIgREVGQVVMVF9JTklUSUFMX0JVRkZFUl9TSVpFID0gMjA0ODtcbnZhciBFbmNvZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEVuY29kZXIoZXh0ZW5zaW9uQ29kZWMsIGNvbnRleHQsIG1heERlcHRoLCBpbml0aWFsQnVmZmVyU2l6ZSwgc29ydEtleXMsIGZvcmNlRmxvYXQzMiwgaWdub3JlVW5kZWZpbmVkLCBmb3JjZUludGVnZXJUb0Zsb2F0KSB7XG4gICAgICAgIGlmIChleHRlbnNpb25Db2RlYyA9PT0gdm9pZCAwKSB7IGV4dGVuc2lvbkNvZGVjID0gRXh0ZW5zaW9uQ29kZWMuZGVmYXVsdENvZGVjOyB9XG4gICAgICAgIGlmIChjb250ZXh0ID09PSB2b2lkIDApIHsgY29udGV4dCA9IHVuZGVmaW5lZDsgfVxuICAgICAgICBpZiAobWF4RGVwdGggPT09IHZvaWQgMCkgeyBtYXhEZXB0aCA9IERFRkFVTFRfTUFYX0RFUFRIOyB9XG4gICAgICAgIGlmIChpbml0aWFsQnVmZmVyU2l6ZSA9PT0gdm9pZCAwKSB7IGluaXRpYWxCdWZmZXJTaXplID0gREVGQVVMVF9JTklUSUFMX0JVRkZFUl9TSVpFOyB9XG4gICAgICAgIGlmIChzb3J0S2V5cyA9PT0gdm9pZCAwKSB7IHNvcnRLZXlzID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKGZvcmNlRmxvYXQzMiA9PT0gdm9pZCAwKSB7IGZvcmNlRmxvYXQzMiA9IGZhbHNlOyB9XG4gICAgICAgIGlmIChpZ25vcmVVbmRlZmluZWQgPT09IHZvaWQgMCkgeyBpZ25vcmVVbmRlZmluZWQgPSBmYWxzZTsgfVxuICAgICAgICBpZiAoZm9yY2VJbnRlZ2VyVG9GbG9hdCA9PT0gdm9pZCAwKSB7IGZvcmNlSW50ZWdlclRvRmxvYXQgPSBmYWxzZTsgfVxuICAgICAgICB0aGlzLmV4dGVuc2lvbkNvZGVjID0gZXh0ZW5zaW9uQ29kZWM7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMubWF4RGVwdGggPSBtYXhEZXB0aDtcbiAgICAgICAgdGhpcy5pbml0aWFsQnVmZmVyU2l6ZSA9IGluaXRpYWxCdWZmZXJTaXplO1xuICAgICAgICB0aGlzLnNvcnRLZXlzID0gc29ydEtleXM7XG4gICAgICAgIHRoaXMuZm9yY2VGbG9hdDMyID0gZm9yY2VGbG9hdDMyO1xuICAgICAgICB0aGlzLmlnbm9yZVVuZGVmaW5lZCA9IGlnbm9yZVVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5mb3JjZUludGVnZXJUb0Zsb2F0ID0gZm9yY2VJbnRlZ2VyVG9GbG9hdDtcbiAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgICAgICB0aGlzLnZpZXcgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKHRoaXMuaW5pdGlhbEJ1ZmZlclNpemUpKTtcbiAgICAgICAgdGhpcy5ieXRlcyA9IG5ldyBVaW50OEFycmF5KHRoaXMudmlldy5idWZmZXIpO1xuICAgIH1cbiAgICBFbmNvZGVyLnByb3RvdHlwZS5nZXRVaW50OEFycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ieXRlcy5zdWJhcnJheSgwLCB0aGlzLnBvcyk7XG4gICAgfTtcbiAgICBFbmNvZGVyLnByb3RvdHlwZS5yZWluaXRpYWxpemVTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgIH07XG4gICAgRW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICB0aGlzLnJlaW5pdGlhbGl6ZVN0YXRlKCk7XG4gICAgICAgIHRoaXMuZG9FbmNvZGUob2JqZWN0LCAxKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VWludDhBcnJheSgpO1xuICAgIH07XG4gICAgRW5jb2Rlci5wcm90b3R5cGUuZG9FbmNvZGUgPSBmdW5jdGlvbiAob2JqZWN0LCBkZXB0aCkge1xuICAgICAgICBpZiAoZGVwdGggPiB0aGlzLm1heERlcHRoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb28gZGVlcCBvYmplY3RzIGluIGRlcHRoIFwiLmNvbmNhdChkZXB0aCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5lbmNvZGVOaWwoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0ID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICAgICAgdGhpcy5lbmNvZGVCb29sZWFuKG9iamVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9iamVjdCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgdGhpcy5lbmNvZGVOdW1iZXIob2JqZWN0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aGlzLmVuY29kZVN0cmluZyhvYmplY3QpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbmNvZGVPYmplY3Qob2JqZWN0LCBkZXB0aCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVuY29kZXIucHJvdG90eXBlLmVuc3VyZUJ1ZmZlclNpemVUb1dyaXRlID0gZnVuY3Rpb24gKHNpemVUb1dyaXRlKSB7XG4gICAgICAgIHZhciByZXF1aXJlZFNpemUgPSB0aGlzLnBvcyArIHNpemVUb1dyaXRlO1xuICAgICAgICBpZiAodGhpcy52aWV3LmJ5dGVMZW5ndGggPCByZXF1aXJlZFNpemUpIHtcbiAgICAgICAgICAgIHRoaXMucmVzaXplQnVmZmVyKHJlcXVpcmVkU2l6ZSAqIDIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbmNvZGVyLnByb3RvdHlwZS5yZXNpemVCdWZmZXIgPSBmdW5jdGlvbiAobmV3U2l6ZSkge1xuICAgICAgICB2YXIgbmV3QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKG5ld1NpemUpO1xuICAgICAgICB2YXIgbmV3Qnl0ZXMgPSBuZXcgVWludDhBcnJheShuZXdCdWZmZXIpO1xuICAgICAgICB2YXIgbmV3VmlldyA9IG5ldyBEYXRhVmlldyhuZXdCdWZmZXIpO1xuICAgICAgICBuZXdCeXRlcy5zZXQodGhpcy5ieXRlcyk7XG4gICAgICAgIHRoaXMudmlldyA9IG5ld1ZpZXc7XG4gICAgICAgIHRoaXMuYnl0ZXMgPSBuZXdCeXRlcztcbiAgICB9O1xuICAgIEVuY29kZXIucHJvdG90eXBlLmVuY29kZU5pbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy53cml0ZVU4KDB4YzApO1xuICAgIH07XG4gICAgRW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlQm9vbGVhbiA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgICAgaWYgKG9iamVjdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGVVOCgweGMyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGVVOCgweGMzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlTnVtYmVyID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICBpZiAoTnVtYmVyLmlzU2FmZUludGVnZXIob2JqZWN0KSAmJiAhdGhpcy5mb3JjZUludGVnZXJUb0Zsb2F0KSB7XG4gICAgICAgICAgICBpZiAob2JqZWN0ID49IDApIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0IDwgMHg4MCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBwb3NpdGl2ZSBmaXhpbnRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZVU4KG9iamVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9iamVjdCA8IDB4MTAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHVpbnQgOFxuICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlVTgoMHhjYyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVVOChvYmplY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvYmplY3QgPCAweDEwMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHVpbnQgMTZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZVU4KDB4Y2QpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlVTE2KG9iamVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9iamVjdCA8IDB4MTAwMDAwMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHVpbnQgMzJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZVU4KDB4Y2UpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlVTMyKG9iamVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyB1aW50IDY0XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVVOCgweGNmKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZVU2NChvYmplY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChvYmplY3QgPj0gLTB4MjApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbmVnYXRpdmUgZml4aW50XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVVOCgweGUwIHwgKG9iamVjdCArIDB4MjApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob2JqZWN0ID49IC0weDgwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGludCA4XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVVOCgweGQwKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZUk4KG9iamVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9iamVjdCA+PSAtMHg4MDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGludCAxNlxuICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlVTgoMHhkMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVJMTYob2JqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob2JqZWN0ID49IC0weDgwMDAwMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGludCAzMlxuICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlVTgoMHhkMik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVJMzIob2JqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGludCA2NFxuICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlVTgoMHhkMyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVJNjQob2JqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBub24taW50ZWdlciBudW1iZXJzXG4gICAgICAgICAgICBpZiAodGhpcy5mb3JjZUZsb2F0MzIpIHtcbiAgICAgICAgICAgICAgICAvLyBmbG9hdCAzMlxuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVVOCgweGNhKTtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlRjMyKG9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBmbG9hdCA2NFxuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVVOCgweGNiKTtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlRjY0KG9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVuY29kZXIucHJvdG90eXBlLndyaXRlU3RyaW5nSGVhZGVyID0gZnVuY3Rpb24gKGJ5dGVMZW5ndGgpIHtcbiAgICAgICAgaWYgKGJ5dGVMZW5ndGggPCAzMikge1xuICAgICAgICAgICAgLy8gZml4c3RyXG4gICAgICAgICAgICB0aGlzLndyaXRlVTgoMHhhMCArIGJ5dGVMZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGJ5dGVMZW5ndGggPCAweDEwMCkge1xuICAgICAgICAgICAgLy8gc3RyIDhcbiAgICAgICAgICAgIHRoaXMud3JpdGVVOCgweGQ5KTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVVOChieXRlTGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChieXRlTGVuZ3RoIDwgMHgxMDAwMCkge1xuICAgICAgICAgICAgLy8gc3RyIDE2XG4gICAgICAgICAgICB0aGlzLndyaXRlVTgoMHhkYSk7XG4gICAgICAgICAgICB0aGlzLndyaXRlVTE2KGJ5dGVMZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGJ5dGVMZW5ndGggPCAweDEwMDAwMDAwMCkge1xuICAgICAgICAgICAgLy8gc3RyIDMyXG4gICAgICAgICAgICB0aGlzLndyaXRlVTgoMHhkYik7XG4gICAgICAgICAgICB0aGlzLndyaXRlVTMyKGJ5dGVMZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9vIGxvbmcgc3RyaW5nOiBcIi5jb25jYXQoYnl0ZUxlbmd0aCwgXCIgYnl0ZXMgaW4gVVRGLThcIikpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbmNvZGVyLnByb3RvdHlwZS5lbmNvZGVTdHJpbmcgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgIHZhciBtYXhIZWFkZXJTaXplID0gMSArIDQ7XG4gICAgICAgIHZhciBzdHJMZW5ndGggPSBvYmplY3QubGVuZ3RoO1xuICAgICAgICBpZiAoc3RyTGVuZ3RoID4gVEVYVF9FTkNPREVSX1RIUkVTSE9MRCkge1xuICAgICAgICAgICAgdmFyIGJ5dGVMZW5ndGggPSB1dGY4Q291bnQob2JqZWN0KTtcbiAgICAgICAgICAgIHRoaXMuZW5zdXJlQnVmZmVyU2l6ZVRvV3JpdGUobWF4SGVhZGVyU2l6ZSArIGJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgdGhpcy53cml0ZVN0cmluZ0hlYWRlcihieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgIHV0ZjhFbmNvZGVURShvYmplY3QsIHRoaXMuYnl0ZXMsIHRoaXMucG9zKTtcbiAgICAgICAgICAgIHRoaXMucG9zICs9IGJ5dGVMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgYnl0ZUxlbmd0aCA9IHV0ZjhDb3VudChvYmplY3QpO1xuICAgICAgICAgICAgdGhpcy5lbnN1cmVCdWZmZXJTaXplVG9Xcml0ZShtYXhIZWFkZXJTaXplICsgYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICB0aGlzLndyaXRlU3RyaW5nSGVhZGVyKGJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgdXRmOEVuY29kZUpzKG9iamVjdCwgdGhpcy5ieXRlcywgdGhpcy5wb3MpO1xuICAgICAgICAgICAgdGhpcy5wb3MgKz0gYnl0ZUxlbmd0aDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlT2JqZWN0ID0gZnVuY3Rpb24gKG9iamVjdCwgZGVwdGgpIHtcbiAgICAgICAgLy8gdHJ5IHRvIGVuY29kZSBvYmplY3RzIHdpdGggY3VzdG9tIGNvZGVjIGZpcnN0IG9mIG5vbi1wcmltaXRpdmVzXG4gICAgICAgIHZhciBleHQgPSB0aGlzLmV4dGVuc2lvbkNvZGVjLnRyeVRvRW5jb2RlKG9iamVjdCwgdGhpcy5jb250ZXh0KTtcbiAgICAgICAgaWYgKGV4dCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmVuY29kZUV4dGVuc2lvbihleHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkob2JqZWN0KSkge1xuICAgICAgICAgICAgdGhpcy5lbmNvZGVBcnJheShvYmplY3QsIGRlcHRoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcob2JqZWN0KSkge1xuICAgICAgICAgICAgdGhpcy5lbmNvZGVCaW5hcnkob2JqZWN0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB0aGlzLmVuY29kZU1hcChvYmplY3QsIGRlcHRoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHN5bWJvbCwgZnVuY3Rpb24gYW5kIG90aGVyIHNwZWNpYWwgb2JqZWN0IGNvbWUgaGVyZSB1bmxlc3MgZXh0ZW5zaW9uQ29kZWMgaGFuZGxlcyB0aGVtLlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIG9iamVjdDogXCIuY29uY2F0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkob2JqZWN0KSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbmNvZGVyLnByb3RvdHlwZS5lbmNvZGVCaW5hcnkgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgIHZhciBzaXplID0gb2JqZWN0LmJ5dGVMZW5ndGg7XG4gICAgICAgIGlmIChzaXplIDwgMHgxMDApIHtcbiAgICAgICAgICAgIC8vIGJpbiA4XG4gICAgICAgICAgICB0aGlzLndyaXRlVTgoMHhjNCk7XG4gICAgICAgICAgICB0aGlzLndyaXRlVTgoc2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2l6ZSA8IDB4MTAwMDApIHtcbiAgICAgICAgICAgIC8vIGJpbiAxNlxuICAgICAgICAgICAgdGhpcy53cml0ZVU4KDB4YzUpO1xuICAgICAgICAgICAgdGhpcy53cml0ZVUxNihzaXplKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzaXplIDwgMHgxMDAwMDAwMDApIHtcbiAgICAgICAgICAgIC8vIGJpbiAzMlxuICAgICAgICAgICAgdGhpcy53cml0ZVU4KDB4YzYpO1xuICAgICAgICAgICAgdGhpcy53cml0ZVUzMihzaXplKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRvbyBsYXJnZSBiaW5hcnk6IFwiLmNvbmNhdChzaXplKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJ5dGVzID0gZW5zdXJlVWludDhBcnJheShvYmplY3QpO1xuICAgICAgICB0aGlzLndyaXRlVThhKGJ5dGVzKTtcbiAgICB9O1xuICAgIEVuY29kZXIucHJvdG90eXBlLmVuY29kZUFycmF5ID0gZnVuY3Rpb24gKG9iamVjdCwgZGVwdGgpIHtcbiAgICAgICAgdmFyIHNpemUgPSBvYmplY3QubGVuZ3RoO1xuICAgICAgICBpZiAoc2l6ZSA8IDE2KSB7XG4gICAgICAgICAgICAvLyBmaXhhcnJheVxuICAgICAgICAgICAgdGhpcy53cml0ZVU4KDB4OTAgKyBzaXplKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzaXplIDwgMHgxMDAwMCkge1xuICAgICAgICAgICAgLy8gYXJyYXkgMTZcbiAgICAgICAgICAgIHRoaXMud3JpdGVVOCgweGRjKTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVVMTYoc2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2l6ZSA8IDB4MTAwMDAwMDAwKSB7XG4gICAgICAgICAgICAvLyBhcnJheSAzMlxuICAgICAgICAgICAgdGhpcy53cml0ZVU4KDB4ZGQpO1xuICAgICAgICAgICAgdGhpcy53cml0ZVUzMihzaXplKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRvbyBsYXJnZSBhcnJheTogXCIuY29uY2F0KHNpemUpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG9iamVjdF8xID0gb2JqZWN0OyBfaSA8IG9iamVjdF8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBvYmplY3RfMVtfaV07XG4gICAgICAgICAgICB0aGlzLmRvRW5jb2RlKGl0ZW0sIGRlcHRoICsgMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVuY29kZXIucHJvdG90eXBlLmNvdW50V2l0aG91dFVuZGVmaW5lZCA9IGZ1bmN0aW9uIChvYmplY3QsIGtleXMpIHtcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBrZXlzXzEgPSBrZXlzOyBfaSA8IGtleXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzXzFbX2ldO1xuICAgICAgICAgICAgaWYgKG9iamVjdFtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9O1xuICAgIEVuY29kZXIucHJvdG90eXBlLmVuY29kZU1hcCA9IGZ1bmN0aW9uIChvYmplY3QsIGRlcHRoKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcbiAgICAgICAgaWYgKHRoaXMuc29ydEtleXMpIHtcbiAgICAgICAgICAgIGtleXMuc29ydCgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5pZ25vcmVVbmRlZmluZWQgPyB0aGlzLmNvdW50V2l0aG91dFVuZGVmaW5lZChvYmplY3QsIGtleXMpIDoga2V5cy5sZW5ndGg7XG4gICAgICAgIGlmIChzaXplIDwgMTYpIHtcbiAgICAgICAgICAgIC8vIGZpeG1hcFxuICAgICAgICAgICAgdGhpcy53cml0ZVU4KDB4ODAgKyBzaXplKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzaXplIDwgMHgxMDAwMCkge1xuICAgICAgICAgICAgLy8gbWFwIDE2XG4gICAgICAgICAgICB0aGlzLndyaXRlVTgoMHhkZSk7XG4gICAgICAgICAgICB0aGlzLndyaXRlVTE2KHNpemUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNpemUgPCAweDEwMDAwMDAwMCkge1xuICAgICAgICAgICAgLy8gbWFwIDMyXG4gICAgICAgICAgICB0aGlzLndyaXRlVTgoMHhkZik7XG4gICAgICAgICAgICB0aGlzLndyaXRlVTMyKHNpemUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9vIGxhcmdlIG1hcCBvYmplY3Q6IFwiLmNvbmNhdChzaXplKSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBrZXlzXzIgPSBrZXlzOyBfaSA8IGtleXNfMi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzXzJbX2ldO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gb2JqZWN0W2tleV07XG4gICAgICAgICAgICBpZiAoISh0aGlzLmlnbm9yZVVuZGVmaW5lZCAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5jb2RlU3RyaW5nKGtleSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kb0VuY29kZSh2YWx1ZSwgZGVwdGggKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgRW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlRXh0ZW5zaW9uID0gZnVuY3Rpb24gKGV4dCkge1xuICAgICAgICB2YXIgc2l6ZSA9IGV4dC5kYXRhLmxlbmd0aDtcbiAgICAgICAgaWYgKHNpemUgPT09IDEpIHtcbiAgICAgICAgICAgIC8vIGZpeGV4dCAxXG4gICAgICAgICAgICB0aGlzLndyaXRlVTgoMHhkNCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2l6ZSA9PT0gMikge1xuICAgICAgICAgICAgLy8gZml4ZXh0IDJcbiAgICAgICAgICAgIHRoaXMud3JpdGVVOCgweGQ1KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzaXplID09PSA0KSB7XG4gICAgICAgICAgICAvLyBmaXhleHQgNFxuICAgICAgICAgICAgdGhpcy53cml0ZVU4KDB4ZDYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNpemUgPT09IDgpIHtcbiAgICAgICAgICAgIC8vIGZpeGV4dCA4XG4gICAgICAgICAgICB0aGlzLndyaXRlVTgoMHhkNyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2l6ZSA9PT0gMTYpIHtcbiAgICAgICAgICAgIC8vIGZpeGV4dCAxNlxuICAgICAgICAgICAgdGhpcy53cml0ZVU4KDB4ZDgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNpemUgPCAweDEwMCkge1xuICAgICAgICAgICAgLy8gZXh0IDhcbiAgICAgICAgICAgIHRoaXMud3JpdGVVOCgweGM3KTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVVOChzaXplKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzaXplIDwgMHgxMDAwMCkge1xuICAgICAgICAgICAgLy8gZXh0IDE2XG4gICAgICAgICAgICB0aGlzLndyaXRlVTgoMHhjOCk7XG4gICAgICAgICAgICB0aGlzLndyaXRlVTE2KHNpemUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNpemUgPCAweDEwMDAwMDAwMCkge1xuICAgICAgICAgICAgLy8gZXh0IDMyXG4gICAgICAgICAgICB0aGlzLndyaXRlVTgoMHhjOSk7XG4gICAgICAgICAgICB0aGlzLndyaXRlVTMyKHNpemUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9vIGxhcmdlIGV4dGVuc2lvbiBvYmplY3Q6IFwiLmNvbmNhdChzaXplKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53cml0ZUk4KGV4dC50eXBlKTtcbiAgICAgICAgdGhpcy53cml0ZVU4YShleHQuZGF0YSk7XG4gICAgfTtcbiAgICBFbmNvZGVyLnByb3RvdHlwZS53cml0ZVU4ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZW5zdXJlQnVmZmVyU2l6ZVRvV3JpdGUoMSk7XG4gICAgICAgIHRoaXMudmlldy5zZXRVaW50OCh0aGlzLnBvcywgdmFsdWUpO1xuICAgICAgICB0aGlzLnBvcysrO1xuICAgIH07XG4gICAgRW5jb2Rlci5wcm90b3R5cGUud3JpdGVVOGEgPSBmdW5jdGlvbiAodmFsdWVzKSB7XG4gICAgICAgIHZhciBzaXplID0gdmFsdWVzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5lbnN1cmVCdWZmZXJTaXplVG9Xcml0ZShzaXplKTtcbiAgICAgICAgdGhpcy5ieXRlcy5zZXQodmFsdWVzLCB0aGlzLnBvcyk7XG4gICAgICAgIHRoaXMucG9zICs9IHNpemU7XG4gICAgfTtcbiAgICBFbmNvZGVyLnByb3RvdHlwZS53cml0ZUk4ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZW5zdXJlQnVmZmVyU2l6ZVRvV3JpdGUoMSk7XG4gICAgICAgIHRoaXMudmlldy5zZXRJbnQ4KHRoaXMucG9zLCB2YWx1ZSk7XG4gICAgICAgIHRoaXMucG9zKys7XG4gICAgfTtcbiAgICBFbmNvZGVyLnByb3RvdHlwZS53cml0ZVUxNiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmVuc3VyZUJ1ZmZlclNpemVUb1dyaXRlKDIpO1xuICAgICAgICB0aGlzLnZpZXcuc2V0VWludDE2KHRoaXMucG9zLCB2YWx1ZSk7XG4gICAgICAgIHRoaXMucG9zICs9IDI7XG4gICAgfTtcbiAgICBFbmNvZGVyLnByb3RvdHlwZS53cml0ZUkxNiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmVuc3VyZUJ1ZmZlclNpemVUb1dyaXRlKDIpO1xuICAgICAgICB0aGlzLnZpZXcuc2V0SW50MTYodGhpcy5wb3MsIHZhbHVlKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gMjtcbiAgICB9O1xuICAgIEVuY29kZXIucHJvdG90eXBlLndyaXRlVTMyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZW5zdXJlQnVmZmVyU2l6ZVRvV3JpdGUoNCk7XG4gICAgICAgIHRoaXMudmlldy5zZXRVaW50MzIodGhpcy5wb3MsIHZhbHVlKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gNDtcbiAgICB9O1xuICAgIEVuY29kZXIucHJvdG90eXBlLndyaXRlSTMyID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZW5zdXJlQnVmZmVyU2l6ZVRvV3JpdGUoNCk7XG4gICAgICAgIHRoaXMudmlldy5zZXRJbnQzMih0aGlzLnBvcywgdmFsdWUpO1xuICAgICAgICB0aGlzLnBvcyArPSA0O1xuICAgIH07XG4gICAgRW5jb2Rlci5wcm90b3R5cGUud3JpdGVGMzIgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVCdWZmZXJTaXplVG9Xcml0ZSg0KTtcbiAgICAgICAgdGhpcy52aWV3LnNldEZsb2F0MzIodGhpcy5wb3MsIHZhbHVlKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gNDtcbiAgICB9O1xuICAgIEVuY29kZXIucHJvdG90eXBlLndyaXRlRjY0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZW5zdXJlQnVmZmVyU2l6ZVRvV3JpdGUoOCk7XG4gICAgICAgIHRoaXMudmlldy5zZXRGbG9hdDY0KHRoaXMucG9zLCB2YWx1ZSk7XG4gICAgICAgIHRoaXMucG9zICs9IDg7XG4gICAgfTtcbiAgICBFbmNvZGVyLnByb3RvdHlwZS53cml0ZVU2NCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmVuc3VyZUJ1ZmZlclNpemVUb1dyaXRlKDgpO1xuICAgICAgICBzZXRVaW50NjQodGhpcy52aWV3LCB0aGlzLnBvcywgdmFsdWUpO1xuICAgICAgICB0aGlzLnBvcyArPSA4O1xuICAgIH07XG4gICAgRW5jb2Rlci5wcm90b3R5cGUud3JpdGVJNjQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVCdWZmZXJTaXplVG9Xcml0ZSg4KTtcbiAgICAgICAgc2V0SW50NjQodGhpcy52aWV3LCB0aGlzLnBvcywgdmFsdWUpO1xuICAgICAgICB0aGlzLnBvcyArPSA4O1xuICAgIH07XG4gICAgcmV0dXJuIEVuY29kZXI7XG59KCkpO1xuZXhwb3J0IHsgRW5jb2RlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RW5jb2Rlci5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@msgpack/msgpack/dist.es5+esm/Encoder.mjs\n");

/***/ }),

/***/ "./node_modules/@msgpack/msgpack/dist.es5+esm/ExtData.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@msgpack/msgpack/dist.es5+esm/ExtData.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ExtData\": () => (/* binding */ ExtData)\n/* harmony export */ });\n/**\n * ExtData is used to handle Extension Types that are not registered to ExtensionCodec.\n */\nvar ExtData = /** @class */ (function () {\n    function ExtData(type, data) {\n        this.type = type;\n        this.data = data;\n    }\n    return ExtData;\n}());\n\n//# sourceMappingURL=ExtData.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vRXh0RGF0YS5tanMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDa0I7QUFDbkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yMDIxMDExMV93ZWJjaGF0Ly4vbm9kZV9tb2R1bGVzL0Btc2dwYWNrL21zZ3BhY2svZGlzdC5lczUrZXNtL0V4dERhdGEubWpzPzU3ODIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFeHREYXRhIGlzIHVzZWQgdG8gaGFuZGxlIEV4dGVuc2lvbiBUeXBlcyB0aGF0IGFyZSBub3QgcmVnaXN0ZXJlZCB0byBFeHRlbnNpb25Db2RlYy5cbiAqL1xudmFyIEV4dERhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRXh0RGF0YSh0eXBlLCBkYXRhKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgfVxuICAgIHJldHVybiBFeHREYXRhO1xufSgpKTtcbmV4cG9ydCB7IEV4dERhdGEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV4dERhdGEubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@msgpack/msgpack/dist.es5+esm/ExtData.mjs\n");

/***/ }),

/***/ "./node_modules/@msgpack/msgpack/dist.es5+esm/ExtensionCodec.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@msgpack/msgpack/dist.es5+esm/ExtensionCodec.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ExtensionCodec\": () => (/* binding */ ExtensionCodec)\n/* harmony export */ });\n/* harmony import */ var _ExtData_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ExtData.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/ExtData.mjs\");\n/* harmony import */ var _timestamp_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timestamp.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/timestamp.mjs\");\n// ExtensionCodec to handle MessagePack extensions\n\n\nvar ExtensionCodec = /** @class */ (function () {\n    function ExtensionCodec() {\n        // built-in extensions\n        this.builtInEncoders = [];\n        this.builtInDecoders = [];\n        // custom extensions\n        this.encoders = [];\n        this.decoders = [];\n        this.register(_timestamp_mjs__WEBPACK_IMPORTED_MODULE_0__.timestampExtension);\n    }\n    ExtensionCodec.prototype.register = function (_a) {\n        var type = _a.type, encode = _a.encode, decode = _a.decode;\n        if (type >= 0) {\n            // custom extensions\n            this.encoders[type] = encode;\n            this.decoders[type] = decode;\n        }\n        else {\n            // built-in extensions\n            var index = 1 + type;\n            this.builtInEncoders[index] = encode;\n            this.builtInDecoders[index] = decode;\n        }\n    };\n    ExtensionCodec.prototype.tryToEncode = function (object, context) {\n        // built-in extensions\n        for (var i = 0; i < this.builtInEncoders.length; i++) {\n            var encodeExt = this.builtInEncoders[i];\n            if (encodeExt != null) {\n                var data = encodeExt(object, context);\n                if (data != null) {\n                    var type = -1 - i;\n                    return new _ExtData_mjs__WEBPACK_IMPORTED_MODULE_1__.ExtData(type, data);\n                }\n            }\n        }\n        // custom extensions\n        for (var i = 0; i < this.encoders.length; i++) {\n            var encodeExt = this.encoders[i];\n            if (encodeExt != null) {\n                var data = encodeExt(object, context);\n                if (data != null) {\n                    var type = i;\n                    return new _ExtData_mjs__WEBPACK_IMPORTED_MODULE_1__.ExtData(type, data);\n                }\n            }\n        }\n        if (object instanceof _ExtData_mjs__WEBPACK_IMPORTED_MODULE_1__.ExtData) {\n            // to keep ExtData as is\n            return object;\n        }\n        return null;\n    };\n    ExtensionCodec.prototype.decode = function (data, type, context) {\n        var decodeExt = type < 0 ? this.builtInDecoders[-1 - type] : this.decoders[type];\n        if (decodeExt) {\n            return decodeExt(data, type, context);\n        }\n        else {\n            // decode() does not fail, returns ExtData instead.\n            return new _ExtData_mjs__WEBPACK_IMPORTED_MODULE_1__.ExtData(type, data);\n        }\n    };\n    ExtensionCodec.defaultCodec = new ExtensionCodec();\n    return ExtensionCodec;\n}());\n\n//# sourceMappingURL=ExtensionCodec.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vRXh0ZW5zaW9uQ29kZWMubWpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ3dDO0FBQ2E7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw4REFBa0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpQ0FBaUM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixpREFBTztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwwQkFBMEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixpREFBTztBQUN0QztBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsaURBQU87QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGlEQUFPO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUN5QjtBQUMxQiIsInNvdXJjZXMiOlsid2VicGFjazovLzIwMjEwMTExX3dlYmNoYXQvLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vRXh0ZW5zaW9uQ29kZWMubWpzP2I4N2MiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRXh0ZW5zaW9uQ29kZWMgdG8gaGFuZGxlIE1lc3NhZ2VQYWNrIGV4dGVuc2lvbnNcbmltcG9ydCB7IEV4dERhdGEgfSBmcm9tIFwiLi9FeHREYXRhLm1qc1wiO1xuaW1wb3J0IHsgdGltZXN0YW1wRXh0ZW5zaW9uIH0gZnJvbSBcIi4vdGltZXN0YW1wLm1qc1wiO1xudmFyIEV4dGVuc2lvbkNvZGVjID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEV4dGVuc2lvbkNvZGVjKCkge1xuICAgICAgICAvLyBidWlsdC1pbiBleHRlbnNpb25zXG4gICAgICAgIHRoaXMuYnVpbHRJbkVuY29kZXJzID0gW107XG4gICAgICAgIHRoaXMuYnVpbHRJbkRlY29kZXJzID0gW107XG4gICAgICAgIC8vIGN1c3RvbSBleHRlbnNpb25zXG4gICAgICAgIHRoaXMuZW5jb2RlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5kZWNvZGVycyA9IFtdO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyKHRpbWVzdGFtcEV4dGVuc2lvbik7XG4gICAgfVxuICAgIEV4dGVuc2lvbkNvZGVjLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgdHlwZSA9IF9hLnR5cGUsIGVuY29kZSA9IF9hLmVuY29kZSwgZGVjb2RlID0gX2EuZGVjb2RlO1xuICAgICAgICBpZiAodHlwZSA+PSAwKSB7XG4gICAgICAgICAgICAvLyBjdXN0b20gZXh0ZW5zaW9uc1xuICAgICAgICAgICAgdGhpcy5lbmNvZGVyc1t0eXBlXSA9IGVuY29kZTtcbiAgICAgICAgICAgIHRoaXMuZGVjb2RlcnNbdHlwZV0gPSBkZWNvZGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBidWlsdC1pbiBleHRlbnNpb25zXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAxICsgdHlwZTtcbiAgICAgICAgICAgIHRoaXMuYnVpbHRJbkVuY29kZXJzW2luZGV4XSA9IGVuY29kZTtcbiAgICAgICAgICAgIHRoaXMuYnVpbHRJbkRlY29kZXJzW2luZGV4XSA9IGRlY29kZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRXh0ZW5zaW9uQ29kZWMucHJvdG90eXBlLnRyeVRvRW5jb2RlID0gZnVuY3Rpb24gKG9iamVjdCwgY29udGV4dCkge1xuICAgICAgICAvLyBidWlsdC1pbiBleHRlbnNpb25zXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5idWlsdEluRW5jb2RlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBlbmNvZGVFeHQgPSB0aGlzLmJ1aWx0SW5FbmNvZGVyc1tpXTtcbiAgICAgICAgICAgIGlmIChlbmNvZGVFeHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZW5jb2RlRXh0KG9iamVjdCwgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IC0xIC0gaTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFeHREYXRhKHR5cGUsIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBjdXN0b20gZXh0ZW5zaW9uc1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZW5jb2RlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBlbmNvZGVFeHQgPSB0aGlzLmVuY29kZXJzW2ldO1xuICAgICAgICAgICAgaWYgKGVuY29kZUV4dCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBlbmNvZGVFeHQob2JqZWN0LCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0eXBlID0gaTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFeHREYXRhKHR5cGUsIGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgRXh0RGF0YSkge1xuICAgICAgICAgICAgLy8gdG8ga2VlcCBFeHREYXRhIGFzIGlzXG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgRXh0ZW5zaW9uQ29kZWMucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChkYXRhLCB0eXBlLCBjb250ZXh0KSB7XG4gICAgICAgIHZhciBkZWNvZGVFeHQgPSB0eXBlIDwgMCA/IHRoaXMuYnVpbHRJbkRlY29kZXJzWy0xIC0gdHlwZV0gOiB0aGlzLmRlY29kZXJzW3R5cGVdO1xuICAgICAgICBpZiAoZGVjb2RlRXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gZGVjb2RlRXh0KGRhdGEsIHR5cGUsIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZGVjb2RlKCkgZG9lcyBub3QgZmFpbCwgcmV0dXJucyBFeHREYXRhIGluc3RlYWQuXG4gICAgICAgICAgICByZXR1cm4gbmV3IEV4dERhdGEodHlwZSwgZGF0YSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEV4dGVuc2lvbkNvZGVjLmRlZmF1bHRDb2RlYyA9IG5ldyBFeHRlbnNpb25Db2RlYygpO1xuICAgIHJldHVybiBFeHRlbnNpb25Db2RlYztcbn0oKSk7XG5leHBvcnQgeyBFeHRlbnNpb25Db2RlYyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXh0ZW5zaW9uQ29kZWMubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@msgpack/msgpack/dist.es5+esm/ExtensionCodec.mjs\n");

/***/ }),

/***/ "./node_modules/@msgpack/msgpack/dist.es5+esm/decode.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/@msgpack/msgpack/dist.es5+esm/decode.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"decode\": () => (/* binding */ decode),\n/* harmony export */   \"decodeMulti\": () => (/* binding */ decodeMulti),\n/* harmony export */   \"defaultDecodeOptions\": () => (/* binding */ defaultDecodeOptions)\n/* harmony export */ });\n/* harmony import */ var _Decoder_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Decoder.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/Decoder.mjs\");\n\nvar defaultDecodeOptions = {};\n/**\n * It decodes a single MessagePack object in a buffer.\n *\n * This is a synchronous decoding function.\n * See other variants for asynchronous decoding: {@link decodeAsync()}, {@link decodeStream()}, or {@link decodeArrayStream()}.\n */\nfunction decode(buffer, options) {\n    if (options === void 0) { options = defaultDecodeOptions; }\n    var decoder = new _Decoder_mjs__WEBPACK_IMPORTED_MODULE_0__.Decoder(options.extensionCodec, options.context, options.maxStrLength, options.maxBinLength, options.maxArrayLength, options.maxMapLength, options.maxExtLength);\n    return decoder.decode(buffer);\n}\n/**\n * It decodes multiple MessagePack objects in a buffer.\n * This is corresponding to {@link decodeMultiStream()}.\n */\nfunction decodeMulti(buffer, options) {\n    if (options === void 0) { options = defaultDecodeOptions; }\n    var decoder = new _Decoder_mjs__WEBPACK_IMPORTED_MODULE_0__.Decoder(options.extensionCodec, options.context, options.maxStrLength, options.maxBinLength, options.maxArrayLength, options.maxMapLength, options.maxExtLength);\n    return decoder.decodeMulti(buffer);\n}\n//# sourceMappingURL=decode.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vZGVjb2RlLm1qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdDO0FBQ2pDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Qsb0JBQW9CLEdBQUcscUJBQXFCLE1BQU0sMEJBQTBCO0FBQzlIO0FBQ087QUFDUCw4QkFBOEI7QUFDOUIsc0JBQXNCLGlEQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDBCQUEwQjtBQUN2RDtBQUNPO0FBQ1AsOEJBQThCO0FBQzlCLHNCQUFzQixpREFBTztBQUM3QjtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yMDIxMDExMV93ZWJjaGF0Ly4vbm9kZV9tb2R1bGVzL0Btc2dwYWNrL21zZ3BhY2svZGlzdC5lczUrZXNtL2RlY29kZS5tanM/MTI3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWNvZGVyIH0gZnJvbSBcIi4vRGVjb2Rlci5tanNcIjtcbmV4cG9ydCB2YXIgZGVmYXVsdERlY29kZU9wdGlvbnMgPSB7fTtcbi8qKlxuICogSXQgZGVjb2RlcyBhIHNpbmdsZSBNZXNzYWdlUGFjayBvYmplY3QgaW4gYSBidWZmZXIuXG4gKlxuICogVGhpcyBpcyBhIHN5bmNocm9ub3VzIGRlY29kaW5nIGZ1bmN0aW9uLlxuICogU2VlIG90aGVyIHZhcmlhbnRzIGZvciBhc3luY2hyb25vdXMgZGVjb2Rpbmc6IHtAbGluayBkZWNvZGVBc3luYygpfSwge0BsaW5rIGRlY29kZVN0cmVhbSgpfSwgb3Ige0BsaW5rIGRlY29kZUFycmF5U3RyZWFtKCl9LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlKGJ1ZmZlciwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IGRlZmF1bHREZWNvZGVPcHRpb25zOyB9XG4gICAgdmFyIGRlY29kZXIgPSBuZXcgRGVjb2RlcihvcHRpb25zLmV4dGVuc2lvbkNvZGVjLCBvcHRpb25zLmNvbnRleHQsIG9wdGlvbnMubWF4U3RyTGVuZ3RoLCBvcHRpb25zLm1heEJpbkxlbmd0aCwgb3B0aW9ucy5tYXhBcnJheUxlbmd0aCwgb3B0aW9ucy5tYXhNYXBMZW5ndGgsIG9wdGlvbnMubWF4RXh0TGVuZ3RoKTtcbiAgICByZXR1cm4gZGVjb2Rlci5kZWNvZGUoYnVmZmVyKTtcbn1cbi8qKlxuICogSXQgZGVjb2RlcyBtdWx0aXBsZSBNZXNzYWdlUGFjayBvYmplY3RzIGluIGEgYnVmZmVyLlxuICogVGhpcyBpcyBjb3JyZXNwb25kaW5nIHRvIHtAbGluayBkZWNvZGVNdWx0aVN0cmVhbSgpfS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZU11bHRpKGJ1ZmZlciwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IGRlZmF1bHREZWNvZGVPcHRpb25zOyB9XG4gICAgdmFyIGRlY29kZXIgPSBuZXcgRGVjb2RlcihvcHRpb25zLmV4dGVuc2lvbkNvZGVjLCBvcHRpb25zLmNvbnRleHQsIG9wdGlvbnMubWF4U3RyTGVuZ3RoLCBvcHRpb25zLm1heEJpbkxlbmd0aCwgb3B0aW9ucy5tYXhBcnJheUxlbmd0aCwgb3B0aW9ucy5tYXhNYXBMZW5ndGgsIG9wdGlvbnMubWF4RXh0TGVuZ3RoKTtcbiAgICByZXR1cm4gZGVjb2Rlci5kZWNvZGVNdWx0aShidWZmZXIpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVjb2RlLm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@msgpack/msgpack/dist.es5+esm/decode.mjs\n");

/***/ }),

/***/ "./node_modules/@msgpack/msgpack/dist.es5+esm/encode.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/@msgpack/msgpack/dist.es5+esm/encode.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"encode\": () => (/* binding */ encode)\n/* harmony export */ });\n/* harmony import */ var _Encoder_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Encoder.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/Encoder.mjs\");\n\nvar defaultEncodeOptions = {};\n/**\n * It encodes `value` in the MessagePack format and\n * returns a byte buffer.\n *\n * The returned buffer is a slice of a larger `ArrayBuffer`, so you have to use its `#byteOffset` and `#byteLength` in order to convert it to another typed arrays including NodeJS `Buffer`.\n */\nfunction encode(value, options) {\n    if (options === void 0) { options = defaultEncodeOptions; }\n    var encoder = new _Encoder_mjs__WEBPACK_IMPORTED_MODULE_0__.Encoder(options.extensionCodec, options.context, options.maxDepth, options.initialBufferSize, options.sortKeys, options.forceFloat32, options.ignoreUndefined, options.forceIntegerToFloat);\n    return encoder.encode(value);\n}\n//# sourceMappingURL=encode.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vZW5jb2RlLm1qcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsOEJBQThCO0FBQzlCLHNCQUFzQixpREFBTztBQUM3QjtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yMDIxMDExMV93ZWJjaGF0Ly4vbm9kZV9tb2R1bGVzL0Btc2dwYWNrL21zZ3BhY2svZGlzdC5lczUrZXNtL2VuY29kZS5tanM/ZWEyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbmNvZGVyIH0gZnJvbSBcIi4vRW5jb2Rlci5tanNcIjtcbnZhciBkZWZhdWx0RW5jb2RlT3B0aW9ucyA9IHt9O1xuLyoqXG4gKiBJdCBlbmNvZGVzIGB2YWx1ZWAgaW4gdGhlIE1lc3NhZ2VQYWNrIGZvcm1hdCBhbmRcbiAqIHJldHVybnMgYSBieXRlIGJ1ZmZlci5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgYnVmZmVyIGlzIGEgc2xpY2Ugb2YgYSBsYXJnZXIgYEFycmF5QnVmZmVyYCwgc28geW91IGhhdmUgdG8gdXNlIGl0cyBgI2J5dGVPZmZzZXRgIGFuZCBgI2J5dGVMZW5ndGhgIGluIG9yZGVyIHRvIGNvbnZlcnQgaXQgdG8gYW5vdGhlciB0eXBlZCBhcnJheXMgaW5jbHVkaW5nIE5vZGVKUyBgQnVmZmVyYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZSh2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IGRlZmF1bHRFbmNvZGVPcHRpb25zOyB9XG4gICAgdmFyIGVuY29kZXIgPSBuZXcgRW5jb2RlcihvcHRpb25zLmV4dGVuc2lvbkNvZGVjLCBvcHRpb25zLmNvbnRleHQsIG9wdGlvbnMubWF4RGVwdGgsIG9wdGlvbnMuaW5pdGlhbEJ1ZmZlclNpemUsIG9wdGlvbnMuc29ydEtleXMsIG9wdGlvbnMuZm9yY2VGbG9hdDMyLCBvcHRpb25zLmlnbm9yZVVuZGVmaW5lZCwgb3B0aW9ucy5mb3JjZUludGVnZXJUb0Zsb2F0KTtcbiAgICByZXR1cm4gZW5jb2Rlci5lbmNvZGUodmFsdWUpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW5jb2RlLm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@msgpack/msgpack/dist.es5+esm/encode.mjs\n");

/***/ }),

/***/ "./node_modules/@msgpack/msgpack/dist.es5+esm/timestamp.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@msgpack/msgpack/dist.es5+esm/timestamp.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EXT_TIMESTAMP\": () => (/* binding */ EXT_TIMESTAMP),\n/* harmony export */   \"decodeTimestampExtension\": () => (/* binding */ decodeTimestampExtension),\n/* harmony export */   \"decodeTimestampToTimeSpec\": () => (/* binding */ decodeTimestampToTimeSpec),\n/* harmony export */   \"encodeDateToTimeSpec\": () => (/* binding */ encodeDateToTimeSpec),\n/* harmony export */   \"encodeTimeSpecToTimestamp\": () => (/* binding */ encodeTimeSpecToTimestamp),\n/* harmony export */   \"encodeTimestampExtension\": () => (/* binding */ encodeTimestampExtension),\n/* harmony export */   \"timestampExtension\": () => (/* binding */ timestampExtension)\n/* harmony export */ });\n/* harmony import */ var _DecodeError_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DecodeError.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/DecodeError.mjs\");\n/* harmony import */ var _utils_int_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/int.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/utils/int.mjs\");\n// https://github.com/msgpack/msgpack/blob/master/spec.md#timestamp-extension-type\n\n\nvar EXT_TIMESTAMP = -1;\nvar TIMESTAMP32_MAX_SEC = 0x100000000 - 1; // 32-bit unsigned int\nvar TIMESTAMP64_MAX_SEC = 0x400000000 - 1; // 34-bit unsigned int\nfunction encodeTimeSpecToTimestamp(_a) {\n    var sec = _a.sec, nsec = _a.nsec;\n    if (sec >= 0 && nsec >= 0 && sec <= TIMESTAMP64_MAX_SEC) {\n        // Here sec >= 0 && nsec >= 0\n        if (nsec === 0 && sec <= TIMESTAMP32_MAX_SEC) {\n            // timestamp 32 = { sec32 (unsigned) }\n            var rv = new Uint8Array(4);\n            var view = new DataView(rv.buffer);\n            view.setUint32(0, sec);\n            return rv;\n        }\n        else {\n            // timestamp 64 = { nsec30 (unsigned), sec34 (unsigned) }\n            var secHigh = sec / 0x100000000;\n            var secLow = sec & 0xffffffff;\n            var rv = new Uint8Array(8);\n            var view = new DataView(rv.buffer);\n            // nsec30 | secHigh2\n            view.setUint32(0, (nsec << 2) | (secHigh & 0x3));\n            // secLow32\n            view.setUint32(4, secLow);\n            return rv;\n        }\n    }\n    else {\n        // timestamp 96 = { nsec32 (unsigned), sec64 (signed) }\n        var rv = new Uint8Array(12);\n        var view = new DataView(rv.buffer);\n        view.setUint32(0, nsec);\n        (0,_utils_int_mjs__WEBPACK_IMPORTED_MODULE_0__.setInt64)(view, 4, sec);\n        return rv;\n    }\n}\nfunction encodeDateToTimeSpec(date) {\n    var msec = date.getTime();\n    var sec = Math.floor(msec / 1e3);\n    var nsec = (msec - sec * 1e3) * 1e6;\n    // Normalizes { sec, nsec } to ensure nsec is unsigned.\n    var nsecInSec = Math.floor(nsec / 1e9);\n    return {\n        sec: sec + nsecInSec,\n        nsec: nsec - nsecInSec * 1e9,\n    };\n}\nfunction encodeTimestampExtension(object) {\n    if (object instanceof Date) {\n        var timeSpec = encodeDateToTimeSpec(object);\n        return encodeTimeSpecToTimestamp(timeSpec);\n    }\n    else {\n        return null;\n    }\n}\nfunction decodeTimestampToTimeSpec(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\n    // data may be 32, 64, or 96 bits\n    switch (data.byteLength) {\n        case 4: {\n            // timestamp 32 = { sec32 }\n            var sec = view.getUint32(0);\n            var nsec = 0;\n            return { sec: sec, nsec: nsec };\n        }\n        case 8: {\n            // timestamp 64 = { nsec30, sec34 }\n            var nsec30AndSecHigh2 = view.getUint32(0);\n            var secLow32 = view.getUint32(4);\n            var sec = (nsec30AndSecHigh2 & 0x3) * 0x100000000 + secLow32;\n            var nsec = nsec30AndSecHigh2 >>> 2;\n            return { sec: sec, nsec: nsec };\n        }\n        case 12: {\n            // timestamp 96 = { nsec32 (unsigned), sec64 (signed) }\n            var sec = (0,_utils_int_mjs__WEBPACK_IMPORTED_MODULE_0__.getInt64)(view, 4);\n            var nsec = view.getUint32(0);\n            return { sec: sec, nsec: nsec };\n        }\n        default:\n            throw new _DecodeError_mjs__WEBPACK_IMPORTED_MODULE_1__.DecodeError(\"Unrecognized data size for timestamp (expected 4, 8, or 12): \".concat(data.length));\n    }\n}\nfunction decodeTimestampExtension(data) {\n    var timeSpec = decodeTimestampToTimeSpec(data);\n    return new Date(timeSpec.sec * 1e3 + timeSpec.nsec / 1e6);\n}\nvar timestampExtension = {\n    type: EXT_TIMESTAMP,\n    encode: encodeTimestampExtension,\n    decode: decodeTimestampExtension,\n};\n//# sourceMappingURL=timestamp.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vdGltZXN0YW1wLm1qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTtBQUNnRDtBQUNLO0FBQzlDO0FBQ1AsMkNBQTJDO0FBQzNDLDJDQUEyQztBQUNwQztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsUUFBUSx3REFBUTtBQUNoQjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixZQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEMsc0JBQXNCLHdEQUFRO0FBQzlCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxzQkFBc0IseURBQVc7QUFDakM7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vMjAyMTAxMTFfd2ViY2hhdC8uL25vZGVfbW9kdWxlcy9AbXNncGFjay9tc2dwYWNrL2Rpc3QuZXM1K2VzbS90aW1lc3RhbXAubWpzP2ZjZWMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaHR0cHM6Ly9naXRodWIuY29tL21zZ3BhY2svbXNncGFjay9ibG9iL21hc3Rlci9zcGVjLm1kI3RpbWVzdGFtcC1leHRlbnNpb24tdHlwZVxuaW1wb3J0IHsgRGVjb2RlRXJyb3IgfSBmcm9tIFwiLi9EZWNvZGVFcnJvci5tanNcIjtcbmltcG9ydCB7IGdldEludDY0LCBzZXRJbnQ2NCB9IGZyb20gXCIuL3V0aWxzL2ludC5tanNcIjtcbmV4cG9ydCB2YXIgRVhUX1RJTUVTVEFNUCA9IC0xO1xudmFyIFRJTUVTVEFNUDMyX01BWF9TRUMgPSAweDEwMDAwMDAwMCAtIDE7IC8vIDMyLWJpdCB1bnNpZ25lZCBpbnRcbnZhciBUSU1FU1RBTVA2NF9NQVhfU0VDID0gMHg0MDAwMDAwMDAgLSAxOyAvLyAzNC1iaXQgdW5zaWduZWQgaW50XG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlVGltZVNwZWNUb1RpbWVzdGFtcChfYSkge1xuICAgIHZhciBzZWMgPSBfYS5zZWMsIG5zZWMgPSBfYS5uc2VjO1xuICAgIGlmIChzZWMgPj0gMCAmJiBuc2VjID49IDAgJiYgc2VjIDw9IFRJTUVTVEFNUDY0X01BWF9TRUMpIHtcbiAgICAgICAgLy8gSGVyZSBzZWMgPj0gMCAmJiBuc2VjID49IDBcbiAgICAgICAgaWYgKG5zZWMgPT09IDAgJiYgc2VjIDw9IFRJTUVTVEFNUDMyX01BWF9TRUMpIHtcbiAgICAgICAgICAgIC8vIHRpbWVzdGFtcCAzMiA9IHsgc2VjMzIgKHVuc2lnbmVkKSB9XG4gICAgICAgICAgICB2YXIgcnYgPSBuZXcgVWludDhBcnJheSg0KTtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KHJ2LmJ1ZmZlcik7XG4gICAgICAgICAgICB2aWV3LnNldFVpbnQzMigwLCBzZWMpO1xuICAgICAgICAgICAgcmV0dXJuIHJ2O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdGltZXN0YW1wIDY0ID0geyBuc2VjMzAgKHVuc2lnbmVkKSwgc2VjMzQgKHVuc2lnbmVkKSB9XG4gICAgICAgICAgICB2YXIgc2VjSGlnaCA9IHNlYyAvIDB4MTAwMDAwMDAwO1xuICAgICAgICAgICAgdmFyIHNlY0xvdyA9IHNlYyAmIDB4ZmZmZmZmZmY7XG4gICAgICAgICAgICB2YXIgcnYgPSBuZXcgVWludDhBcnJheSg4KTtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KHJ2LmJ1ZmZlcik7XG4gICAgICAgICAgICAvLyBuc2VjMzAgfCBzZWNIaWdoMlxuICAgICAgICAgICAgdmlldy5zZXRVaW50MzIoMCwgKG5zZWMgPDwgMikgfCAoc2VjSGlnaCAmIDB4MykpO1xuICAgICAgICAgICAgLy8gc2VjTG93MzJcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDMyKDQsIHNlY0xvdyk7XG4gICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIHRpbWVzdGFtcCA5NiA9IHsgbnNlYzMyICh1bnNpZ25lZCksIHNlYzY0IChzaWduZWQpIH1cbiAgICAgICAgdmFyIHJ2ID0gbmV3IFVpbnQ4QXJyYXkoMTIpO1xuICAgICAgICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhydi5idWZmZXIpO1xuICAgICAgICB2aWV3LnNldFVpbnQzMigwLCBuc2VjKTtcbiAgICAgICAgc2V0SW50NjQodmlldywgNCwgc2VjKTtcbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGVEYXRlVG9UaW1lU3BlYyhkYXRlKSB7XG4gICAgdmFyIG1zZWMgPSBkYXRlLmdldFRpbWUoKTtcbiAgICB2YXIgc2VjID0gTWF0aC5mbG9vcihtc2VjIC8gMWUzKTtcbiAgICB2YXIgbnNlYyA9IChtc2VjIC0gc2VjICogMWUzKSAqIDFlNjtcbiAgICAvLyBOb3JtYWxpemVzIHsgc2VjLCBuc2VjIH0gdG8gZW5zdXJlIG5zZWMgaXMgdW5zaWduZWQuXG4gICAgdmFyIG5zZWNJblNlYyA9IE1hdGguZmxvb3IobnNlYyAvIDFlOSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2VjOiBzZWMgKyBuc2VjSW5TZWMsXG4gICAgICAgIG5zZWM6IG5zZWMgLSBuc2VjSW5TZWMgKiAxZTksXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGVUaW1lc3RhbXBFeHRlbnNpb24ob2JqZWN0KSB7XG4gICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgdmFyIHRpbWVTcGVjID0gZW5jb2RlRGF0ZVRvVGltZVNwZWMob2JqZWN0KTtcbiAgICAgICAgcmV0dXJuIGVuY29kZVRpbWVTcGVjVG9UaW1lc3RhbXAodGltZVNwZWMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZVRpbWVzdGFtcFRvVGltZVNwZWMoZGF0YSkge1xuICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGRhdGEuYnVmZmVyLCBkYXRhLmJ5dGVPZmZzZXQsIGRhdGEuYnl0ZUxlbmd0aCk7XG4gICAgLy8gZGF0YSBtYXkgYmUgMzIsIDY0LCBvciA5NiBiaXRzXG4gICAgc3dpdGNoIChkYXRhLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgY2FzZSA0OiB7XG4gICAgICAgICAgICAvLyB0aW1lc3RhbXAgMzIgPSB7IHNlYzMyIH1cbiAgICAgICAgICAgIHZhciBzZWMgPSB2aWV3LmdldFVpbnQzMigwKTtcbiAgICAgICAgICAgIHZhciBuc2VjID0gMDtcbiAgICAgICAgICAgIHJldHVybiB7IHNlYzogc2VjLCBuc2VjOiBuc2VjIH07XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA4OiB7XG4gICAgICAgICAgICAvLyB0aW1lc3RhbXAgNjQgPSB7IG5zZWMzMCwgc2VjMzQgfVxuICAgICAgICAgICAgdmFyIG5zZWMzMEFuZFNlY0hpZ2gyID0gdmlldy5nZXRVaW50MzIoMCk7XG4gICAgICAgICAgICB2YXIgc2VjTG93MzIgPSB2aWV3LmdldFVpbnQzMig0KTtcbiAgICAgICAgICAgIHZhciBzZWMgPSAobnNlYzMwQW5kU2VjSGlnaDIgJiAweDMpICogMHgxMDAwMDAwMDAgKyBzZWNMb3czMjtcbiAgICAgICAgICAgIHZhciBuc2VjID0gbnNlYzMwQW5kU2VjSGlnaDIgPj4+IDI7XG4gICAgICAgICAgICByZXR1cm4geyBzZWM6IHNlYywgbnNlYzogbnNlYyB9O1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMTI6IHtcbiAgICAgICAgICAgIC8vIHRpbWVzdGFtcCA5NiA9IHsgbnNlYzMyICh1bnNpZ25lZCksIHNlYzY0IChzaWduZWQpIH1cbiAgICAgICAgICAgIHZhciBzZWMgPSBnZXRJbnQ2NCh2aWV3LCA0KTtcbiAgICAgICAgICAgIHZhciBuc2VjID0gdmlldy5nZXRVaW50MzIoMCk7XG4gICAgICAgICAgICByZXR1cm4geyBzZWM6IHNlYywgbnNlYzogbnNlYyB9O1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRGVjb2RlRXJyb3IoXCJVbnJlY29nbml6ZWQgZGF0YSBzaXplIGZvciB0aW1lc3RhbXAgKGV4cGVjdGVkIDQsIDgsIG9yIDEyKTogXCIuY29uY2F0KGRhdGEubGVuZ3RoKSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZVRpbWVzdGFtcEV4dGVuc2lvbihkYXRhKSB7XG4gICAgdmFyIHRpbWVTcGVjID0gZGVjb2RlVGltZXN0YW1wVG9UaW1lU3BlYyhkYXRhKTtcbiAgICByZXR1cm4gbmV3IERhdGUodGltZVNwZWMuc2VjICogMWUzICsgdGltZVNwZWMubnNlYyAvIDFlNik7XG59XG5leHBvcnQgdmFyIHRpbWVzdGFtcEV4dGVuc2lvbiA9IHtcbiAgICB0eXBlOiBFWFRfVElNRVNUQU1QLFxuICAgIGVuY29kZTogZW5jb2RlVGltZXN0YW1wRXh0ZW5zaW9uLFxuICAgIGRlY29kZTogZGVjb2RlVGltZXN0YW1wRXh0ZW5zaW9uLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbWVzdGFtcC5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@msgpack/msgpack/dist.es5+esm/timestamp.mjs\n");

/***/ }),

/***/ "./node_modules/@msgpack/msgpack/dist.es5+esm/utils/int.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@msgpack/msgpack/dist.es5+esm/utils/int.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"UINT32_MAX\": () => (/* binding */ UINT32_MAX),\n/* harmony export */   \"getInt64\": () => (/* binding */ getInt64),\n/* harmony export */   \"getUint64\": () => (/* binding */ getUint64),\n/* harmony export */   \"setInt64\": () => (/* binding */ setInt64),\n/* harmony export */   \"setUint64\": () => (/* binding */ setUint64)\n/* harmony export */ });\n// Integer Utility\nvar UINT32_MAX = 4294967295;\n// DataView extension to handle int64 / uint64,\n// where the actual range is 53-bits integer (a.k.a. safe integer)\nfunction setUint64(view, offset, value) {\n    var high = value / 4294967296;\n    var low = value; // high bits are truncated by DataView\n    view.setUint32(offset, high);\n    view.setUint32(offset + 4, low);\n}\nfunction setInt64(view, offset, value) {\n    var high = Math.floor(value / 4294967296);\n    var low = value; // high bits are truncated by DataView\n    view.setUint32(offset, high);\n    view.setUint32(offset + 4, low);\n}\nfunction getInt64(view, offset) {\n    var high = view.getInt32(offset);\n    var low = view.getUint32(offset + 4);\n    return high * 4294967296 + low;\n}\nfunction getUint64(view, offset) {\n    var high = view.getUint32(offset);\n    var low = view.getUint32(offset + 4);\n    return high * 4294967296 + low;\n}\n//# sourceMappingURL=int.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vdXRpbHMvaW50Lm1qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8yMDIxMDExMV93ZWJjaGF0Ly4vbm9kZV9tb2R1bGVzL0Btc2dwYWNrL21zZ3BhY2svZGlzdC5lczUrZXNtL3V0aWxzL2ludC5tanM/N2Y4YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbnRlZ2VyIFV0aWxpdHlcbmV4cG9ydCB2YXIgVUlOVDMyX01BWCA9IDQyOTQ5NjcyOTU7XG4vLyBEYXRhVmlldyBleHRlbnNpb24gdG8gaGFuZGxlIGludDY0IC8gdWludDY0LFxuLy8gd2hlcmUgdGhlIGFjdHVhbCByYW5nZSBpcyA1My1iaXRzIGludGVnZXIgKGEuay5hLiBzYWZlIGludGVnZXIpXG5leHBvcnQgZnVuY3Rpb24gc2V0VWludDY0KHZpZXcsIG9mZnNldCwgdmFsdWUpIHtcbiAgICB2YXIgaGlnaCA9IHZhbHVlIC8gNDI5NDk2NzI5NjtcbiAgICB2YXIgbG93ID0gdmFsdWU7IC8vIGhpZ2ggYml0cyBhcmUgdHJ1bmNhdGVkIGJ5IERhdGFWaWV3XG4gICAgdmlldy5zZXRVaW50MzIob2Zmc2V0LCBoaWdoKTtcbiAgICB2aWV3LnNldFVpbnQzMihvZmZzZXQgKyA0LCBsb3cpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNldEludDY0KHZpZXcsIG9mZnNldCwgdmFsdWUpIHtcbiAgICB2YXIgaGlnaCA9IE1hdGguZmxvb3IodmFsdWUgLyA0Mjk0OTY3Mjk2KTtcbiAgICB2YXIgbG93ID0gdmFsdWU7IC8vIGhpZ2ggYml0cyBhcmUgdHJ1bmNhdGVkIGJ5IERhdGFWaWV3XG4gICAgdmlldy5zZXRVaW50MzIob2Zmc2V0LCBoaWdoKTtcbiAgICB2aWV3LnNldFVpbnQzMihvZmZzZXQgKyA0LCBsb3cpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEludDY0KHZpZXcsIG9mZnNldCkge1xuICAgIHZhciBoaWdoID0gdmlldy5nZXRJbnQzMihvZmZzZXQpO1xuICAgIHZhciBsb3cgPSB2aWV3LmdldFVpbnQzMihvZmZzZXQgKyA0KTtcbiAgICByZXR1cm4gaGlnaCAqIDQyOTQ5NjcyOTYgKyBsb3c7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0VWludDY0KHZpZXcsIG9mZnNldCkge1xuICAgIHZhciBoaWdoID0gdmlldy5nZXRVaW50MzIob2Zmc2V0KTtcbiAgICB2YXIgbG93ID0gdmlldy5nZXRVaW50MzIob2Zmc2V0ICsgNCk7XG4gICAgcmV0dXJuIGhpZ2ggKiA0Mjk0OTY3Mjk2ICsgbG93O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@msgpack/msgpack/dist.es5+esm/utils/int.mjs\n");

/***/ }),

/***/ "./node_modules/@msgpack/msgpack/dist.es5+esm/utils/prettyByte.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@msgpack/msgpack/dist.es5+esm/utils/prettyByte.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"prettyByte\": () => (/* binding */ prettyByte)\n/* harmony export */ });\nfunction prettyByte(byte) {\n    return \"\".concat(byte < 0 ? \"-\" : \"\", \"0x\").concat(Math.abs(byte).toString(16).padStart(2, \"0\"));\n}\n//# sourceMappingURL=prettyByte.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vdXRpbHMvcHJldHR5Qnl0ZS5tanMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vMjAyMTAxMTFfd2ViY2hhdC8uL25vZGVfbW9kdWxlcy9AbXNncGFjay9tc2dwYWNrL2Rpc3QuZXM1K2VzbS91dGlscy9wcmV0dHlCeXRlLm1qcz9lYTQwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBwcmV0dHlCeXRlKGJ5dGUpIHtcbiAgICByZXR1cm4gXCJcIi5jb25jYXQoYnl0ZSA8IDAgPyBcIi1cIiA6IFwiXCIsIFwiMHhcIikuY29uY2F0KE1hdGguYWJzKGJ5dGUpLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCBcIjBcIikpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJldHR5Qnl0ZS5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@msgpack/msgpack/dist.es5+esm/utils/prettyByte.mjs\n");

/***/ }),

/***/ "./node_modules/@msgpack/msgpack/dist.es5+esm/utils/typedArrays.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@msgpack/msgpack/dist.es5+esm/utils/typedArrays.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createDataView\": () => (/* binding */ createDataView),\n/* harmony export */   \"ensureUint8Array\": () => (/* binding */ ensureUint8Array)\n/* harmony export */ });\nfunction ensureUint8Array(buffer) {\n    if (buffer instanceof Uint8Array) {\n        return buffer;\n    }\n    else if (ArrayBuffer.isView(buffer)) {\n        return new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength);\n    }\n    else if (buffer instanceof ArrayBuffer) {\n        return new Uint8Array(buffer);\n    }\n    else {\n        // ArrayLike<number>\n        return Uint8Array.from(buffer);\n    }\n}\nfunction createDataView(buffer) {\n    if (buffer instanceof ArrayBuffer) {\n        return new DataView(buffer);\n    }\n    var bufferView = ensureUint8Array(buffer);\n    return new DataView(bufferView.buffer, bufferView.byteOffset, bufferView.byteLength);\n}\n//# sourceMappingURL=typedArrays.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vdXRpbHMvdHlwZWRBcnJheXMubWpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLzIwMjEwMTExX3dlYmNoYXQvLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vdXRpbHMvdHlwZWRBcnJheXMubWpzPzBkMDMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZVVpbnQ4QXJyYXkoYnVmZmVyKSB7XG4gICAgaWYgKGJ1ZmZlciBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KGJ1ZmZlcikpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGJ1ZmZlci5idWZmZXIsIGJ1ZmZlci5ieXRlT2Zmc2V0LCBidWZmZXIuYnl0ZUxlbmd0aCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gQXJyYXlMaWtlPG51bWJlcj5cbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkuZnJvbShidWZmZXIpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEYXRhVmlldyhidWZmZXIpIHtcbiAgICBpZiAoYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRhVmlldyhidWZmZXIpO1xuICAgIH1cbiAgICB2YXIgYnVmZmVyVmlldyA9IGVuc3VyZVVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICByZXR1cm4gbmV3IERhdGFWaWV3KGJ1ZmZlclZpZXcuYnVmZmVyLCBidWZmZXJWaWV3LmJ5dGVPZmZzZXQsIGJ1ZmZlclZpZXcuYnl0ZUxlbmd0aCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlZEFycmF5cy5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@msgpack/msgpack/dist.es5+esm/utils/typedArrays.mjs\n");

/***/ }),

/***/ "./node_modules/@msgpack/msgpack/dist.es5+esm/utils/utf8.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@msgpack/msgpack/dist.es5+esm/utils/utf8.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TEXT_DECODER_THRESHOLD\": () => (/* binding */ TEXT_DECODER_THRESHOLD),\n/* harmony export */   \"TEXT_ENCODER_THRESHOLD\": () => (/* binding */ TEXT_ENCODER_THRESHOLD),\n/* harmony export */   \"utf8Count\": () => (/* binding */ utf8Count),\n/* harmony export */   \"utf8DecodeJs\": () => (/* binding */ utf8DecodeJs),\n/* harmony export */   \"utf8DecodeTD\": () => (/* binding */ utf8DecodeTD),\n/* harmony export */   \"utf8EncodeJs\": () => (/* binding */ utf8EncodeJs),\n/* harmony export */   \"utf8EncodeTE\": () => (/* binding */ utf8EncodeTE)\n/* harmony export */ });\n/* harmony import */ var _int_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./int.mjs */ \"./node_modules/@msgpack/msgpack/dist.es5+esm/utils/int.mjs\");\nvar _a, _b, _c;\n/* eslint-disable @typescript-eslint/no-unnecessary-condition */\n\nvar TEXT_ENCODING_AVAILABLE = (typeof process === \"undefined\" || ((_a = process === null || process === void 0 ? void 0 : process.env) === null || _a === void 0 ? void 0 : _a[\"TEXT_ENCODING\"]) !== \"never\") &&\n    typeof TextEncoder !== \"undefined\" &&\n    typeof TextDecoder !== \"undefined\";\nfunction utf8Count(str) {\n    var strLength = str.length;\n    var byteLength = 0;\n    var pos = 0;\n    while (pos < strLength) {\n        var value = str.charCodeAt(pos++);\n        if ((value & 0xffffff80) === 0) {\n            // 1-byte\n            byteLength++;\n            continue;\n        }\n        else if ((value & 0xfffff800) === 0) {\n            // 2-bytes\n            byteLength += 2;\n        }\n        else {\n            // handle surrogate pair\n            if (value >= 0xd800 && value <= 0xdbff) {\n                // high surrogate\n                if (pos < strLength) {\n                    var extra = str.charCodeAt(pos);\n                    if ((extra & 0xfc00) === 0xdc00) {\n                        ++pos;\n                        value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000;\n                    }\n                }\n            }\n            if ((value & 0xffff0000) === 0) {\n                // 3-byte\n                byteLength += 3;\n            }\n            else {\n                // 4-byte\n                byteLength += 4;\n            }\n        }\n    }\n    return byteLength;\n}\nfunction utf8EncodeJs(str, output, outputOffset) {\n    var strLength = str.length;\n    var offset = outputOffset;\n    var pos = 0;\n    while (pos < strLength) {\n        var value = str.charCodeAt(pos++);\n        if ((value & 0xffffff80) === 0) {\n            // 1-byte\n            output[offset++] = value;\n            continue;\n        }\n        else if ((value & 0xfffff800) === 0) {\n            // 2-bytes\n            output[offset++] = ((value >> 6) & 0x1f) | 0xc0;\n        }\n        else {\n            // handle surrogate pair\n            if (value >= 0xd800 && value <= 0xdbff) {\n                // high surrogate\n                if (pos < strLength) {\n                    var extra = str.charCodeAt(pos);\n                    if ((extra & 0xfc00) === 0xdc00) {\n                        ++pos;\n                        value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000;\n                    }\n                }\n            }\n            if ((value & 0xffff0000) === 0) {\n                // 3-byte\n                output[offset++] = ((value >> 12) & 0x0f) | 0xe0;\n                output[offset++] = ((value >> 6) & 0x3f) | 0x80;\n            }\n            else {\n                // 4-byte\n                output[offset++] = ((value >> 18) & 0x07) | 0xf0;\n                output[offset++] = ((value >> 12) & 0x3f) | 0x80;\n                output[offset++] = ((value >> 6) & 0x3f) | 0x80;\n            }\n        }\n        output[offset++] = (value & 0x3f) | 0x80;\n    }\n}\nvar sharedTextEncoder = TEXT_ENCODING_AVAILABLE ? new TextEncoder() : undefined;\nvar TEXT_ENCODER_THRESHOLD = !TEXT_ENCODING_AVAILABLE\n    ? _int_mjs__WEBPACK_IMPORTED_MODULE_0__.UINT32_MAX\n    : typeof process !== \"undefined\" && ((_b = process === null || process === void 0 ? void 0 : process.env) === null || _b === void 0 ? void 0 : _b[\"TEXT_ENCODING\"]) !== \"force\"\n        ? 200\n        : 0;\nfunction utf8EncodeTEencode(str, output, outputOffset) {\n    output.set(sharedTextEncoder.encode(str), outputOffset);\n}\nfunction utf8EncodeTEencodeInto(str, output, outputOffset) {\n    sharedTextEncoder.encodeInto(str, output.subarray(outputOffset));\n}\nvar utf8EncodeTE = (sharedTextEncoder === null || sharedTextEncoder === void 0 ? void 0 : sharedTextEncoder.encodeInto) ? utf8EncodeTEencodeInto : utf8EncodeTEencode;\nvar CHUNK_SIZE = 4096;\nfunction utf8DecodeJs(bytes, inputOffset, byteLength) {\n    var offset = inputOffset;\n    var end = offset + byteLength;\n    var units = [];\n    var result = \"\";\n    while (offset < end) {\n        var byte1 = bytes[offset++];\n        if ((byte1 & 0x80) === 0) {\n            // 1 byte\n            units.push(byte1);\n        }\n        else if ((byte1 & 0xe0) === 0xc0) {\n            // 2 bytes\n            var byte2 = bytes[offset++] & 0x3f;\n            units.push(((byte1 & 0x1f) << 6) | byte2);\n        }\n        else if ((byte1 & 0xf0) === 0xe0) {\n            // 3 bytes\n            var byte2 = bytes[offset++] & 0x3f;\n            var byte3 = bytes[offset++] & 0x3f;\n            units.push(((byte1 & 0x1f) << 12) | (byte2 << 6) | byte3);\n        }\n        else if ((byte1 & 0xf8) === 0xf0) {\n            // 4 bytes\n            var byte2 = bytes[offset++] & 0x3f;\n            var byte3 = bytes[offset++] & 0x3f;\n            var byte4 = bytes[offset++] & 0x3f;\n            var unit = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0c) | (byte3 << 0x06) | byte4;\n            if (unit > 0xffff) {\n                unit -= 0x10000;\n                units.push(((unit >>> 10) & 0x3ff) | 0xd800);\n                unit = 0xdc00 | (unit & 0x3ff);\n            }\n            units.push(unit);\n        }\n        else {\n            units.push(byte1);\n        }\n        if (units.length >= CHUNK_SIZE) {\n            result += String.fromCharCode.apply(String, units);\n            units.length = 0;\n        }\n    }\n    if (units.length > 0) {\n        result += String.fromCharCode.apply(String, units);\n    }\n    return result;\n}\nvar sharedTextDecoder = TEXT_ENCODING_AVAILABLE ? new TextDecoder() : null;\nvar TEXT_DECODER_THRESHOLD = !TEXT_ENCODING_AVAILABLE\n    ? _int_mjs__WEBPACK_IMPORTED_MODULE_0__.UINT32_MAX\n    : typeof process !== \"undefined\" && ((_c = process === null || process === void 0 ? void 0 : process.env) === null || _c === void 0 ? void 0 : _c[\"TEXT_DECODER\"]) !== \"force\"\n        ? 200\n        : 0;\nfunction utf8DecodeTD(bytes, inputOffset, byteLength) {\n    var stringBytes = bytes.subarray(inputOffset, inputOffset + byteLength);\n    return sharedTextDecoder.decode(stringBytes);\n}\n//# sourceMappingURL=utf8.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQG1zZ3BhY2svbXNncGFjay9kaXN0LmVzNStlc20vdXRpbHMvdXRmOC5tanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ3VDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxNQUFNLGdEQUFVO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsTUFBTSxnREFBVTtBQUNoQjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vMjAyMTAxMTFfd2ViY2hhdC8uL25vZGVfbW9kdWxlcy9AbXNncGFjay9tc2dwYWNrL2Rpc3QuZXM1K2VzbS91dGlscy91dGY4Lm1qcz8wNTNlIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfYSwgX2IsIF9jO1xuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LWNvbmRpdGlvbiAqL1xuaW1wb3J0IHsgVUlOVDMyX01BWCB9IGZyb20gXCIuL2ludC5tanNcIjtcbnZhciBURVhUX0VOQ09ESU5HX0FWQUlMQUJMRSA9ICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAoKF9hID0gcHJvY2VzcyA9PT0gbnVsbCB8fCBwcm9jZXNzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm9jZXNzLmVudikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW1wiVEVYVF9FTkNPRElOR1wiXSkgIT09IFwibmV2ZXJcIikgJiZcbiAgICB0eXBlb2YgVGV4dEVuY29kZXIgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICB0eXBlb2YgVGV4dERlY29kZXIgIT09IFwidW5kZWZpbmVkXCI7XG5leHBvcnQgZnVuY3Rpb24gdXRmOENvdW50KHN0cikge1xuICAgIHZhciBzdHJMZW5ndGggPSBzdHIubGVuZ3RoO1xuICAgIHZhciBieXRlTGVuZ3RoID0gMDtcbiAgICB2YXIgcG9zID0gMDtcbiAgICB3aGlsZSAocG9zIDwgc3RyTGVuZ3RoKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHN0ci5jaGFyQ29kZUF0KHBvcysrKTtcbiAgICAgICAgaWYgKCh2YWx1ZSAmIDB4ZmZmZmZmODApID09PSAwKSB7XG4gICAgICAgICAgICAvLyAxLWJ5dGVcbiAgICAgICAgICAgIGJ5dGVMZW5ndGgrKztcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCh2YWx1ZSAmIDB4ZmZmZmY4MDApID09PSAwKSB7XG4gICAgICAgICAgICAvLyAyLWJ5dGVzXG4gICAgICAgICAgICBieXRlTGVuZ3RoICs9IDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBoYW5kbGUgc3Vycm9nYXRlIHBhaXJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA+PSAweGQ4MDAgJiYgdmFsdWUgPD0gMHhkYmZmKSB7XG4gICAgICAgICAgICAgICAgLy8gaGlnaCBzdXJyb2dhdGVcbiAgICAgICAgICAgICAgICBpZiAocG9zIDwgc3RyTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBleHRyYSA9IHN0ci5jaGFyQ29kZUF0KHBvcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoZXh0cmEgJiAweGZjMDApID09PSAweGRjMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICsrcG9zO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAoKHZhbHVlICYgMHgzZmYpIDw8IDEwKSArIChleHRyYSAmIDB4M2ZmKSArIDB4MTAwMDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKHZhbHVlICYgMHhmZmZmMDAwMCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyAzLWJ5dGVcbiAgICAgICAgICAgICAgICBieXRlTGVuZ3RoICs9IDM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyA0LWJ5dGVcbiAgICAgICAgICAgICAgICBieXRlTGVuZ3RoICs9IDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGJ5dGVMZW5ndGg7XG59XG5leHBvcnQgZnVuY3Rpb24gdXRmOEVuY29kZUpzKHN0ciwgb3V0cHV0LCBvdXRwdXRPZmZzZXQpIHtcbiAgICB2YXIgc3RyTGVuZ3RoID0gc3RyLmxlbmd0aDtcbiAgICB2YXIgb2Zmc2V0ID0gb3V0cHV0T2Zmc2V0O1xuICAgIHZhciBwb3MgPSAwO1xuICAgIHdoaWxlIChwb3MgPCBzdHJMZW5ndGgpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gc3RyLmNoYXJDb2RlQXQocG9zKyspO1xuICAgICAgICBpZiAoKHZhbHVlICYgMHhmZmZmZmY4MCkgPT09IDApIHtcbiAgICAgICAgICAgIC8vIDEtYnl0ZVxuICAgICAgICAgICAgb3V0cHV0W29mZnNldCsrXSA9IHZhbHVlO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHhmZmZmZjgwMCkgPT09IDApIHtcbiAgICAgICAgICAgIC8vIDItYnl0ZXNcbiAgICAgICAgICAgIG91dHB1dFtvZmZzZXQrK10gPSAoKHZhbHVlID4+IDYpICYgMHgxZikgfCAweGMwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gaGFuZGxlIHN1cnJvZ2F0ZSBwYWlyXG4gICAgICAgICAgICBpZiAodmFsdWUgPj0gMHhkODAwICYmIHZhbHVlIDw9IDB4ZGJmZikge1xuICAgICAgICAgICAgICAgIC8vIGhpZ2ggc3Vycm9nYXRlXG4gICAgICAgICAgICAgICAgaWYgKHBvcyA8IHN0ckxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXh0cmEgPSBzdHIuY2hhckNvZGVBdChwb3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGV4dHJhICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICArK3BvcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gKCh2YWx1ZSAmIDB4M2ZmKSA8PCAxMCkgKyAoZXh0cmEgJiAweDNmZikgKyAweDEwMDAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4ZmZmZjAwMDApID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gMy1ieXRlXG4gICAgICAgICAgICAgICAgb3V0cHV0W29mZnNldCsrXSA9ICgodmFsdWUgPj4gMTIpICYgMHgwZikgfCAweGUwO1xuICAgICAgICAgICAgICAgIG91dHB1dFtvZmZzZXQrK10gPSAoKHZhbHVlID4+IDYpICYgMHgzZikgfCAweDgwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gNC1ieXRlXG4gICAgICAgICAgICAgICAgb3V0cHV0W29mZnNldCsrXSA9ICgodmFsdWUgPj4gMTgpICYgMHgwNykgfCAweGYwO1xuICAgICAgICAgICAgICAgIG91dHB1dFtvZmZzZXQrK10gPSAoKHZhbHVlID4+IDEyKSAmIDB4M2YpIHwgMHg4MDtcbiAgICAgICAgICAgICAgICBvdXRwdXRbb2Zmc2V0KytdID0gKCh2YWx1ZSA+PiA2KSAmIDB4M2YpIHwgMHg4MDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXRwdXRbb2Zmc2V0KytdID0gKHZhbHVlICYgMHgzZikgfCAweDgwO1xuICAgIH1cbn1cbnZhciBzaGFyZWRUZXh0RW5jb2RlciA9IFRFWFRfRU5DT0RJTkdfQVZBSUxBQkxFID8gbmV3IFRleHRFbmNvZGVyKCkgOiB1bmRlZmluZWQ7XG5leHBvcnQgdmFyIFRFWFRfRU5DT0RFUl9USFJFU0hPTEQgPSAhVEVYVF9FTkNPRElOR19BVkFJTEFCTEVcbiAgICA/IFVJTlQzMl9NQVhcbiAgICA6IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmICgoX2IgPSBwcm9jZXNzID09PSBudWxsIHx8IHByb2Nlc3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb2Nlc3MuZW52KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbXCJURVhUX0VOQ09ESU5HXCJdKSAhPT0gXCJmb3JjZVwiXG4gICAgICAgID8gMjAwXG4gICAgICAgIDogMDtcbmZ1bmN0aW9uIHV0ZjhFbmNvZGVURWVuY29kZShzdHIsIG91dHB1dCwgb3V0cHV0T2Zmc2V0KSB7XG4gICAgb3V0cHV0LnNldChzaGFyZWRUZXh0RW5jb2Rlci5lbmNvZGUoc3RyKSwgb3V0cHV0T2Zmc2V0KTtcbn1cbmZ1bmN0aW9uIHV0ZjhFbmNvZGVURWVuY29kZUludG8oc3RyLCBvdXRwdXQsIG91dHB1dE9mZnNldCkge1xuICAgIHNoYXJlZFRleHRFbmNvZGVyLmVuY29kZUludG8oc3RyLCBvdXRwdXQuc3ViYXJyYXkob3V0cHV0T2Zmc2V0KSk7XG59XG5leHBvcnQgdmFyIHV0ZjhFbmNvZGVURSA9IChzaGFyZWRUZXh0RW5jb2RlciA9PT0gbnVsbCB8fCBzaGFyZWRUZXh0RW5jb2RlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2hhcmVkVGV4dEVuY29kZXIuZW5jb2RlSW50bykgPyB1dGY4RW5jb2RlVEVlbmNvZGVJbnRvIDogdXRmOEVuY29kZVRFZW5jb2RlO1xudmFyIENIVU5LX1NJWkUgPSA0MDk2O1xuZXhwb3J0IGZ1bmN0aW9uIHV0ZjhEZWNvZGVKcyhieXRlcywgaW5wdXRPZmZzZXQsIGJ5dGVMZW5ndGgpIHtcbiAgICB2YXIgb2Zmc2V0ID0gaW5wdXRPZmZzZXQ7XG4gICAgdmFyIGVuZCA9IG9mZnNldCArIGJ5dGVMZW5ndGg7XG4gICAgdmFyIHVuaXRzID0gW107XG4gICAgdmFyIHJlc3VsdCA9IFwiXCI7XG4gICAgd2hpbGUgKG9mZnNldCA8IGVuZCkge1xuICAgICAgICB2YXIgYnl0ZTEgPSBieXRlc1tvZmZzZXQrK107XG4gICAgICAgIGlmICgoYnl0ZTEgJiAweDgwKSA9PT0gMCkge1xuICAgICAgICAgICAgLy8gMSBieXRlXG4gICAgICAgICAgICB1bml0cy5wdXNoKGJ5dGUxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgoYnl0ZTEgJiAweGUwKSA9PT0gMHhjMCkge1xuICAgICAgICAgICAgLy8gMiBieXRlc1xuICAgICAgICAgICAgdmFyIGJ5dGUyID0gYnl0ZXNbb2Zmc2V0KytdICYgMHgzZjtcbiAgICAgICAgICAgIHVuaXRzLnB1c2goKChieXRlMSAmIDB4MWYpIDw8IDYpIHwgYnl0ZTIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChieXRlMSAmIDB4ZjApID09PSAweGUwKSB7XG4gICAgICAgICAgICAvLyAzIGJ5dGVzXG4gICAgICAgICAgICB2YXIgYnl0ZTIgPSBieXRlc1tvZmZzZXQrK10gJiAweDNmO1xuICAgICAgICAgICAgdmFyIGJ5dGUzID0gYnl0ZXNbb2Zmc2V0KytdICYgMHgzZjtcbiAgICAgICAgICAgIHVuaXRzLnB1c2goKChieXRlMSAmIDB4MWYpIDw8IDEyKSB8IChieXRlMiA8PCA2KSB8IGJ5dGUzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgoYnl0ZTEgJiAweGY4KSA9PT0gMHhmMCkge1xuICAgICAgICAgICAgLy8gNCBieXRlc1xuICAgICAgICAgICAgdmFyIGJ5dGUyID0gYnl0ZXNbb2Zmc2V0KytdICYgMHgzZjtcbiAgICAgICAgICAgIHZhciBieXRlMyA9IGJ5dGVzW29mZnNldCsrXSAmIDB4M2Y7XG4gICAgICAgICAgICB2YXIgYnl0ZTQgPSBieXRlc1tvZmZzZXQrK10gJiAweDNmO1xuICAgICAgICAgICAgdmFyIHVuaXQgPSAoKGJ5dGUxICYgMHgwNykgPDwgMHgxMikgfCAoYnl0ZTIgPDwgMHgwYykgfCAoYnl0ZTMgPDwgMHgwNikgfCBieXRlNDtcbiAgICAgICAgICAgIGlmICh1bml0ID4gMHhmZmZmKSB7XG4gICAgICAgICAgICAgICAgdW5pdCAtPSAweDEwMDAwO1xuICAgICAgICAgICAgICAgIHVuaXRzLnB1c2goKCh1bml0ID4+PiAxMCkgJiAweDNmZikgfCAweGQ4MDApO1xuICAgICAgICAgICAgICAgIHVuaXQgPSAweGRjMDAgfCAodW5pdCAmIDB4M2ZmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVuaXRzLnB1c2godW5pdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1bml0cy5wdXNoKGJ5dGUxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodW5pdHMubGVuZ3RoID49IENIVU5LX1NJWkUpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgdW5pdHMpO1xuICAgICAgICAgICAgdW5pdHMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodW5pdHMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXN1bHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIHVuaXRzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbnZhciBzaGFyZWRUZXh0RGVjb2RlciA9IFRFWFRfRU5DT0RJTkdfQVZBSUxBQkxFID8gbmV3IFRleHREZWNvZGVyKCkgOiBudWxsO1xuZXhwb3J0IHZhciBURVhUX0RFQ09ERVJfVEhSRVNIT0xEID0gIVRFWFRfRU5DT0RJTkdfQVZBSUxBQkxFXG4gICAgPyBVSU5UMzJfTUFYXG4gICAgOiB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiAoKF9jID0gcHJvY2VzcyA9PT0gbnVsbCB8fCBwcm9jZXNzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm9jZXNzLmVudikgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jW1wiVEVYVF9ERUNPREVSXCJdKSAhPT0gXCJmb3JjZVwiXG4gICAgICAgID8gMjAwXG4gICAgICAgIDogMDtcbmV4cG9ydCBmdW5jdGlvbiB1dGY4RGVjb2RlVEQoYnl0ZXMsIGlucHV0T2Zmc2V0LCBieXRlTGVuZ3RoKSB7XG4gICAgdmFyIHN0cmluZ0J5dGVzID0gYnl0ZXMuc3ViYXJyYXkoaW5wdXRPZmZzZXQsIGlucHV0T2Zmc2V0ICsgYnl0ZUxlbmd0aCk7XG4gICAgcmV0dXJuIHNoYXJlZFRleHREZWNvZGVyLmRlY29kZShzdHJpbmdCeXRlcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGY4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@msgpack/msgpack/dist.es5+esm/utils/utf8.mjs\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ })()
;